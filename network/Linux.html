<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux操作系统 | DunxiDocs</title>
    <meta name="description" content="A VitePress site">
    <link rel="preload stylesheet" href="/assets/style.d8393fc3.css" as="style">
    <link rel="modulepreload" href="/assets/app.6aa024e7.js">
    <link rel="modulepreload" href="/assets/network_Linux.md.1c0b158b.lean.js">
    
    <link rel="icon" href="./favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a818de47><!--[--><!--]--><!--[--><span tabindex="-1" data-v-59736647></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-59736647> Skip to content </a><!--]--><!----><header class="VPNav" data-v-a818de47 data-v-af866a43><div class="VPNavBar has-sidebar" data-v-af866a43 data-v-c7d9fa47><div class="container" data-v-c7d9fa47><div class="title" data-v-c7d9fa47><div class="VPNavBarTitle has-sidebar" data-v-c7d9fa47 data-v-9c576d5a><a class="title" href="/" data-v-9c576d5a><!--[--><!--]--><!----><!--[-->DunxiDocs<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-c7d9fa47><div class="curtain" data-v-c7d9fa47></div><div class="content-body" data-v-c7d9fa47><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-c7d9fa47 data-v-e9d39e41><span id="main-nav-aria-label" class="visually-hidden" data-v-e9d39e41>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/go/" data-v-e9d39e41 data-v-142eda55 data-v-96a508af><!--[-->Go<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/java/" data-v-e9d39e41 data-v-142eda55 data-v-96a508af><!--[-->Java<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blockchain/Solidity" data-v-e9d39e41 data-v-142eda55 data-v-96a508af><!--[-->区块链<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/database/mysql" data-v-e9d39e41 data-v-142eda55 data-v-96a508af><!--[-->数据库<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/python/" data-v-e9d39e41 data-v-142eda55 data-v-96a508af><!--[-->Python<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/network/Linux" data-v-e9d39e41 data-v-142eda55 data-v-96a508af><!--[-->Network<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-c7d9fa47 data-v-71e6c37e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-71e6c37e data-v-16ea2170 data-v-0832a754><span class="check" data-v-0832a754><span class="icon" data-v-0832a754><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-16ea2170><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-16ea2170><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-c7d9fa47 data-v-39c26b17 data-v-57fdeba1><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-57fdeba1><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-57fdeba1><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-57fdeba1><div class="VPMenu" data-v-57fdeba1 data-v-97491713><!----><!--[--><!--[--><!----><div class="group" data-v-39c26b17><div class="item appearance" data-v-39c26b17><p class="label" data-v-39c26b17>Appearance</p><div class="appearance-action" data-v-39c26b17><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-39c26b17 data-v-16ea2170 data-v-0832a754><span class="check" data-v-0832a754><span class="icon" data-v-0832a754><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-16ea2170><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-16ea2170><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-c7d9fa47 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-a818de47 data-v-d8b07b1c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-d8b07b1c><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-d8b07b1c><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-d8b07b1c>Menu</span></button><a class="top-link" href="#" data-v-d8b07b1c>Return to top</a></div><aside class="VPSidebar" data-v-a818de47 data-v-309e38f2><div class="curtain" data-v-309e38f2></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-309e38f2><span class="visually-hidden" id="sidebar-aria-label" data-v-309e38f2> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-309e38f2><section class="VPSidebarItem level-0 has-active" data-v-309e38f2 data-v-9b396c27><div class="item" role="button" data-v-9b396c27><div class="indicator" data-v-9b396c27></div><a class="VPLink link" data-v-9b396c27 data-v-96a508af><!--[--><h2 class="text" data-v-9b396c27>NetWork</h2><!--]--><!----></a><!----></div><div class="items" data-v-9b396c27><!--[--><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-9b396c27 data-v-9b396c27><div class="item" data-v-9b396c27><div class="indicator" data-v-9b396c27></div><a class="VPLink link link" href="/network/Linux" data-v-9b396c27 data-v-96a508af><!--[--><p class="text" data-v-9b396c27>Linux</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b396c27 data-v-9b396c27><div class="item" data-v-9b396c27><div class="indicator" data-v-9b396c27></div><a class="VPLink link link" href="/network/IPV6" data-v-9b396c27 data-v-96a508af><!--[--><p class="text" data-v-9b396c27>IPv6</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b396c27 data-v-9b396c27><div class="item" data-v-9b396c27><div class="indicator" data-v-9b396c27></div><a class="VPLink link link" href="/network/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C" data-v-9b396c27 data-v-96a508af><!--[--><p class="text" data-v-9b396c27>计算机网络</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b396c27 data-v-9b396c27><div class="item" data-v-9b396c27><div class="indicator" data-v-9b396c27></div><a class="VPLink link link" href="/network/Nginx" data-v-9b396c27 data-v-96a508af><!--[--><p class="text" data-v-9b396c27>Nginx</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b396c27 data-v-9b396c27><div class="item" data-v-9b396c27><div class="indicator" data-v-9b396c27></div><a class="VPLink link link" href="/network/Kubernetes" data-v-9b396c27 data-v-96a508af><!--[--><p class="text" data-v-9b396c27>Kubernetes</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b396c27 data-v-9b396c27><div class="item" data-v-9b396c27><div class="indicator" data-v-9b396c27></div><a class="VPLink link link" href="/network/%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E6%8A%80%E6%9C%AF" data-v-9b396c27 data-v-96a508af><!--[--><p class="text" data-v-9b396c27>数据通信技术</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a818de47 data-v-91505d7a><div class="VPDoc has-sidebar has-aside" data-v-91505d7a data-v-40602e86><div class="container" data-v-40602e86><div class="aside" data-v-40602e86><div class="aside-curtain" data-v-40602e86></div><div class="aside-container" data-v-40602e86><div class="aside-content" data-v-40602e86><div class="VPDocAside" data-v-40602e86 data-v-f20c7bfd><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-f20c7bfd data-v-0d25dff3><div class="content" data-v-0d25dff3><div class="outline-marker" data-v-0d25dff3></div><div class="outline-title" data-v-0d25dff3>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-0d25dff3><span class="visually-hidden" id="doc-outline-aria-label" data-v-0d25dff3> Table of Contents for current page </span><ul class="root" data-v-0d25dff3 data-v-c6ed8bb7><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-f20c7bfd></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-40602e86><div class="content-container" data-v-40602e86><!--[--><!--]--><main class="main" data-v-40602e86><div style="position:relative;" class="vp-doc _network_Linux" data-v-40602e86><div><h1 id="linux操作系统" tabindex="-1">Linux操作系统 <a class="header-anchor" href="#linux操作系统" aria-hidden="true">#</a></h1><p><em>(基于《鸟哥的Linux私房菜》整理)</em></p><h2 id="一、linux系统基础" tabindex="-1">一、Linux系统基础 <a class="header-anchor" href="#一、linux系统基础" aria-hidden="true">#</a></h2><h3 id="_1-登录与退出" tabindex="-1">1. 登录与退出 <a class="header-anchor" href="#_1-登录与退出" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 登录系统</span></span>
<span class="line"><span style="color:#B392F0;">username:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">your_username</span></span>
<span class="line"><span style="color:#B392F0;">password:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">your_password</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 退出系统</span></span>
<span class="line"><span style="color:#E1E4E8;">logout</span></span>
<span class="line"><span style="color:#79B8FF;">exit</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+D</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 也可以退出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 切换用户</span></span>
<span class="line"><span style="color:#B392F0;">su</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 切换到指定用户，-表示加载环境变量</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 切换到root用户(需要sudo权限)</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 以指定用户身份执行命令</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2-基本命令详解" tabindex="-1">2. 基本命令详解 <a class="header-anchor" href="#_2-基本命令详解" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># pwd: 显示当前工作目录</span></span>
<span class="line"><span style="color:#79B8FF;">pwd</span></span>
<span class="line"><span style="color:#6A737D;"># 示例输出: /home/user</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ls: 列出目录内容</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 列出当前目录非隐藏文件</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 显示所有文件(包括隐藏文件，以.开头)</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 详细列表模式</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-lh</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 人类可读的文件大小</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-lt</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 按修改时间排序(最新在前)</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ltr</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 按修改时间反向排序(最旧在前)</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 递归列出子目录</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path/to/dir</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 列出指定目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># cd: 改变目录</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path/to/dir</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 绝对路径切换</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir_name</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 相对路径切换</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">..</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 返回上一级目录</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">../..</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 返回上两级目录</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 返回用户主目录</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 返回用户主目录</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 在当前目录和上一个工作目录之间切换</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># mkdir: 创建目录</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dirname</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 创建单个目录</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir1/dir2/dir3</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 递归创建目录(包含父目录)</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">755</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dirname</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 创建目录并设置权限</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># rmdir: 删除空目录</span></span>
<span class="line"><span style="color:#B392F0;">rmdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dirname</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 仅能删除空目录</span></span>
<span class="line"><span style="color:#B392F0;">rmdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir1/dir2/dir3</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 递归删除空目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># touch: 创建空文件或修改文件时间戳</span></span>
<span class="line"><span style="color:#B392F0;">touch</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 创建空文件</span></span>
<span class="line"><span style="color:#B392F0;">touch</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 创建多个文件</span></span>
<span class="line"><span style="color:#B392F0;">touch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">202301010000</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 设置特定时间戳(YYYYMMDDHHMM)</span></span>
<span class="line"><span style="color:#B392F0;">touch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 仅修改访问时间</span></span>
<span class="line"><span style="color:#B392F0;">touch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 仅修改修改时间</span></span>
<span class="line"><span style="color:#B392F0;">touch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ref_file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">target_file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 使用参考文件的时间戳</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># echo: 显示文本或变量值</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Hello World&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 显示文本</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> $HOME          </span><span style="color:#6A737D;"># 显示环境变量</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Text&quot;</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 不换行输出</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Line1\nLine2&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 启用转义字符</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Text&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 将输出重定向到文件(覆盖)</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Text&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 将输出追加到文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># date: 显示/设置日期和时间</span></span>
<span class="line"><span style="color:#B392F0;">date</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 显示当前日期和时间</span></span>
<span class="line"><span style="color:#B392F0;">date</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+&quot;%Y-%m-%d %H:%M:%S&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 自定义格式</span></span>
<span class="line"><span style="color:#B392F0;">date</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;2023-01-01 12:00:00&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 设置系统时间(需要root权限)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># cal: 显示日历</span></span>
<span class="line"><span style="color:#B392F0;">cal</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 显示当前月日历</span></span>
<span class="line"><span style="color:#B392F0;">cal</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 显示2023年全年日历</span></span>
<span class="line"><span style="color:#B392F0;">cal</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 显示2023年1月日历</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># clear: 清屏</span></span>
<span class="line"><span style="color:#B392F0;">clear</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 清除终端屏幕</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+L</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 也可以清屏(快捷键)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># history: 命令历史</span></span>
<span class="line"><span style="color:#79B8FF;">history</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 显示命令历史</span></span>
<span class="line"><span style="color:#79B8FF;">history</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 显示最近10条命令</span></span>
<span class="line"><span style="color:#F97583;">!</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 执行历史记录中的第5条命令</span></span>
<span class="line"><span style="color:#F97583;">!!</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 重复上一条命令</span></span>
<span class="line"><span style="color:#F97583;">!</span><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 重复最近以ls开头的命令</span></span>
<span class="line"><span style="color:#79B8FF;">history</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 清空历史记录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># man: 手册页</span></span>
<span class="line"><span style="color:#B392F0;">man</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ls</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 查看ls命令手册</span></span>
<span class="line"><span style="color:#B392F0;">man</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-k</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">keyword</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 搜索包含关键字的手册页</span></span>
<span class="line"><span style="color:#B392F0;">man</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 查看用户命令(1类)</span></span>
<span class="line"><span style="color:#B392F0;">man</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">passwd</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 查看配置文件格式(5类)</span></span>
<span class="line"><span style="color:#6A737D;"># 在man页面中:</span></span>
<span class="line"><span style="color:#6A737D;">#  q      退出</span></span>
<span class="line"><span style="color:#6A737D;">#  /text  搜索text</span></span>
<span class="line"><span style="color:#6A737D;">#  n      下一个搜索结果</span></span>
<span class="line"><span style="color:#6A737D;">#  N      上一个搜索结果</span></span>
<span class="line"><span style="color:#6A737D;">#  Space  下一页</span></span>
<span class="line"><span style="color:#6A737D;">#  b      上一页</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><h2 id="二、文件系统与目录结构" tabindex="-1">二、文件系统与目录结构 <a class="header-anchor" href="#二、文件系统与目录结构" aria-hidden="true">#</a></h2><h3 id="_1-linux目录结构详解-fhs标准" tabindex="-1">1. Linux目录结构详解 (FHS标准) <a class="header-anchor" href="#_1-linux目录结构详解-fhs标准" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">/ (根目录)</span></span>
<span class="line"><span style="color:#e1e4e8;">├── bin        # 基础命令二进制文件，所有用户可用(软链接到/usr/bin)</span></span>
<span class="line"><span style="color:#e1e4e8;">├── boot       # 启动加载器文件、内核文件</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── vmlinuz       # Linux内核文件</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── initramfs     # 初始RAM磁盘</span></span>
<span class="line"><span style="color:#e1e4e8;">│   └── grub2         # GRUB2引导加载器配置</span></span>
<span class="line"><span style="color:#e1e4e8;">├── dev        # 设备文件</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── sda           # 第一块SATA/SCSI硬盘</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── sda1          # 第一块硬盘的第一个分区</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── tty           # 终端设备</span></span>
<span class="line"><span style="color:#e1e4e8;">│   └── null          # 丢弃所有写入的数据，读取时返回EOF</span></span>
<span class="line"><span style="color:#e1e4e8;">├── etc        # 系统配置文件</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── passwd        # 用户账户信息</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── shadow        # 用户密码信息</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── group         # 用户组信息</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── hosts         # 主机名解析</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── fstab         # 文件系统挂载表</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── sudoers       # sudo权限配置</span></span>
<span class="line"><span style="color:#e1e4e8;">│   └── sysconfig/    # 系统配置目录(RHEL/CentOS)</span></span>
<span class="line"><span style="color:#e1e4e8;">├── home       # 普通用户主目录</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── user1         # user1的主目录</span></span>
<span class="line"><span style="color:#e1e4e8;">│   └── user2         # user2的主目录</span></span>
<span class="line"><span style="color:#e1e4e8;">├── lib        # 32位共享库文件(软链接到/usr/lib)</span></span>
<span class="line"><span style="color:#e1e4e8;">├── lib64      # 64位共享库文件(软链接到/usr/lib64)</span></span>
<span class="line"><span style="color:#e1e4e8;">├── media      # 可移动媒体挂载点(如USB、CD-ROM)</span></span>
<span class="line"><span style="color:#e1e4e8;">├── mnt        # 临时挂载文件系统</span></span>
<span class="line"><span style="color:#e1e4e8;">├── opt        # 可选应用程序包</span></span>
<span class="line"><span style="color:#e1e4e8;">├── proc       # 虚拟文件系统，包含进程和内核信息</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── cpuinfo       # CPU信息</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── meminfo       # 内存信息</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── mounts        # 挂载的文件系统</span></span>
<span class="line"><span style="color:#e1e4e8;">│   └── [pid]         # 进程信息目录</span></span>
<span class="line"><span style="color:#e1e4e8;">├── root       # root用户的主目录</span></span>
<span class="line"><span style="color:#e1e4e8;">├── run        # 运行时变量数据</span></span>
<span class="line"><span style="color:#e1e4e8;">├── sbin       # 系统管理命令(软链接到/usr/sbin)</span></span>
<span class="line"><span style="color:#e1e4e8;">├── srv        # 服务数据</span></span>
<span class="line"><span style="color:#e1e4e8;">├── sys        # 虚拟文件系统，设备和驱动信息</span></span>
<span class="line"><span style="color:#e1e4e8;">├── tmp        # 临时文件(重启后通常清除)</span></span>
<span class="line"><span style="color:#e1e4e8;">├── usr        # 用户程序和数据</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── bin           # 用户命令</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── sbin          # 系统管理命令</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── lib           # 程序库</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── include       # C头文件</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── share         # 体系结构无关的数据</span></span>
<span class="line"><span style="color:#e1e4e8;">│   ├── local         # 本地安装的软件(/usr/local/bin等)</span></span>
<span class="line"><span style="color:#e1e4e8;">│   └── src           # 源代码</span></span>
<span class="line"><span style="color:#e1e4e8;">└── var        # 可变数据文件</span></span>
<span class="line"><span style="color:#e1e4e8;">    ├── log           # 系统日志</span></span>
<span class="line"><span style="color:#e1e4e8;">    ├── cache         # 应用程序缓存</span></span>
<span class="line"><span style="color:#e1e4e8;">    ├── lib           # 状态信息</span></span>
<span class="line"><span style="color:#e1e4e8;">    ├── spool         # 任务队列</span></span>
<span class="line"><span style="color:#e1e4e8;">    └── www           # Web服务器文件</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h3 id="_2-详细文件操作命令" tabindex="-1">2. 详细文件操作命令 <a class="header-anchor" href="#_2-详细文件操作命令" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># cp: 复制文件和目录</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 复制文件</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir/</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 复制多个文件到目录</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir2</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 递归复制目录</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir2</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 归档模式(保留权限、所有权等)</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 交互模式(覆盖前确认)</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 详细模式(显示操作过程)</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 仅当file1比file2新或file2不存在时复制</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># mv: 移动/重命名文件</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 重命名文件</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir/</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 移动文件到目录</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir2</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 重命名目录</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 交互模式(覆盖前确认)</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 详细模式</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># rm: 删除文件</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                       </span><span style="color:#6A737D;"># 删除文件</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 删除多个文件</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">.txt</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 删除所有.txt文件</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 交互模式(删除前确认)</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 强制删除(不提示)</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 详细模式</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># rm -r: 递归删除目录</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 递归删除目录</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-rf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 强制递归删除(危险命令!)</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ri</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 交互式递归删除</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># file: 确定文件类型</span></span>
<span class="line"><span style="color:#B392F0;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 显示文件类型</span></span>
<span class="line"><span style="color:#B392F0;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-b</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 简洁输出</span></span>
<span class="line"><span style="color:#B392F0;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 显示设备文件类型</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># du: 估算文件空间使用</span></span>
<span class="line"><span style="color:#B392F0;">du</span><span style="color:#E1E4E8;">                            </span><span style="color:#6A737D;"># 显示当前目录大小</span></span>
<span class="line"><span style="color:#B392F0;">du</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;">                         </span><span style="color:#6A737D;"># 人类可读格式</span></span>
<span class="line"><span style="color:#B392F0;">du</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path/to/dir</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 显示目录总大小</span></span>
<span class="line"><span style="color:#B392F0;">du</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--max-depth=1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 限制目录深度</span></span>
<span class="line"><span style="color:#B392F0;">du</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--exclude=</span><span style="color:#9ECBFF;">&quot;*.tmp&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 排除特定文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># df: 报告文件系统磁盘空间使用</span></span>
<span class="line"><span style="color:#B392F0;">df</span><span style="color:#E1E4E8;">                            </span><span style="color:#6A737D;"># 显示所有文件系统</span></span>
<span class="line"><span style="color:#B392F0;">df</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;">                         </span><span style="color:#6A737D;"># 人类可读格式</span></span>
<span class="line"><span style="color:#B392F0;">df</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-T</span><span style="color:#E1E4E8;">                         </span><span style="color:#6A737D;"># 显示文件系统类型</span></span>
<span class="line"><span style="color:#B392F0;">df</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">                         </span><span style="color:#6A737D;"># 显示inode使用情况</span></span>
<span class="line"><span style="color:#B392F0;">df</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 显示特定文件系统</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ln: 创建链接</span></span>
<span class="line"><span style="color:#B392F0;">ln</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 创建硬链接</span></span>
<span class="line"><span style="color:#B392F0;">ln</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 创建符号链接(软链接)</span></span>
<span class="line"><span style="color:#B392F0;">ln</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 强制创建符号链接(覆盖现有)</span></span>
<span class="line"><span style="color:#B392F0;">ln</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir/</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 详细模式创建符号链接</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看链接</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 显示链接目标</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-li</span><span style="color:#E1E4E8;">                        </span><span style="color:#6A737D;"># 显示inode号(硬链接有相同inode)</span></span>
<span class="line"><span style="color:#B392F0;">readlink</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 仅显示链接目标</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h2 id="三、文件内容查看与处理" tabindex="-1">三、文件内容查看与处理 <a class="header-anchor" href="#三、文件内容查看与处理" aria-hidden="true">#</a></h2><h3 id="_1-内容查看命令" tabindex="-1">1. 内容查看命令 <a class="header-anchor" href="#_1-内容查看命令" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># cat: 连接并显示文件内容</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 显示整个文件</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 连接多个文件</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">newfile</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 从标准输入创建文件(Ctrl+D结束)</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 覆盖写入</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 追加写入</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># tac: 反向显示文件</span></span>
<span class="line"><span style="color:#B392F0;">tac</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 从最后一行开始显示</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># more: 分页查看文件(仅向前)</span></span>
<span class="line"><span style="color:#B392F0;">more</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 分页查看</span></span>
<span class="line"><span style="color:#6A737D;"># 在more中:</span></span>
<span class="line"><span style="color:#6A737D;">#  Space  下一页</span></span>
<span class="line"><span style="color:#6A737D;">#  Enter  下一行</span></span>
<span class="line"><span style="color:#6A737D;">#  b      上一页(如果可能)</span></span>
<span class="line"><span style="color:#6A737D;">#  q      退出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># less: 增强版分页查看(可向前向后)</span></span>
<span class="line"><span style="color:#B392F0;">less</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 分页查看</span></span>
<span class="line"><span style="color:#6A737D;"># 在less中:</span></span>
<span class="line"><span style="color:#6A737D;">#  Space  下一页</span></span>
<span class="line"><span style="color:#6A737D;">#  b      上一页</span></span>
<span class="line"><span style="color:#6A737D;">#  g      跳到文件开头</span></span>
<span class="line"><span style="color:#6A737D;">#  G      跳到文件末尾</span></span>
<span class="line"><span style="color:#6A737D;">#  /text  向前搜索text</span></span>
<span class="line"><span style="color:#6A737D;">#  ?text  向后搜索text</span></span>
<span class="line"><span style="color:#6A737D;">#  n      下一个搜索结果</span></span>
<span class="line"><span style="color:#6A737D;">#  N      上一个搜索结果</span></span>
<span class="line"><span style="color:#6A737D;">#  q      退出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># head: 显示文件开头</span></span>
<span class="line"><span style="color:#B392F0;">head</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 默认显示前10行</span></span>
<span class="line"><span style="color:#B392F0;">head</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 显示前5行</span></span>
<span class="line"><span style="color:#B392F0;">head</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 显示前100字节</span></span>
<span class="line"><span style="color:#B392F0;">head</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 显示除最后5行外的所有内容</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># tail: 显示文件末尾</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 默认显示后10行</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 显示后5行</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logfile</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 持续监控文件变化(用于日志)</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logfile</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 持续监控(即使文件被重命名/重建)</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 从第5行开始显示到末尾</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># nl: 带行号显示文件</span></span>
<span class="line"><span style="color:#B392F0;">nl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                       </span><span style="color:#6A737D;"># 显示带行号的文件</span></span>
<span class="line"><span style="color:#B392F0;">nl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ba</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                   </span><span style="color:#6A737D;"># 为所有行编号(包括空行)</span></span>
<span class="line"><span style="color:#B392F0;">nl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#9ECBFF;">&quot;: &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 自定义行号格式(3位宽，后跟&quot;: &quot;)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># od: 显示二进制文件</span></span>
<span class="line"><span style="color:#B392F0;">od</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 以ASCII字符显示</span></span>
<span class="line"><span style="color:#B392F0;">od</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 以十六进制显示</span></span>
<span class="line"><span style="color:#B392F0;">od</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 以单字节十六进制显示</span></span>
<span class="line"><span style="color:#B392F0;">od</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x1z</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 带地址和可读格式</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="_2-文件搜索与定位" tabindex="-1">2. 文件搜索与定位 <a class="header-anchor" href="#_2-文件搜索与定位" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># which: 在PATH中搜索可执行文件</span></span>
<span class="line"><span style="color:#79B8FF;">which</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 查找命令路径</span></span>
<span class="line"><span style="color:#79B8FF;">which</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 显示所有匹配项</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># whereis: 搜索二进制、源码和man手册</span></span>
<span class="line"><span style="color:#B392F0;">whereis</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 搜索命令</span></span>
<span class="line"><span style="color:#B392F0;">whereis</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-b</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 仅搜索二进制</span></span>
<span class="line"><span style="color:#B392F0;">whereis</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 仅搜索man手册</span></span>
<span class="line"><span style="color:#B392F0;">whereis</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 仅搜索源代码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># locate: 通过数据库快速查找文件</span></span>
<span class="line"><span style="color:#B392F0;">locate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 搜索文件</span></span>
<span class="line"><span style="color:#B392F0;">locate</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 忽略大小写</span></span>
<span class="line"><span style="color:#B392F0;">locate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*.conf&quot;</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 使用通配符</span></span>
<span class="line"><span style="color:#B392F0;">updatedb</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 更新数据库(需要root权限)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># find: 强大的实时文件搜索</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 列出目录下所有文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;filename&quot;</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 按名称查找(区分大小写)</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-iname</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;filename&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 按名称查找(不区分大小写)</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-type</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">f</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 仅查找文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-type</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">d</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 仅查找目录</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-type</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">l</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 仅查找符号链接</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-mtime</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-7</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 7天内修改的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-mtime</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+</span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 7天前修改的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-atime</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-7</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 7天内访问的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ctime</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-7</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 7天内状态改变的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-size</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+10M</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 大于10MB的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-size</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-100k</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 小于100KB的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 属于特定用户的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">groupname</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 属于特定组的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-perm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">755</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 权限为755的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-perm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u=x</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 用户有执行权限的文件</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-empty</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 空文件或目录</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-exec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{}</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 对每个结果执行命令</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-exec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{}</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\;</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 删除所有匹配文件(危险!)</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ok</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{}</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\;</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 交互式删除</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="四、文件权限与特殊属性" tabindex="-1">四、文件权限与特殊属性 <a class="header-anchor" href="#四、文件权限与特殊属性" aria-hidden="true">#</a></h2><h3 id="_1-详细权限解析" tabindex="-1">1. 详细权限解析 <a class="header-anchor" href="#_1-详细权限解析" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">文件类型标识符:</span></span>
<span class="line"><span style="color:#e1e4e8;">-  普通文件</span></span>
<span class="line"><span style="color:#e1e4e8;">d  目录</span></span>
<span class="line"><span style="color:#e1e4e8;">l  符号链接</span></span>
<span class="line"><span style="color:#e1e4e8;">b  块设备文件</span></span>
<span class="line"><span style="color:#e1e4e8;">c  字符设备文件</span></span>
<span class="line"><span style="color:#e1e4e8;">s  套接字文件</span></span>
<span class="line"><span style="color:#e1e4e8;">p  管道文件</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">权限位详解(每3位一组):</span></span>
<span class="line"><span style="color:#e1e4e8;">用户(user/owner)   组(group)   其他人(others)</span></span>
<span class="line"><span style="color:#e1e4e8;">rwx               rwx         rwx</span></span>
<span class="line"><span style="color:#e1e4e8;">│││               │││         │││</span></span>
<span class="line"><span style="color:#e1e4e8;">││└─ 执行(x)      ││└─ 执行(x) │└─ 执行(x)</span></span>
<span class="line"><span style="color:#e1e4e8;">│└── 写入(w)      │└── 写入(w) └── 写入(w)</span></span>
<span class="line"><span style="color:#e1e4e8;">└─── 读取(r)      └─── 读取(r)   └─ 读取(r)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">特殊权限位:</span></span>
<span class="line"><span style="color:#e1e4e8;">s  SUID/SGID (在用户/组的x位置)</span></span>
<span class="line"><span style="color:#e1e4e8;">t  Sticky bit (在其他人的x位置)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_2-权限管理命令详解" tabindex="-1">2. 权限管理命令详解 <a class="header-anchor" href="#_2-权限管理命令详解" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># chmod: 修改文件权限</span></span>
<span class="line"><span style="color:#6A737D;"># 符号模式</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">u+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 用户增加执行权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">g-w</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 组移除写权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">o=r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 其他人设置为只读</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 所有人都增加执行权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ug+rw,o-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 用户和组增加读写，移除其他人读权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 所有类别增加执行权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">u+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 递归修改目录权限</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 数字模式</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">755</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># rwxr-xr-x</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">644</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># rw-r--r--</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">777</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># rwxrwxrwx (谨慎使用!)</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1777</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># rwxrwxrwt (sticky bit)</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4755</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># rwsr-xr-x (SUID)</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2755</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># rwxr-sr-x (SGID)</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">755</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 递归设置目录权限</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># chown: 修改文件所有者</span></span>
<span class="line"><span style="color:#B392F0;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 修改所有者</span></span>
<span class="line"><span style="color:#B392F0;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user:group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 修改所有者和组</span></span>
<span class="line"><span style="color:#B392F0;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 仅修改组</span></span>
<span class="line"><span style="color:#B392F0;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user:group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 递归修改</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># chgrp: 修改文件组</span></span>
<span class="line"><span style="color:#B392F0;">chgrp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 修改组</span></span>
<span class="line"><span style="color:#B392F0;">chgrp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 递归修改</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># umask: 设置默认权限掩码</span></span>
<span class="line"><span style="color:#79B8FF;">umask</span><span style="color:#E1E4E8;">                         </span><span style="color:#6A737D;"># 显示当前掩码</span></span>
<span class="line"><span style="color:#79B8FF;">umask</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">22</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 设置掩码(文件:644, 目录:755)</span></span>
<span class="line"><span style="color:#79B8FF;">umask</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">02</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 设置掩码(文件:664, 目录:775)</span></span>
<span class="line"><span style="color:#6A737D;"># 计算方法:</span></span>
<span class="line"><span style="color:#6A737D;"># 文件默认权限: 666 - umask</span></span>
<span class="line"><span style="color:#6A737D;"># 目录默认权限: 777 - umask</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 特殊权限实例</span></span>
<span class="line"><span style="color:#6A737D;"># SUID: 允许用户以文件所有者权限执行</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">u+s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/bin/passwd</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># passwd命令需要修改/etc/shadow</span></span>
<span class="line"><span style="color:#6A737D;"># SGID: 目录中新建文件继承目录组</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">g+s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/shared/dir</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 团队共享目录</span></span>
<span class="line"><span style="color:#6A737D;"># Sticky bit: 仅文件所有者可删除目录中的文件</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 保护/tmp中的文件</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="_3-文件属性与扩展属性" tabindex="-1">3. 文件属性与扩展属性 <a class="header-anchor" href="#_3-文件属性与扩展属性" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># lsattr: 显示文件属性</span></span>
<span class="line"><span style="color:#B392F0;">lsattr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                   </span><span style="color:#6A737D;"># 显示文件属性</span></span>
<span class="line"><span style="color:#B392F0;">lsattr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 显示目录属性</span></span>
<span class="line"><span style="color:#B392F0;">lsattr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 递归显示</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># chattr: 修改文件属性</span></span>
<span class="line"><span style="color:#B392F0;">chattr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 设置不可变属性(不能修改/删除/重命名)</span></span>
<span class="line"><span style="color:#B392F0;">chattr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 移除不可变属性</span></span>
<span class="line"><span style="color:#B392F0;">chattr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 设置追加属性(只能追加内容，不能修改已有)</span></span>
<span class="line"><span style="color:#B392F0;">chattr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 设置压缩属性(自动压缩/解压)</span></span>
<span class="line"><span style="color:#B392F0;">chattr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 设置安全删除(文件删除时填充零)</span></span>
<span class="line"><span style="color:#B392F0;">chattr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 设置不可删除(保存数据内容，防止意外删除)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># getfacl: 获取访问控制列表</span></span>
<span class="line"><span style="color:#B392F0;">getfacl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 显示ACL</span></span>
<span class="line"><span style="color:#B392F0;">getfacl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 递归显示</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># setfacl: 设置访问控制列表</span></span>
<span class="line"><span style="color:#B392F0;">setfacl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">u:user:rwx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 添加用户ACL</span></span>
<span class="line"><span style="color:#B392F0;">setfacl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">g:group:rx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 添加组ACL</span></span>
<span class="line"><span style="color:#B392F0;">setfacl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">u:user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 删除用户ACL</span></span>
<span class="line"><span style="color:#B392F0;">setfacl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-b</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 删除所有ACL</span></span>
<span class="line"><span style="color:#B392F0;">setfacl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">u:user:r-x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 递归设置ACL</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="五、压缩与归档" tabindex="-1">五、压缩与归档 <a class="header-anchor" href="#五、压缩与归档" aria-hidden="true">#</a></h2><h3 id="_1-压缩与解压缩命令" tabindex="-1">1. 压缩与解压缩命令 <a class="header-anchor" href="#_1-压缩与解压缩命令" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># gzip: 压缩/解压文件(.gz)</span></span>
<span class="line"><span style="color:#B392F0;">gzip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 压缩文件(原文件被删除)</span></span>
<span class="line"><span style="color:#B392F0;">gzip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-k</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 保留原文件</span></span>
<span class="line"><span style="color:#B392F0;">gzip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-9</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 最高压缩比</span></span>
<span class="line"><span style="color:#B392F0;">gzip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file.gz</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 解压文件</span></span>
<span class="line"><span style="color:#B392F0;">gunzip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file.gz</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 等同于gzip -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># bzip2: 压缩/解压文件(.bz2)</span></span>
<span class="line"><span style="color:#B392F0;">bzip2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 压缩文件</span></span>
<span class="line"><span style="color:#B392F0;">bzip2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-k</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 保留原文件</span></span>
<span class="line"><span style="color:#B392F0;">bzip2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-9</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 最高压缩比</span></span>
<span class="line"><span style="color:#B392F0;">bzip2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file.bz2</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 解压文件</span></span>
<span class="line"><span style="color:#B392F0;">bunzip2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file.bz2</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 等同于bzip2 -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># xz: 压缩/解压文件(.xz)</span></span>
<span class="line"><span style="color:#B392F0;">xz</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                       </span><span style="color:#6A737D;"># 压缩文件</span></span>
<span class="line"><span style="color:#B392F0;">xz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-k</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 保留原文件</span></span>
<span class="line"><span style="color:#B392F0;">xz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-9</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 最高压缩比</span></span>
<span class="line"><span style="color:#B392F0;">xz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file.xz</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 解压文件</span></span>
<span class="line"><span style="color:#B392F0;">unxz</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file.xz</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 等同于xz -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># zip/unzip: ZIP格式压缩</span></span>
<span class="line"><span style="color:#B392F0;">zip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.zip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 创建ZIP归档</span></span>
<span class="line"><span style="color:#B392F0;">zip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.zip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir/</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 递归压缩目录</span></span>
<span class="line"><span style="color:#B392F0;">zip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.zip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 加密压缩</span></span>
<span class="line"><span style="color:#B392F0;">unzip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.zip</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 解压ZIP文件</span></span>
<span class="line"><span style="color:#B392F0;">unzip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.zip</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 列出ZIP内容</span></span>
<span class="line"><span style="color:#B392F0;">unzip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.zip</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 解压到指定目录</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_2-归档命令" tabindex="-1">2. 归档命令 <a class="header-anchor" href="#_2-归档命令" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># tar: 归档文件</span></span>
<span class="line"><span style="color:#6A737D;"># 创建归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-cvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 创建归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-czvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar.gz</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir/</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 创建gzip压缩归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-cjvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar.bz2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir/</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 创建bzip2压缩归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-cJvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar.xz</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir/</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 创建xz压缩归档</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 列出归档内容</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 详细列出内容</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 简洁列出内容</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 提取归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 提取归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xzvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar.gz</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 提取gzip压缩归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xjvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar.bz2</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 提取bzip2压缩归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xJvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar.xz</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 提取xz压缩归档</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-C</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 提取到指定目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看特定文件</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 仅提取特定文件</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 搜索归档中的文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 其他选项</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-rvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file3</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 向现有归档添加文件</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--delete</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 从归档中删除文件</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_3-其他压缩工具" tabindex="-1">3. 其他压缩工具 <a class="header-anchor" href="#_3-其他压缩工具" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># cpio: 归档工具</span></span>
<span class="line"><span style="color:#6A737D;"># 从文件列表创建归档</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-print</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cpio</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ov</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.cpio</span></span>
<span class="line"><span style="color:#6A737D;"># 提取归档</span></span>
<span class="line"><span style="color:#B392F0;">cpio</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-idv</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.cpio</span></span>
<span class="line"><span style="color:#6A737D;"># 列出内容</span></span>
<span class="line"><span style="color:#B392F0;">cpio</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-it</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive.cpio</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># dd: 转换和复制文件</span></span>
<span class="line"><span style="color:#B392F0;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/sda</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=disk.img</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 创建磁盘镜像</span></span>
<span class="line"><span style="color:#B392F0;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=disk.img</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/dev/sdb</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 恢复磁盘镜像</span></span>
<span class="line"><span style="color:#B392F0;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/zero</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bs=1M</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">count=</span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 创建100MB空文件</span></span>
<span class="line"><span style="color:#B392F0;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=file2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bs=4K</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 高效复制大文件</span></span>
<span class="line"><span style="color:#B392F0;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/sda</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">gzip</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup.img.gz</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 创建压缩镜像</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># split: 分割大文件</span></span>
<span class="line"><span style="color:#B392F0;">split</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-b</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">100M</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">largefile</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">prefix_</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 按大小分割(100MB/部分)</span></span>
<span class="line"><span style="color:#B392F0;">split</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">largefile</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">prefix_</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 按行数分割(1000行/部分)</span></span>
<span class="line"><span style="color:#6A737D;"># 重组文件</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">prefix_</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">largefile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="六、文本编辑器" tabindex="-1">六、文本编辑器 <a class="header-anchor" href="#六、文本编辑器" aria-hidden="true">#</a></h2><h3 id="_1-vi-vim-编辑器" tabindex="-1">1. vi/vim 编辑器 <a class="header-anchor" href="#_1-vi-vim-编辑器" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 启动vim</span></span>
<span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 编辑文件(不存在则创建)</span></span>
<span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 从第n行开始编辑</span></span>
<span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+/pattern</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 从匹配pattern处开始</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 模式</span></span>
<span class="line"><span style="color:#6A737D;"># 命令模式(默认): 执行命令</span></span>
<span class="line"><span style="color:#6A737D;"># 插入模式: i,a,o等进入, 输入文本</span></span>
<span class="line"><span style="color:#6A737D;"># 可视模式: v,V,Ctrl+v, 选择文本</span></span>
<span class="line"><span style="color:#6A737D;"># 命令行模式: :, /, ?, 执行命令/搜索</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 基本命令(命令模式)</span></span>
<span class="line"><span style="color:#B392F0;">i</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 在光标前插入</span></span>
<span class="line"><span style="color:#B392F0;">a</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 在光标后插入</span></span>
<span class="line"><span style="color:#B392F0;">o</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 在当前行下方插入新行</span></span>
<span class="line"><span style="color:#B392F0;">I</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 在行首插入</span></span>
<span class="line"><span style="color:#B392F0;">A</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 在行尾插入</span></span>
<span class="line"><span style="color:#B392F0;">O</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 在当前行上方插入新行</span></span>
<span class="line"><span style="color:#B392F0;">Esc</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 退出插入模式, 返回命令模式</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 移动光标</span></span>
<span class="line"><span style="color:#B392F0;">h/j/k/l</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 左/下/上/右</span></span>
<span class="line"><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到行首</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到行尾</span></span>
<span class="line"><span style="color:#B392F0;">^</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到第一个非空白字符</span></span>
<span class="line"><span style="color:#B392F0;">w</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到下一个单词开头</span></span>
<span class="line"><span style="color:#B392F0;">b</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到上一个单词开头</span></span>
<span class="line"><span style="color:#B392F0;">e</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到当前/下一个单词末尾</span></span>
<span class="line"><span style="color:#B392F0;">gg</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 移动到文件首行</span></span>
<span class="line"><span style="color:#B392F0;">G</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到文件末行</span></span>
<span class="line"><span style="color:#B392F0;">:n</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 移动到第n行</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+f</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 向前翻页</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+b</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 向后翻页</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+d</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 向下翻半页</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+u</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 向上翻半页</span></span>
<span class="line"><span style="color:#B392F0;">H</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到屏幕顶部</span></span>
<span class="line"><span style="color:#B392F0;">M</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到屏幕中间</span></span>
<span class="line"><span style="color:#B392F0;">L</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 移动到屏幕底部</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 编辑命令</span></span>
<span class="line"><span style="color:#B392F0;">x</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 删除当前字符</span></span>
<span class="line"><span style="color:#B392F0;">dw</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 删除当前单词</span></span>
<span class="line"><span style="color:#B392F0;">dd</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 删除当前行</span></span>
<span class="line"><span style="color:#B392F0;">D</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 删除到行尾</span></span>
<span class="line"><span style="color:#B392F0;">d$</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 删除到行尾(同D)</span></span>
<span class="line"><span style="color:#B392F0;">d0</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 删除到行首</span></span>
<span class="line"><span style="color:#B392F0;">dG</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 删除到文件末尾</span></span>
<span class="line"><span style="color:#B392F0;">u</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 撤销</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+r</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 重做</span></span>
<span class="line"><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 重复上一个命令</span></span>
<span class="line"><span style="color:#B392F0;">yy</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 复制当前行</span></span>
<span class="line"><span style="color:#B392F0;">yw</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 复制当前单词</span></span>
<span class="line"><span style="color:#B392F0;">p</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 粘贴(在光标后)</span></span>
<span class="line"><span style="color:#B392F0;">P</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 粘贴(在光标前)</span></span>
<span class="line"><span style="color:#B392F0;">r</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 替换单个字符</span></span>
<span class="line"><span style="color:#B392F0;">R</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 进入替换模式</span></span>
<span class="line"><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 切换大小写</span></span>
<span class="line"><span style="color:#B392F0;">J</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 合并下一行</span></span>
<span class="line"><span style="color:#B392F0;">:g/pattern/d</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 删除所有匹配pattern的行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 搜索与替换</span></span>
<span class="line"><span style="color:#B392F0;">/pattern</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 向前搜索</span></span>
<span class="line"><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">pattern  </span><span style="color:#6A737D;"># 向后搜索</span></span>
<span class="line"><span style="color:#B392F0;">n</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 下一个匹配</span></span>
<span class="line"><span style="color:#B392F0;">N</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 上一个匹配</span></span>
<span class="line"><span style="color:#B392F0;">:s/old/new/</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 替换当前行第一个匹配</span></span>
<span class="line"><span style="color:#B392F0;">:s/old/new/g</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 替换当前行所有匹配</span></span>
<span class="line"><span style="color:#79B8FF;">:</span><span style="color:#B392F0;">%s/old/new/g</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 全文件替换</span></span>
<span class="line"><span style="color:#79B8FF;">:</span><span style="color:#B392F0;">%s/old/new/gc</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 全文件替换(确认每个)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 保存与退出</span></span>
<span class="line"><span style="color:#B392F0;">:w</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 保存</span></span>
<span class="line"><span style="color:#B392F0;">:q</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 退出(无修改)</span></span>
<span class="line"><span style="color:#B392F0;">:q!</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 强制退出(丢弃修改)</span></span>
<span class="line"><span style="color:#B392F0;">:wq</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 保存并退出</span></span>
<span class="line"><span style="color:#B392F0;">:x</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 保存并退出(同:wq)</span></span>
<span class="line"><span style="color:#B392F0;">ZZ</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 保存并退出(命令模式)</span></span>
<span class="line"><span style="color:#B392F0;">:e!</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 放弃修改, 重新加载文件</span></span>
<span class="line"><span style="color:#B392F0;">:w</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">newfile</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 保存到新文件</span></span>
<span class="line"><span style="color:#B392F0;">:r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 读入文件内容到当前光标位置</span></span>
<span class="line"><span style="color:#B392F0;">:r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">!command</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 读入命令输出到当前光标位置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 可视模式</span></span>
<span class="line"><span style="color:#B392F0;">v</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 字符可视模式</span></span>
<span class="line"><span style="color:#B392F0;">V</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 行可视模式</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+v</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 块可视模式</span></span>
<span class="line"><span style="color:#B392F0;">y</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 复制选中内容</span></span>
<span class="line"><span style="color:#B392F0;">d</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 删除选中内容</span></span>
<span class="line"><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 增加缩进</span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 减少缩进</span></span>
<span class="line"><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 对选中行执行命令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">number</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 显示行号</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nonumber</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 隐藏行号</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">autoindent</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 自动缩进</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">noautoindent</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 取消自动缩进</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tabstop=</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 设置tab宽度为4</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ruler</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 显示光标位置</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hlsearch</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 高亮搜索结果</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nohlsearch</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 取消高亮</span></span>
<span class="line"><span style="color:#B392F0;">:</span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">syntax=on</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 启用语法高亮</span></span>
<span class="line"><span style="color:#B392F0;">:syntax</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">off</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 禁用语法高亮</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br></div></div><h3 id="_2-nano-编辑器-更简单" tabindex="-1">2. nano 编辑器 (更简单) <a class="header-anchor" href="#_2-nano-编辑器-更简单" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 启动nano</span></span>
<span class="line"><span style="color:#B392F0;">nano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filename</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 常用快捷键(屏幕底部显示)</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+G</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 帮助</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+O</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 保存</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+R</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 读入文件</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+Y</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 向上翻页</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+V</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 向下翻页</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+K</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 剪切当前行</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+U</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 粘贴</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+X</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 退出</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+W</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 搜索</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+\</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 替换</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+C</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 显示光标位置</span></span>
<span class="line"><span style="color:#B392F0;">Alt+6</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 复制当前行</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+A</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 移动到行首</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+E</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 移动到行尾</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+_</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 跳转到指定行</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="七、进程管理" tabindex="-1">七、进程管理 <a class="header-anchor" href="#七、进程管理" aria-hidden="true">#</a></h2><h3 id="_1-进程查看命令" tabindex="-1">1. 进程查看命令 <a class="header-anchor" href="#_1-进程查看命令" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># ps: 进程状态快照</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;">                            </span><span style="color:#6A737D;"># 当前终端进程</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">aux</span><span style="color:#E1E4E8;">                        </span><span style="color:#6A737D;"># BSD格式, 所有进程</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ef</span><span style="color:#E1E4E8;">                        </span><span style="color:#6A737D;"># System V格式, 所有进程</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 特定用户进程</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID1,PID2</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 特定进程ID</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--forest</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 以树状显示用户进程</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pid,uname,cmd</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 自定义输出列</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># top: 实时进程监控</span></span>
<span class="line"><span style="color:#B392F0;">top</span><span style="color:#E1E4E8;">                           </span><span style="color:#6A737D;"># 交互式监控</span></span>
<span class="line"><span style="color:#6A737D;"># 在top中:</span></span>
<span class="line"><span style="color:#6A737D;">#  P      按CPU使用排序</span></span>
<span class="line"><span style="color:#6A737D;">#  M      按内存使用排序</span></span>
<span class="line"><span style="color:#6A737D;">#  T      按时间排序</span></span>
<span class="line"><span style="color:#6A737D;">#  k      杀死进程(输入PID和信号)</span></span>
<span class="line"><span style="color:#6A737D;">#  r      调整进程优先级</span></span>
<span class="line"><span style="color:#6A737D;">#  u      显示特定用户进程</span></span>
<span class="line"><span style="color:#6A737D;">#  q      退出</span></span>
<span class="line"><span style="color:#6A737D;">#  h      帮助</span></span>
<span class="line"><span style="color:#B392F0;">top</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 设置刷新间隔(2秒)</span></span>
<span class="line"><span style="color:#B392F0;">top</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID1,PID2</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 监控特定进程</span></span>
<span class="line"><span style="color:#B392F0;">top</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 显示特定用户进程</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># htop: 增强版top (需安装)</span></span>
<span class="line"><span style="color:#B392F0;">htop</span><span style="color:#E1E4E8;">                          </span><span style="color:#6A737D;"># 交互式彩色进程查看器</span></span>
<span class="line"><span style="color:#6A737D;"># 在htop中:</span></span>
<span class="line"><span style="color:#6A737D;">#  F6     选择排序方式</span></span>
<span class="line"><span style="color:#6A737D;">#  F4     过滤进程</span></span>
<span class="line"><span style="color:#6A737D;">#  F5     树状视图</span></span>
<span class="line"><span style="color:#6A737D;">#  F9     杀死进程</span></span>
<span class="line"><span style="color:#6A737D;">#  F2     设置</span></span>
<span class="line"><span style="color:#6A737D;">#  Space  标记/取消标记进程</span></span>
<span class="line"><span style="color:#6A737D;">#  U      标记/取消标记特定用户进程</span></span>
<span class="line"><span style="color:#6A737D;">#  H      显示/隐藏用户线程</span></span>
<span class="line"><span style="color:#6A737D;">#  Ctrl+Z 将标记进程置于后台</span></span>
<span class="line"><span style="color:#6A737D;">#  s      跟踪进程系统调用</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># pstree: 进程树</span></span>
<span class="line"><span style="color:#B392F0;">pstree</span><span style="color:#E1E4E8;">                        </span><span style="color:#6A737D;"># 显示进程树</span></span>
<span class="line"><span style="color:#B392F0;">pstree</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 显示PID</span></span>
<span class="line"><span style="color:#B392F0;">pstree</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 显示用户</span></span>
<span class="line"><span style="color:#B392F0;">pstree</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 显示命令行参数</span></span>
<span class="line"><span style="color:#B392F0;">pstree</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 特定用户进程树</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># pgrep/pkill: 按名称查找/杀死进程</span></span>
<span class="line"><span style="color:#B392F0;">pgrep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">process_name</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 按名称查找进程ID</span></span>
<span class="line"><span style="color:#B392F0;">pgrep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 查找特定用户进程</span></span>
<span class="line"><span style="color:#B392F0;">pgrep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">process_name</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 显示进程名称和ID</span></span>
<span class="line"><span style="color:#B392F0;">pkill</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">process_name</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 按名称杀死进程</span></span>
<span class="line"><span style="color:#B392F0;">pkill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-9</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">process_name</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 强制杀死</span></span>
<span class="line"><span style="color:#B392F0;">pkill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 杀死特定用户所有进程</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="_2-进程控制命令" tabindex="-1">2. 进程控制命令 <a class="header-anchor" href="#_2-进程控制命令" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># kill: 发送信号</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 发送TERM信号(15)</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-9</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID</span><span style="color:#E1E4E8;">                   </span><span style="color:#6A737D;"># 发送KILL信号(9)</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-HUP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 发送HUP信号(1, 通常用于重新加载配置)</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-TERM</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 发送TERM信号(15, 默认)</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-INT</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 发送INT信号(2, 同Ctrl+C)</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-STOP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 暂停进程</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-CONT</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 继续暂停的进程</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;">                       </span><span style="color:#6A737D;"># 列出所有信号</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># nice/renice: 调整进程优先级</span></span>
<span class="line"><span style="color:#B392F0;">nice</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 以优先级10启动命令(范围-20到19)</span></span>
<span class="line"><span style="color:#B392F0;">nice</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 默认优先级10</span></span>
<span class="line"><span style="color:#B392F0;">renice</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 修改运行中进程的优先级</span></span>
<span class="line"><span style="color:#B392F0;">renice</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-5</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 修改用户所有进程优先级</span></span>
<span class="line"><span style="color:#B392F0;">renice</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-g</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">groupid</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 修改组所有进程优先级</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># nohup: 忽略挂断信号</span></span>
<span class="line"><span style="color:#B392F0;">nohup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;"> &amp;               </span><span style="color:#6A737D;"># 在后台运行, 忽略挂断信号</span></span>
<span class="line"><span style="color:#B392F0;">nohup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">output.log</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">2&gt;&amp;1</span><span style="color:#E1E4E8;"> &amp;  </span><span style="color:#6A737D;"># 重定向输出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># time: 测量命令执行时间</span></span>
<span class="line"><span style="color:#F97583;">time</span><span style="color:#E1E4E8;"> command                  </span><span style="color:#6A737D;"># 显示真实/用户/系统时间</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># watch: 重复执行命令</span></span>
<span class="line"><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 每2秒执行一次</span></span>
<span class="line"><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 每5秒执行一次</span></span>
<span class="line"><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 高亮显示变化</span></span>
<span class="line"><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;ps aux | grep httpd&#39;</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 监控特定进程</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_3-作业控制" tabindex="-1">3. 作业控制 <a class="header-anchor" href="#_3-作业控制" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 后台/前台控制</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> &amp;                     </span><span style="color:#6A737D;"># 在后台运行命令</span></span>
<span class="line"><span style="color:#79B8FF;">jobs</span><span style="color:#E1E4E8;">                          </span><span style="color:#6A737D;"># 列出后台作业</span></span>
<span class="line"><span style="color:#79B8FF;">jobs</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;">                       </span><span style="color:#6A737D;"># 列出作业详细信息</span></span>
<span class="line"><span style="color:#79B8FF;">fg</span><span style="color:#E1E4E8;"> %job_id                    </span><span style="color:#6A737D;"># 将作业转到前台</span></span>
<span class="line"><span style="color:#79B8FF;">bg</span><span style="color:#E1E4E8;"> %job_id                    </span><span style="color:#6A737D;"># 继续后台运行暂停的作业</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+z</span><span style="color:#E1E4E8;">                        </span><span style="color:#6A737D;"># 暂停当前作业</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+c</span><span style="color:#E1E4E8;">                        </span><span style="color:#6A737D;"># 终止当前作业</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> %job_id                  </span><span style="color:#6A737D;"># 杀死作业</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> %1                       </span><span style="color:#6A737D;"># 杀死第一个作业</span></span>
<span class="line"><span style="color:#79B8FF;">kill</span><span style="color:#E1E4E8;"> %%                       </span><span style="color:#6A737D;"># 杀死当前作业</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># disown: 从shell作业表中移除</span></span>
<span class="line"><span style="color:#79B8FF;">disown</span><span style="color:#E1E4E8;"> %job_id                </span><span style="color:#6A737D;"># 移除作业(防止shell退出时终止)</span></span>
<span class="line"><span style="color:#79B8FF;">disown</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 移除所有作业</span></span>
<span class="line"><span style="color:#79B8FF;">disown</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> %job_id             </span><span style="color:#6A737D;"># 标记作业不接收SIGHUP(不移除)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="八、shell环境与变量" tabindex="-1">八、Shell环境与变量 <a class="header-anchor" href="#八、shell环境与变量" aria-hidden="true">#</a></h2><h3 id="_1-环境变量" tabindex="-1">1. 环境变量 <a class="header-anchor" href="#_1-环境变量" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 查看环境变量</span></span>
<span class="line"><span style="color:#B392F0;">env</span><span style="color:#E1E4E8;">                           </span><span style="color:#6A737D;"># 显示所有环境变量</span></span>
<span class="line"><span style="color:#B392F0;">printenv</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 同env</span></span>
<span class="line"><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;">                           </span><span style="color:#6A737D;"># 显示所有shell变量(含环境变量)</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> $PATH                    </span><span style="color:#6A737D;"># 显示特定变量</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;">                        </span><span style="color:#6A737D;"># 显示导出的变量</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 常见环境变量</span></span>
<span class="line"><span style="color:#B392F0;">PATH</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 命令搜索路径</span></span>
<span class="line"><span style="color:#B392F0;">HOME</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 用户主目录</span></span>
<span class="line"><span style="color:#B392F0;">USER</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 当前用户名</span></span>
<span class="line"><span style="color:#B392F0;">SHELL</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 当前shell</span></span>
<span class="line"><span style="color:#B392F0;">TERM</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 终端类型</span></span>
<span class="line"><span style="color:#B392F0;">PWD</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 当前工作目录</span></span>
<span class="line"><span style="color:#B392F0;">OLDPWD</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 上一个工作目录</span></span>
<span class="line"><span style="color:#B392F0;">PS1</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 主提示符</span></span>
<span class="line"><span style="color:#B392F0;">PS2</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 次提示符</span></span>
<span class="line"><span style="color:#B392F0;">HISTSIZE</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 历史命令数量</span></span>
<span class="line"><span style="color:#B392F0;">HISTFILE</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 历史文件位置</span></span>
<span class="line"><span style="color:#B392F0;">HISTFILESIZE</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 历史文件大小</span></span>
<span class="line"><span style="color:#B392F0;">LANG</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 语言环境</span></span>
<span class="line"><span style="color:#B392F0;">MAIL</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 邮件位置</span></span>
<span class="line"><span style="color:#B392F0;">TMPDIR</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 临时目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置环境变量</span></span>
<span class="line"><span style="color:#E1E4E8;">VAR</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">value</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 设置shell变量</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> VAR</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">value</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 设置环境变量</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> VAR                    </span><span style="color:#6A737D;"># 将现有变量导出为环境变量</span></span>
<span class="line"><span style="color:#79B8FF;">unset</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VAR</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 删除变量</span></span>
<span class="line"><span style="color:#F97583;">readonly</span><span style="color:#E1E4E8;"> VAR                  </span><span style="color:#6A737D;"># 设置为只读变量</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置文件</span></span>
<span class="line"><span style="color:#6A737D;"># 系统级:</span></span>
<span class="line"><span style="color:#B392F0;">/etc/profile</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 系统范围bash启动脚本</span></span>
<span class="line"><span style="color:#B392F0;">/etc/bashrc</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 系统范围bash配置</span></span>
<span class="line"><span style="color:#B392F0;">/etc/environment</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 系统环境变量</span></span>
<span class="line"><span style="color:#6A737D;"># 用户级:</span></span>
<span class="line"><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">/.bash_profile              </span><span style="color:#6A737D;"># 用户bash登录脚本</span></span>
<span class="line"><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">/.bashrc                    </span><span style="color:#6A737D;"># 用户bash配置</span></span>
<span class="line"><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">/.bash_logout               </span><span style="color:#6A737D;"># 用户bash登出脚本</span></span>
<span class="line"><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">/.profile                   </span><span style="color:#6A737D;"># 通用用户配置</span></span>
<span class="line"><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">/.inputrc                   </span><span style="color:#6A737D;"># readline配置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 立即应用配置</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bashrc</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 应用当前shell</span></span>
<span class="line"><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bashrc</span><span style="color:#E1E4E8;">                   </span><span style="color:#6A737D;"># 同source</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="_2-shell通配符与扩展" tabindex="-1">2. Shell通配符与扩展 <a class="header-anchor" href="#_2-shell通配符与扩展" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 通配符</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 匹配任意字符(0或多个)</span></span>
<span class="line"><span style="color:#F97583;">?</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 匹配单个字符</span></span>
<span class="line"><span style="color:#E1E4E8;">[abc]     </span><span style="color:#6A737D;"># 匹配a、b或c</span></span>
<span class="line"><span style="color:#E1E4E8;">[a-z]     </span><span style="color:#6A737D;"># 匹配范围</span></span>
<span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">abc]    </span><span style="color:#6A737D;"># 不匹配a、b或c</span></span>
<span class="line"><span style="color:#E1E4E8;">[[:alpha:]] </span><span style="color:#6A737D;"># 匹配字母</span></span>
<span class="line"><span style="color:#E1E4E8;">[[:digit:]] </span><span style="color:#6A737D;"># 匹配数字</span></span>
<span class="line"><span style="color:#E1E4E8;">[[:alnum:]] </span><span style="color:#6A737D;"># 匹配字母数字</span></span>
<span class="line"><span style="color:#E1E4E8;">[[:space:]] </span><span style="color:#6A737D;"># 匹配空白</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span><span style="color:#B392F0;">a,b,c</span><span style="color:#E1E4E8;">}   </span><span style="color:#6A737D;"># 扩展为a b c</span></span>
<span class="line"><span style="color:#E1E4E8;">{1..5}    </span><span style="color:#6A737D;"># 扩展为1 2 3 4 5</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span><span style="color:#B392F0;">a..e</span><span style="color:#E1E4E8;">}    </span><span style="color:#6A737D;"># 扩展为a b c d e</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 示例</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">.txt</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 所有.txt文件</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file?.log</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># file1.log, fileA.log等</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> [abc]</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 以a、b或c开头的文件</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> [</span><span style="color:#F97583;">!</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">-</span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">]</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 不以数字开头的文件</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{file1,file2}.txt</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># file1.txt file2.txt</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">img{1..10}.jpg</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># img1.jpg img2.jpg ... img10.jpg</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">[[:upper:]]</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 交互式删除包含大写字母的文件</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_3-i-o重定向与管道" tabindex="-1">3. I/O重定向与管道 <a class="header-anchor" href="#_3-i-o重定向与管道" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 标准文件描述符</span></span>
<span class="line"><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 标准输入(stdin)</span></span>
<span class="line"><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 标准输出(stdout)</span></span>
<span class="line"><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 标准错误(stderr)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 重定向</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 标准输出重定向(覆盖)</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 标准输出追加</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 标准输入重定向</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">2&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 标准错误重定向</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">2&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 标准错误追加</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> &amp;</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> file           </span><span style="color:#6A737D;"># 所有输出重定向</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">2&gt;&amp;1</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 标准输出和标准错误都重定向到file</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">input.txt</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">output.txt</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">2&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">error.log</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 同时重定向所有</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 管道</span></span>
<span class="line"><span style="color:#B392F0;">command1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">command2</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 将command1的输出作为command2的输入</span></span>
<span class="line"><span style="color:#B392F0;">command1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">command2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">command3</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 多级管道</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;.txt&quot;</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 列出.txt文件</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">aux</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">httpd</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 查找httpd进程</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sort</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">uniq</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 排序并去重</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tee</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filelist.txt</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 同时输出到屏幕和文件</span></span>
<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">tee</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filelist.txt</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;.txt&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 多级管道与tee</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 命令替换</span></span>
<span class="line"><span style="color:#9ECBFF;">$(</span><span style="color:#79B8FF;">command</span><span style="color:#9ECBFF;">)</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 执行命令并将输出作为参数</span></span>
<span class="line"><span style="color:#9ECBFF;">`</span><span style="color:#79B8FF;">command</span><span style="color:#9ECBFF;">`</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 旧式命令替换(反引号)</span></span>
<span class="line"><span style="color:#E1E4E8;">files</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">$(</span><span style="color:#B392F0;">ls</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">.txt)</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 将命令输出赋值给变量</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Today is $(</span><span style="color:#B392F0;">date</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 在字符串中使用命令替换</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Total</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">files:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">$(</span><span style="color:#B392F0;">ls</span><span style="color:#9ECBFF;"> </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;"> </span><span style="color:#B392F0;">wc</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#9ECBFF;">)</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 统计文件数</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="九、正则表达式与文本处理" tabindex="-1">九、正则表达式与文本处理 <a class="header-anchor" href="#九、正则表达式与文本处理" aria-hidden="true">#</a></h2><h3 id="_1-基本正则表达式-bre" tabindex="-1">1. 基本正则表达式 (BRE) <a class="header-anchor" href="#_1-基本正则表达式-bre" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">普通字符:  匹配自身</span></span>
<span class="line"><span style="color:#e1e4e8;">特殊字符: . ^ $ * [ ] \ (需要转义)</span></span>
<span class="line"><span style="color:#e1e4e8;">.         # 任意单个字符</span></span>
<span class="line"><span style="color:#e1e4e8;">^         # 行首</span></span>
<span class="line"><span style="color:#e1e4e8;">$         # 行尾</span></span>
<span class="line"><span style="color:#e1e4e8;">*         # 前一字符0次或多次</span></span>
<span class="line"><span style="color:#e1e4e8;">[abc]     # 匹配a、b或c</span></span>
<span class="line"><span style="color:#e1e4e8;">[^abc]    # 不匹配a、b或c</span></span>
<span class="line"><span style="color:#e1e4e8;">[a-z]     # 匹配范围</span></span>
<span class="line"><span style="color:#e1e4e8;">\{n\}     # 精确匹配n次</span></span>
<span class="line"><span style="color:#e1e4e8;">\{n,\}    # 至少匹配n次</span></span>
<span class="line"><span style="color:#e1e4e8;">\{n,m\}   # 匹配n到m次</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_2-扩展正则表达式-ere" tabindex="-1">2. 扩展正则表达式 (ERE) <a class="header-anchor" href="#_2-扩展正则表达式-ere" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">所有BRE特性外加:</span></span>
<span class="line"><span style="color:#e1e4e8;">+         # 前一字符1次或多次</span></span>
<span class="line"><span style="color:#e1e4e8;">?         # 前一字符0次或1次</span></span>
<span class="line"><span style="color:#e1e4e8;">|         # 或</span></span>
<span class="line"><span style="color:#e1e4e8;">()        # 分组</span></span>
<span class="line"><span style="color:#e1e4e8;">{n}       # 精确匹配n次 (无需转义)</span></span>
<span class="line"><span style="color:#e1e4e8;">{n,}      # 至少匹配n次 (无需转义)</span></span>
<span class="line"><span style="color:#e1e4e8;">{n,m}     # 匹配n到m次 (无需转义)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_3-grep-命令详解" tabindex="-1">3. grep 命令详解 <a class="header-anchor" href="#_3-grep-命令详解" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 基本用法</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 搜索文件</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 搜索多个文件</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">.txt</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 搜索所有.txt文件</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 通过管道搜索</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 选项</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 忽略大小写</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 反向选择(不匹配)</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 显示行号</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 仅显示匹配文件名</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 统计匹配行数</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;word&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 匹配完整单词</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;line&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 匹配整行</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir/</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 递归搜索目录</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 显示匹配行及后2行</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-B</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 显示匹配行及前2行</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-C</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 显示匹配行及前后各2行</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--color</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 彩色高亮匹配</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 正则表达式</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;^[A-Z]&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 行首为大写字母</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;[0-9]$&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 行尾为数字</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;^$&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 空行</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;th.*s&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 以th开头, s结尾</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;th\{2,\}s&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 至少两个h (BRE)</span></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-E</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;th{2,}s&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 至少两个h (ERE)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># egrep/fgrep</span></span>
<span class="line"><span style="color:#B392F0;">egrep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pattern1|pattern2&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 等同于grep -E</span></span>
<span class="line"><span style="color:#B392F0;">fgrep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;string&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 快速搜索固定字符串(不使用正则)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="_4-sed-流编辑器" tabindex="-1">4. sed 流编辑器 <a class="header-anchor" href="#_4-sed-流编辑器" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 基本语法</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> [options] </span><span style="color:#9ECBFF;">&#39;command&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">s</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;"># 命令格式: [address]command[options]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 替换命令(s)</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/old/new/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 替换每行第一个匹配</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/old/new/g&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 替换所有匹配</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/old/new/2&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 替换每行第二个匹配</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/old/new/gi&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 不区分大小写替换</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;3s/old/new/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 仅第3行替换</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;1,5s/old/new/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 1-5行替换</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/pattern/s/old/new/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 匹配pattern的行替换</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 地址范围</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;5d&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 删除第5行</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;1,5d&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 删除1-5行</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;5,$d&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 删除第5行到末尾</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/pattern/d&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 删除匹配pattern的行</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/start/,/end/d&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 删除start到end之间的行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 其他命令</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;p&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 打印每行两次(默认打印+命令p)</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;p&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 仅打印(禁用默认打印)</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;=&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 显示行号</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;a\text&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 在行后追加文本</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;i\text&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 在行前插入文本</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;c\text&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 替换整行为文本</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;y/abc/ABC/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 字符转换(a-&gt;A,b-&gt;B,c-&gt;C)</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/old/&amp; new/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># &amp;表示匹配内容</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 多命令</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;command1&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;command2&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">script.sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 从文件读取命令</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;1h;2,$H;$g&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 将整个文件加载到模式空间</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改文件</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/old/new/g&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 直接修改文件</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i.bak</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/old/new/g&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 备份后修改</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/old/new/g&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">.txt</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 批量修改</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_5-awk-文本处理" tabindex="-1">5. awk 文本处理 <a class="header-anchor" href="#_5-awk-文本处理" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 基本语法</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> [options] </span><span style="color:#9ECBFF;">&#39;pattern {action}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">s</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">script.awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">s</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 字段处理</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{print $1}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 打印第1列</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{print $1,$3}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 打印第1和第3列</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{print NF}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 打印每行字段数</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{print $NF}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 打印最后一列</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{print $1}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/passwd</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 指定分隔符为:</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;BEGIN{FS=&quot;:&quot;};{print $1}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/passwd</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 在BEGIN块设置分隔符</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 行处理</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;NR==5 {print}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 打印第5行</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;NR&gt;=5 &amp;&amp; NR&lt;=10 {print}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 打印5-10行</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/pattern/ {print}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 匹配pattern的行</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;$3 &gt; 100 {print}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 第3列大于100的行</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;length($0) &gt; 80 {print}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 行长大于80的行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 变量与计算</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{sum+=$1} END{print sum}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 求和</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{sum+=$1} END{print sum/NR}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 平均值</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{if($1&gt;max) max=$1} END{print max}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 最大值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 内置变量</span></span>
<span class="line"><span style="color:#B392F0;">NR</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 当前行号</span></span>
<span class="line"><span style="color:#B392F0;">NF</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 当前行字段数</span></span>
<span class="line"><span style="color:#B392F0;">FILENAME</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 当前文件名</span></span>
<span class="line"><span style="color:#B392F0;">FS</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 输入字段分隔符(默认空格)</span></span>
<span class="line"><span style="color:#B392F0;">OFS</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 输出字段分隔符(默认空格)</span></span>
<span class="line"><span style="color:#B392F0;">RS</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 输入记录分隔符(默认换行)</span></span>
<span class="line"><span style="color:#B392F0;">ORS</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 输出记录分隔符(默认换行)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 流程控制</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{</span></span>
<span class="line"><span style="color:#9ECBFF;">  if($1 &gt; 10) print &quot;High&quot;;</span></span>
<span class="line"><span style="color:#9ECBFF;">  else if($1 &gt; 5) print &quot;Medium&quot;;</span></span>
<span class="line"><span style="color:#9ECBFF;">  else print &quot;Low&quot;;</span></span>
<span class="line"><span style="color:#9ECBFF;">}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;BEGIN{</span></span>
<span class="line"><span style="color:#9ECBFF;">  for(i=1;i&lt;=10;i++) print i;</span></span>
<span class="line"><span style="color:#9ECBFF;">}&#39;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 循环</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 数组</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{</span></span>
<span class="line"><span style="color:#9ECBFF;">  count[$1]++;  # 统计每种第一列出现次数</span></span>
<span class="line"><span style="color:#9ECBFF;">} END{</span></span>
<span class="line"><span style="color:#9ECBFF;">  for(word in count) print word, count[word];</span></span>
<span class="line"><span style="color:#9ECBFF;">}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 函数</span></span>
<span class="line"><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;BEGIN{</span></span>
<span class="line"><span style="color:#9ECBFF;">  print sin(3.14159/2);  # 三角函数</span></span>
<span class="line"><span style="color:#9ECBFF;">  print sqrt(16);        # 平方根</span></span>
<span class="line"><span style="color:#9ECBFF;">  print rand();          # 随机数</span></span>
<span class="line"><span style="color:#9ECBFF;">}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h2 id="十、网络配置与故障排除" tabindex="-1">十、网络配置与故障排除 <a class="header-anchor" href="#十、网络配置与故障排除" aria-hidden="true">#</a></h2><h3 id="_1-网络信息查看" tabindex="-1">1. 网络信息查看 <a class="header-anchor" href="#_1-网络信息查看" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># ip命令(替代ifconfig)</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">addr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 显示IP地址</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">addr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 显示特定接口</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 显示路由表</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 显示接口状态</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 显示接口统计</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">neigh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 显示ARP缓存</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 网络接口配置(临时)</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">addr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.100/</span><span style="color:#79B8FF;">24</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dev</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">addr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">del</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.100/</span><span style="color:#79B8FF;">24</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dev</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">up</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 启用接口</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">down</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 禁用接口</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">via</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 添加默认网关</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">del</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 删除默认网关</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 永久网络配置</span></span>
<span class="line"><span style="color:#6A737D;"># RHEL/CentOS 7+:</span></span>
<span class="line"><span style="color:#B392F0;">nmcli</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">connection</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># NetworkManager连接</span></span>
<span class="line"><span style="color:#B392F0;">nmcli</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">connection</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">modify</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;connection-name&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipv4.addresses</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.100/</span><span style="color:#79B8FF;">24</span></span>
<span class="line"><span style="color:#B392F0;">nmcli</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">connection</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">modify</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;connection-name&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipv4.gateway</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.1</span></span>
<span class="line"><span style="color:#B392F0;">nmcli</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">connection</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">modify</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;connection-name&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipv4.dns</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;8.8.8.8 8.8.4.4&quot;</span></span>
<span class="line"><span style="color:#B392F0;">nmcli</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">connection</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">modify</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;connection-name&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipv4.method</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">manual</span></span>
<span class="line"><span style="color:#B392F0;">nmcli</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">connection</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">up</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;connection-name&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置文件(RHEL/CentOS):</span></span>
<span class="line"><span style="color:#6A737D;"># /etc/sysconfig/network-scripts/ifcfg-eth0</span></span>
<span class="line"><span style="color:#E1E4E8;">BOOTPROTO</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">static</span></span>
<span class="line"><span style="color:#E1E4E8;">IPADDR</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">192.168.1.100</span></span>
<span class="line"><span style="color:#E1E4E8;">NETMASK</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">255.255.255.0</span></span>
<span class="line"><span style="color:#E1E4E8;">GATEWAY</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">192.168.1.1</span></span>
<span class="line"><span style="color:#E1E4E8;">DNS1</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">8.8.8.8</span></span>
<span class="line"><span style="color:#E1E4E8;">ONBOOT</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置文件(Debian/Ubuntu):</span></span>
<span class="line"><span style="color:#6A737D;"># /etc/network/interfaces</span></span>
<span class="line"><span style="color:#B392F0;">auto</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span></span>
<span class="line"><span style="color:#B392F0;">iface</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">inet</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">static</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">address</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.100</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">netmask</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">255.255.255.0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">gateway</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">dns-nameservers</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">8.8.8.8</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">8.8.4.4</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="_2-网络测试工具" tabindex="-1">2. 网络测试工具 <a class="header-anchor" href="#_2-网络测试工具" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># ping: 测试连通性</span></span>
<span class="line"><span style="color:#B392F0;">ping</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 持续ping</span></span>
<span class="line"><span style="color:#B392F0;">ping</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 发送4个包后停止</span></span>
<span class="line"><span style="color:#B392F0;">ping</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 0.5秒间隔</span></span>
<span class="line"><span style="color:#B392F0;">ping</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 1000字节包</span></span>
<span class="line"><span style="color:#B392F0;">ping</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-W</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 等待2秒超时</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># traceroute: 路径跟踪</span></span>
<span class="line"><span style="color:#B392F0;">traceroute</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># UDP traceroute</span></span>
<span class="line"><span style="color:#B392F0;">traceroute</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-I</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># ICMP traceroute</span></span>
<span class="line"><span style="color:#B392F0;">traceroute</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-T</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># TCP traceroute (端口80)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># mtr: 实时traceroute</span></span>
<span class="line"><span style="color:#B392F0;">mtr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 交互式traceroute</span></span>
<span class="line"><span style="color:#B392F0;">mtr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 生成报告(10个包)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># netstat/ss: 网络统计</span></span>
<span class="line"><span style="color:#B392F0;">netstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tuln</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 显示监听TCP/UDP端口</span></span>
<span class="line"><span style="color:#B392F0;">netstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tulnp</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 显示监听端口及进程</span></span>
<span class="line"><span style="color:#B392F0;">netstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-an</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 显示所有连接</span></span>
<span class="line"><span style="color:#B392F0;">netstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 显示路由表</span></span>
<span class="line"><span style="color:#B392F0;">netstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 显示接口统计</span></span>
<span class="line"><span style="color:#B392F0;">ss</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tuln</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 替代netstat(更快)</span></span>
<span class="line"><span style="color:#B392F0;">ss</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tuln</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">src</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.100</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 源IP过滤</span></span>
<span class="line"><span style="color:#B392F0;">ss</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tuln</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dst</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">192.168.1.1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 目标IP过滤</span></span>
<span class="line"><span style="color:#B392F0;">ss</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">established</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 显示已建立连接</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># dig/nslookup/host: DNS查询</span></span>
<span class="line"><span style="color:#B392F0;">dig</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example.com</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 查询A记录</span></span>
<span class="line"><span style="color:#B392F0;">dig</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example.com</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MX</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 查询MX记录</span></span>
<span class="line"><span style="color:#B392F0;">dig</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@8.8.8.8</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example.com</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 指定DNS服务器</span></span>
<span class="line"><span style="color:#B392F0;">dig</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+short</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example.com</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 简洁输出</span></span>
<span class="line"><span style="color:#B392F0;">nslookup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example.com</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 交互式DNS查询</span></span>
<span class="line"><span style="color:#B392F0;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example.com</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 简单DNS查询</span></span>
<span class="line"><span style="color:#B392F0;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MX</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example.com</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 查询MX记录</span></span>
<span class="line"><span style="color:#B392F0;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example.com</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 查询所有记录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># telnet/nc: 端口测试</span></span>
<span class="line"><span style="color:#B392F0;">telnet</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">port</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># TCP连接测试</span></span>
<span class="line"><span style="color:#B392F0;">nc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-zv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">port</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 端口扫描(Netcat)</span></span>
<span class="line"><span style="color:#B392F0;">nc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8080</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 监听端口</span></span>
<span class="line"><span style="color:#B392F0;">nc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">port</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 发送文件</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="_3-ssh-安全连接" tabindex="-1">3. SSH 安全连接 <a class="header-anchor" href="#_3-ssh-安全连接" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 基本连接</span></span>
<span class="line"><span style="color:#B392F0;">ssh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user@host</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 连接远程主机</span></span>
<span class="line"><span style="color:#B392F0;">ssh</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">port</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user@host</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 指定端口</span></span>
<span class="line"><span style="color:#B392F0;">ssh</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 指定用户名</span></span>
<span class="line"><span style="color:#B392F0;">ssh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 执行单条命令后退出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># SSH密钥管理</span></span>
<span class="line"><span style="color:#B392F0;">ssh-keygen</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rsa</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 生成RSA密钥</span></span>
<span class="line"><span style="color:#B392F0;">ssh-keygen</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ed25519</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 生成Ed25519密钥(推荐)</span></span>
<span class="line"><span style="color:#B392F0;">ssh-keygen</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-b</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4096</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rsa</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 生成4096位RSA密钥</span></span>
<span class="line"><span style="color:#B392F0;">ssh-copy-id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user@host</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 复制公钥到远程主机</span></span>
<span class="line"><span style="color:#B392F0;">ssh-agent</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bash</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 启动ssh-agent</span></span>
<span class="line"><span style="color:#B392F0;">ssh-add</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.ssh/id_rsa</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 添加私钥到agent</span></span>
<span class="line"><span style="color:#B392F0;">ssh-add</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 列出已加载密钥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># SSH配置</span></span>
<span class="line"><span style="color:#6A737D;"># 客户端配置: ~/.ssh/config</span></span>
<span class="line"><span style="color:#B392F0;">Host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">shortname</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">HostName</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">full.hostname.com</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">User</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Port</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2222</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">IdentityFile</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.ssh/id_ed25519</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">ForwardAgent</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 服务端配置: /etc/ssh/sshd_config</span></span>
<span class="line"><span style="color:#B392F0;">Port</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2222</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 修改默认端口</span></span>
<span class="line"><span style="color:#B392F0;">PermitRootLogin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">no</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 禁用root登录</span></span>
<span class="line"><span style="color:#B392F0;">PasswordAuthentication</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">no</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 禁用密码认证</span></span>
<span class="line"><span style="color:#B392F0;">AllowUsers</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user2</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 允许特定用户</span></span>
<span class="line"><span style="color:#B392F0;">DenyUsers</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user3</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 拒绝特定用户</span></span>
<span class="line"><span style="color:#B392F0;">AllowGroups</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ssh-users</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 允许特定组</span></span>
<span class="line"><span style="color:#B392F0;">X11Forwarding</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yes</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 允许X11转发</span></span>
<span class="line"><span style="color:#B392F0;">ClientAliveInterval</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">300</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 保持连接</span></span>
<span class="line"><span style="color:#B392F0;">MaxAuthTries</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 最大认证尝试</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># SSH隧道</span></span>
<span class="line"><span style="color:#6A737D;"># 本地端口转发</span></span>
<span class="line"><span style="color:#B392F0;">ssh</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8080</span><span style="color:#9ECBFF;">:localhost:</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user@host</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 访问本地8080转到远程80</span></span>
<span class="line"><span style="color:#6A737D;"># 远程端口转发</span></span>
<span class="line"><span style="color:#B392F0;">ssh</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8080</span><span style="color:#9ECBFF;">:localhost:</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user@host</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 远程8080转到本地80</span></span>
<span class="line"><span style="color:#6A737D;"># 动态端口转发(SOCKS代理)</span></span>
<span class="line"><span style="color:#B392F0;">ssh</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1080</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user@host</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 创建SOCKS代理</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h2 id="十一、系统管理与维护" tabindex="-1">十一、系统管理与维护 <a class="header-anchor" href="#十一、系统管理与维护" aria-hidden="true">#</a></h2><h3 id="_1-用户与组管理" tabindex="-1">1. 用户与组管理 <a class="header-anchor" href="#_1-用户与组管理" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 用户管理</span></span>
<span class="line"><span style="color:#B392F0;">useradd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 创建用户</span></span>
<span class="line"><span style="color:#B392F0;">useradd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 创建用户并创建家目录</span></span>
<span class="line"><span style="color:#B392F0;">useradd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/bin/bash</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 指定shell</span></span>
<span class="line"><span style="color:#B392F0;">useradd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-G</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group1,group2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 指定附加组</span></span>
<span class="line"><span style="color:#B392F0;">useradd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Comment&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 添加注释</span></span>
<span class="line"><span style="color:#B392F0;">useradd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#9ECBFF;">-</span><span style="color:#79B8FF;">12</span><span style="color:#9ECBFF;">-</span><span style="color:#79B8FF;">31</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 设置账号过期日期</span></span>
<span class="line"><span style="color:#B392F0;">usermod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">newname</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">oldname</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 修改用户名</span></span>
<span class="line"><span style="color:#B392F0;">usermod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/new/home/dir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 修改家目录</span></span>
<span class="line"><span style="color:#B392F0;">usermod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/new/home/dir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 移动家目录</span></span>
<span class="line"><span style="color:#B392F0;">usermod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 锁定账号</span></span>
<span class="line"><span style="color:#B392F0;">usermod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 解锁账号</span></span>
<span class="line"><span style="color:#B392F0;">usermod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-aG</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 添加用户到组(不移除现有组)</span></span>
<span class="line"><span style="color:#B392F0;">userdel</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 删除用户(保留家目录)</span></span>
<span class="line"><span style="color:#B392F0;">userdel</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 删除用户及家目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 密码管理</span></span>
<span class="line"><span style="color:#B392F0;">passwd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 修改密码</span></span>
<span class="line"><span style="color:#B392F0;">passwd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 锁定密码</span></span>
<span class="line"><span style="color:#B392F0;">passwd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 解锁密码</span></span>
<span class="line"><span style="color:#B392F0;">passwd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 强制下次登录修改密码</span></span>
<span class="line"><span style="color:#B392F0;">passwd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-x</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">90</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 设置密码最大有效期90天</span></span>
<span class="line"><span style="color:#B392F0;">passwd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 设置密码最短期限7天</span></span>
<span class="line"><span style="color:#B392F0;">passwd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 设置密码过期前警告14天</span></span>
<span class="line"><span style="color:#B392F0;">chage</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 查看密码过期信息</span></span>
<span class="line"><span style="color:#B392F0;">chage</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-M</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">90</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 设置密码最大有效期90天</span></span>
<span class="line"><span style="color:#B392F0;">chage</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-E</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#9ECBFF;">-</span><span style="color:#79B8FF;">12</span><span style="color:#9ECBFF;">-</span><span style="color:#79B8FF;">31</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 设置账号过期日期</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 组管理</span></span>
<span class="line"><span style="color:#B392F0;">groupadd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">groupname</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 创建组</span></span>
<span class="line"><span style="color:#B392F0;">groupadd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-g</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1001</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">groupname</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 指定GID</span></span>
<span class="line"><span style="color:#B392F0;">groupmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">newname</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">oldname</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 修改组名</span></span>
<span class="line"><span style="color:#B392F0;">groupmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-g</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2000</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">groupname</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 修改GID</span></span>
<span class="line"><span style="color:#B392F0;">groupdel</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">groupname</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 删除组</span></span>
<span class="line"><span style="color:#B392F0;">gpasswd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 将用户添加到组</span></span>
<span class="line"><span style="color:#B392F0;">gpasswd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 从组中移除用户</span></span>
<span class="line"><span style="color:#B392F0;">gpasswd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-M</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user1,user2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 设置组成员列表</span></span>
<span class="line"><span style="color:#B392F0;">gpasswd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 移除组密码</span></span>
<span class="line"><span style="color:#B392F0;">gpasswd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">group</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 限制组访问</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 相关配置文件</span></span>
<span class="line"><span style="color:#B392F0;">/etc/passwd</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 用户账户信息</span></span>
<span class="line"><span style="color:#6A737D;"># 格式: username:x:UID:GID:description:home_directory:shell</span></span>
<span class="line"><span style="color:#B392F0;">/etc/shadow</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 加密的用户密码和期限</span></span>
<span class="line"><span style="color:#6A737D;"># 格式: username:encrypted_password:last_change:min_age:max_age:warn:inactive:expire:</span></span>
<span class="line"><span style="color:#B392F0;">/etc/group</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 组信息</span></span>
<span class="line"><span style="color:#6A737D;"># 格式: groupname:x:GID:user_list</span></span>
<span class="line"><span style="color:#B392F0;">/etc/gshadow</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 组密码和管理员</span></span>
<span class="line"><span style="color:#B392F0;">/etc/login.defs</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 创建用户的默认参数</span></span>
<span class="line"><span style="color:#B392F0;">/etc/default/useradd</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># useradd的默认参数</span></span>
<span class="line"><span style="color:#B392F0;">/etc/skel</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 新用户家目录的模板</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h3 id="_2-磁盘管理与文件系统" tabindex="-1">2. 磁盘管理与文件系统 <a class="header-anchor" href="#_2-磁盘管理与文件系统" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 磁盘分区</span></span>
<span class="line"><span style="color:#B392F0;">fdisk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 列出所有磁盘</span></span>
<span class="line"><span style="color:#B392F0;">fdisk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 分区工具</span></span>
<span class="line"><span style="color:#6A737D;"># fdisk命令:</span></span>
<span class="line"><span style="color:#6A737D;">#   p  显示分区表</span></span>
<span class="line"><span style="color:#6A737D;">#   n  新建分区</span></span>
<span class="line"><span style="color:#6A737D;">#   d  删除分区</span></span>
<span class="line"><span style="color:#6A737D;">#   t  修改分区类型</span></span>
<span class="line"><span style="color:#6A737D;">#   w  保存更改</span></span>
<span class="line"><span style="color:#6A737D;">#   q  不保存退出</span></span>
<span class="line"><span style="color:#B392F0;">parted</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 高级分区工具</span></span>
<span class="line"><span style="color:#B392F0;">parted</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">print</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 显示分区</span></span>
<span class="line"><span style="color:#B392F0;">parted</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mklabel</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gpt</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 创建GPT分区表</span></span>
<span class="line"><span style="color:#B392F0;">parted</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mkpart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">primary</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ext4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">1MB</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">10GB</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 创建分区</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 文件系统创建</span></span>
<span class="line"><span style="color:#B392F0;">mkfs.ext4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 创建ext4文件系统</span></span>
<span class="line"><span style="color:#B392F0;">mkfs.xfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 创建XFS文件系统</span></span>
<span class="line"><span style="color:#B392F0;">mkfs.vfat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 创建FAT32文件系统</span></span>
<span class="line"><span style="color:#B392F0;">mkswap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb2</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 创建swap分区</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 文件系统检查与修复</span></span>
<span class="line"><span style="color:#B392F0;">fsck</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 检查文件系统</span></span>
<span class="line"><span style="color:#B392F0;">fsck</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 自动修复</span></span>
<span class="line"><span style="color:#B392F0;">fsck.ext4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 强制检查ext4</span></span>
<span class="line"><span style="color:#B392F0;">xfs_repair</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 修复XFS</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 挂载与卸载</span></span>
<span class="line"><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 挂载分区</span></span>
<span class="line"><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ext4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 指定文件系统类型</span></span>
<span class="line"><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ro</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 只读挂载</span></span>
<span class="line"><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remount,rw</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 重新挂载为读写</span></span>
<span class="line"><span style="color:#B392F0;">umount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 卸载挂载点</span></span>
<span class="line"><span style="color:#B392F0;">umount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 卸载设备</span></span>
<span class="line"><span style="color:#B392F0;">lsof</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+f</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 查找使用挂载点的进程</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /etc/fstab: 开机自动挂载</span></span>
<span class="line"><span style="color:#6A737D;"># 格式: 设备 挂载点 文件系统类型 选项 备份 检查顺序</span></span>
<span class="line"><span style="color:#B392F0;">/dev/sda1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ext4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">defaults</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#B392F0;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">defaults</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">UUID</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">xxxx-xxxx</span><span style="color:#E1E4E8;"> /data ext4 defaults </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">LABEL</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">backup</span><span style="color:#E1E4E8;"> /backup ext4 defaults </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#6A737D;"># 常用选项:</span></span>
<span class="line"><span style="color:#6A737D;">#   defaults  rw, suid, dev, exec, auto, nouser, async</span></span>
<span class="line"><span style="color:#6A737D;">#   noatime   不更新访问时间</span></span>
<span class="line"><span style="color:#6A737D;">#   nodiratime 不更新目录访问时间</span></span>
<span class="line"><span style="color:#6A737D;">#   relatime  优化访问时间更新</span></span>
<span class="line"><span style="color:#6A737D;">#   nofail    设备不存在时不报错</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="_3-lvm-逻辑卷管理" tabindex="-1">3. LVM (逻辑卷管理) <a class="header-anchor" href="#_3-lvm-逻辑卷管理" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># PV (物理卷)管理</span></span>
<span class="line"><span style="color:#B392F0;">pvcreate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 创建物理卷</span></span>
<span class="line"><span style="color:#B392F0;">pvcreate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdc1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 创建多个物理卷</span></span>
<span class="line"><span style="color:#B392F0;">pvdisplay</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 显示物理卷信息</span></span>
<span class="line"><span style="color:#B392F0;">pvscan</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 扫描系统中的物理卷</span></span>
<span class="line"><span style="color:#B392F0;">pvremove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 移除物理卷</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># VG (卷组)管理</span></span>
<span class="line"><span style="color:#B392F0;">vgcreate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdc1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 创建卷组</span></span>
<span class="line"><span style="color:#B392F0;">vgcreate</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">32M</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 指定PE大小32MB</span></span>
<span class="line"><span style="color:#B392F0;">vgdisplay</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 显示卷组信息</span></span>
<span class="line"><span style="color:#B392F0;">vgscan</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 扫描系统中的卷组</span></span>
<span class="line"><span style="color:#B392F0;">vgextend</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdd1</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 扩展卷组</span></span>
<span class="line"><span style="color:#B392F0;">vgreduce</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 从卷组移除物理卷</span></span>
<span class="line"><span style="color:#B392F0;">vgchange</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ay</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 激活卷组</span></span>
<span class="line"><span style="color:#B392F0;">vgchange</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-an</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 停用卷组</span></span>
<span class="line"><span style="color:#B392F0;">vgremove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 删除卷组</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># LV (逻辑卷)管理</span></span>
<span class="line"><span style="color:#B392F0;">lvcreate</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">10G</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lv_data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 创建10GB逻辑卷</span></span>
<span class="line"><span style="color:#B392F0;">lvcreate</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">%FREE</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lv_backup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">vg_data</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 使用所有剩余空间</span></span>
<span class="line"><span style="color:#B392F0;">lvdisplay</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 显示逻辑卷信息</span></span>
<span class="line"><span style="color:#B392F0;">lvscan</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 扫描系统中的逻辑卷</span></span>
<span class="line"><span style="color:#B392F0;">lvextend</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+5G</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vg_data/lv_data</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 扩展5GB</span></span>
<span class="line"><span style="color:#B392F0;">lvextend</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+</span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">%FREE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vg_data/lv_data</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 使用所有剩余空间</span></span>
<span class="line"><span style="color:#B392F0;">lvreduce</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-2G</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vg_data/lv_data</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 减少2GB(危险!)</span></span>
<span class="line"><span style="color:#B392F0;">lvremove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vg_data/lv_data</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 删除逻辑卷</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 调整文件系统</span></span>
<span class="line"><span style="color:#6A737D;"># ext2/ext3/ext4</span></span>
<span class="line"><span style="color:#B392F0;">resize2fs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vg_data/lv_data</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 调整文件系统大小</span></span>
<span class="line"><span style="color:#B392F0;">resize2fs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vg_data/lv_data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">20G</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 调整到特定大小</span></span>
<span class="line"><span style="color:#6A737D;"># xfs</span></span>
<span class="line"><span style="color:#B392F0;">xfs_growfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mount/point</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 增大文件系统(只能增大)</span></span>
<span class="line"><span style="color:#6A737D;"># 注意: XFS不支持缩小</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="_4-软件包管理" tabindex="-1">4. 软件包管理 <a class="header-anchor" href="#_4-软件包管理" aria-hidden="true">#</a></h3><h4 id="rhel-centos-fedora-rpm-yum-dnf" tabindex="-1">RHEL/CentOS/Fedora (RPM/YUM/DNF) <a class="header-anchor" href="#rhel-centos-fedora-rpm-yum-dnf" aria-hidden="true">#</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># RPM 基本操作</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ivh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.rpm</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 安装包</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-Uvh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.rpm</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 升级包</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-Fvh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.rpm</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 刷新包(仅升级已安装)</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 卸载包</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-q</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 查询包是否安装</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-qa</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 列出所有已安装包</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-qi</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 显示包信息</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ql</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 列出包文件</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-qd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 列出文档文件</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-qc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 列出配置文件</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-qf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path/to/file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 查询文件所属包</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-q</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--changelog</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 显示变更日志</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-V</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 验证包完整性</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-K</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.rpm</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 验证包签名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># YUM/DNF 操作</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 安装包</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.rpm</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 本地安装或从仓库安装</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localinstall</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.rpm</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 仅本地安装</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 卸载包</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 更新所有包</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 更新特定包</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">check-update</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 检查可用更新</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">keyword</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 搜索包</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">info</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 查看包信息</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">installed</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 列出已安装包</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">available</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 列出可用包</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">provides</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*/filename&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 查找提供文件的包</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clean</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 清理缓存</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repolist</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 列出仓库</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">grouplist</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 列出软件组</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">groupinstall</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;group&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 安装软件组</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">history</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 查看事务历史</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">history</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">undo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ID</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 撤销事务</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># DNF (YUM的下一代)</span></span>
<span class="line"><span style="color:#B392F0;">dnf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 用法类似YUM</span></span>
<span class="line"><span style="color:#B392F0;">dnf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">module</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 列出模块</span></span>
<span class="line"><span style="color:#B392F0;">dnf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">module</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">module</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 启用模块</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h4 id="debian-ubuntu-deb-apt" tabindex="-1">Debian/Ubuntu (DEB/APT) <a class="header-anchor" href="#debian-ubuntu-deb-apt" aria-hidden="true">#</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># APT 基本操作</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 更新软件源</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">upgrade</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 升级已安装包</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">full-upgrade</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 完全升级(可能移除包)</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 安装包</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 卸载包(保留配置)</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">purge</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 卸载包(删除配置)</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">autoremove</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 移除不再需要的依赖</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">keyword</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 搜索包</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 显示包信息</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--installed</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 列出已安装包</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--upgradable</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 列出可升级包</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">policy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 显示包策略</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clean</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 清理下载的包文件</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">autoclean</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 清理过期的包文件</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">edit-sources</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 编辑源列表</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">depends</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 显示依赖</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rdepends</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 显示反向依赖</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># dpkg 低级操作</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package.deb</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 安装包</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 移除包(保留配置)</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-P</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 完全移除包</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 列出已安装包</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;package*&#39;</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 模式匹配</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 显示包状态</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 列出包文件</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-S</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path/to/file</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 查询文件所属包</span></span>
<span class="line"><span style="color:#B392F0;">dpkg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--configure</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 配置未完成的安装</span></span>
<span class="line"><span style="color:#B392F0;">dpkg-reconfigure</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">package</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 重新配置包</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="十二、系统监控与日志" tabindex="-1">十二、系统监控与日志 <a class="header-anchor" href="#十二、系统监控与日志" aria-hidden="true">#</a></h2><h3 id="_1-系统性能监控" tabindex="-1">1. 系统性能监控 <a class="header-anchor" href="#_1-系统性能监控" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 系统负载</span></span>
<span class="line"><span style="color:#B392F0;">uptime</span><span style="color:#E1E4E8;">                    </span><span style="color:#6A737D;"># 显示运行时间和负载平均值</span></span>
<span class="line"><span style="color:#B392F0;">w</span><span style="color:#E1E4E8;">                         </span><span style="color:#6A737D;"># 显示谁在登录和他们在做什么</span></span>
<span class="line"><span style="color:#B392F0;">who</span><span style="color:#E1E4E8;">                       </span><span style="color:#6A737D;"># 显示登录用户</span></span>
<span class="line"><span style="color:#B392F0;">last</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 显示最近登录</span></span>
<span class="line"><span style="color:#B392F0;">free</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;">                   </span><span style="color:#6A737D;"># 显示内存使用(人类可读)</span></span>
<span class="line"><span style="color:#B392F0;">vmstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 虚拟内存统计(1秒间隔)</span></span>
<span class="line"><span style="color:#B392F0;">vmstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 虚拟内存统计详细</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># CPU/进程监控</span></span>
<span class="line"><span style="color:#B392F0;">top</span><span style="color:#E1E4E8;">                       </span><span style="color:#6A737D;"># 交互式进程监控</span></span>
<span class="line"><span style="color:#B392F0;">htop</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 增强版top</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">aux</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--sort=-%cpu</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 按CPU使用排序</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">aux</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--sort=-%mem</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 按内存使用排序</span></span>
<span class="line"><span style="color:#B392F0;">mpstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># CPU使用统计(1秒间隔)</span></span>
<span class="line"><span style="color:#B392F0;">mpstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-P</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ALL</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 每个CPU核心统计</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># I/O监控</span></span>
<span class="line"><span style="color:#B392F0;">iostat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># I/O统计(1秒间隔)</span></span>
<span class="line"><span style="color:#B392F0;">iostat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 扩展统计</span></span>
<span class="line"><span style="color:#B392F0;">iotop</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># I/O监控(类似top)</span></span>
<span class="line"><span style="color:#B392F0;">lsof</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 列出打开的文件</span></span>
<span class="line"><span style="color:#B392F0;">lsof</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 列出使用80端口的进程</span></span>
<span class="line"><span style="color:#B392F0;">lsof</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 列出特定用户打开的文件</span></span>
<span class="line"><span style="color:#B392F0;">lsof</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+D</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 递归列出目录打开的文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 网络监控</span></span>
<span class="line"><span style="color:#B392F0;">netstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tuln</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 显示监听端口</span></span>
<span class="line"><span style="color:#B392F0;">ss</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tuln</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 替代netstat</span></span>
<span class="line"><span style="color:#B392F0;">sar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DEV</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 网络接口统计</span></span>
<span class="line"><span style="color:#B392F0;">nload</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 网络流量监控</span></span>
<span class="line"><span style="color:#B392F0;">iftop</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 网络连接带宽监控</span></span>
<span class="line"><span style="color:#B392F0;">nethogs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 按进程监控网络使用</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 温度/硬件监控</span></span>
<span class="line"><span style="color:#B392F0;">sensors</span><span style="color:#E1E4E8;">                   </span><span style="color:#6A737D;"># 显示传感器温度(需lm-sensors)</span></span>
<span class="line"><span style="color:#B392F0;">hddtemp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 显示硬盘温度</span></span>
<span class="line"><span style="color:#B392F0;">smartctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sda</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 显示硬盘SMART信息</span></span>
<span class="line"><span style="color:#B392F0;">dmidecode</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">memory</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 显示内存信息</span></span>
<span class="line"><span style="color:#B392F0;">dmidecode</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bios</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 显示BIOS信息</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="_2-日志管理" tabindex="-1">2. 日志管理 <a class="header-anchor" href="#_2-日志管理" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 传统日志位置</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/messages</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 系统日志(RHEL/CentOS)</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/syslog</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 系统日志(Debian/Ubuntu)</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/auth.log</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 认证日志</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/kern.log</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 内核日志</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/boot.log</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 启动日志</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/dmesg</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 内核环缓冲区</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/mail.log</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 邮件日志</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/httpd/</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># Apache日志</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/nginx/</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># Nginx日志</span></span>
<span class="line"><span style="color:#B392F0;">/var/log/mysql/</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># MySQL日志</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># journalctl (systemd日志)</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 查看所有日志</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 实时跟踪日志</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">service</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 查看特定服务日志</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-b</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 本次启动日志</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-b</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-1</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 上次启动日志</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--since</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;2023-01-01&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--until</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;2023-01-02&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 时间范围</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">err</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 仅显示错误</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-x</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;"># 添加解释文本</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">json</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># JSON格式输出</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--disk-usage</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 显示磁盘使用</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># logrotate: 日志轮替</span></span>
<span class="line"><span style="color:#6A737D;"># 配置文件: /etc/logrotate.conf 和 /etc/logrotate.d/*</span></span>
<span class="line"><span style="color:#6A737D;"># 常用选项:</span></span>
<span class="line"><span style="color:#6A737D;">#   daily/weekly/monthly  轮替频率</span></span>
<span class="line"><span style="color:#6A737D;">#   rotate 7              保留7个备份</span></span>
<span class="line"><span style="color:#6A737D;">#   compress              压缩旧日志</span></span>
<span class="line"><span style="color:#6A737D;">#   delaycompress         延迟压缩(上次轮替)</span></span>
<span class="line"><span style="color:#6A737D;">#   missingok             忽略不存在的日志</span></span>
<span class="line"><span style="color:#6A737D;">#   notifempty            空文件不轮替</span></span>
<span class="line"><span style="color:#6A737D;">#   create 640 root adm   创建新文件(权限/所有者/组)</span></span>
<span class="line"><span style="color:#6A737D;">#   postrotate/endscript  轮替后执行脚本</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">logrotate</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/logrotate.conf</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 强制轮替</span></span>
<span class="line"><span style="color:#B392F0;">logrotate</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/logrotate.conf</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 调试模式</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="_3-定时任务" tabindex="-1">3. 定时任务 <a class="header-anchor" href="#_3-定时任务" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># at: 一次性任务</span></span>
<span class="line"><span style="color:#B392F0;">at</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">now</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">minutes</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 5分钟后执行</span></span>
<span class="line"><span style="color:#B392F0;">at</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">:</span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tomorrow</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 明天10:30执行</span></span>
<span class="line"><span style="color:#B392F0;">at</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">:</span><span style="color:#F97583;">0</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#9ECBFF;">-</span><span style="color:#79B8FF;">12</span><span style="color:#9ECBFF;">-</span><span style="color:#79B8FF;">31</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 指定日期时间</span></span>
<span class="line"><span style="color:#6A737D;"># at提示符下输入命令:</span></span>
<span class="line"><span style="color:#B392F0;">at&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command1</span></span>
<span class="line"><span style="color:#B392F0;">at&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command2</span></span>
<span class="line"><span style="color:#B392F0;">at&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">EO</span><span style="color:#E1E4E8;">T</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># Ctrl+D结束</span></span>
<span class="line"><span style="color:#B392F0;">atq</span><span style="color:#E1E4E8;">                       </span><span style="color:#6A737D;"># 列出at队列</span></span>
<span class="line"><span style="color:#B392F0;">atrm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">job_id</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 删除at作业</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># crontab: 周期性任务</span></span>
<span class="line"><span style="color:#B392F0;">crontab</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 编辑当前用户的crontab</span></span>
<span class="line"><span style="color:#B392F0;">crontab</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 列出当前用户的crontab</span></span>
<span class="line"><span style="color:#B392F0;">crontab</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 删除当前用户的crontab</span></span>
<span class="line"><span style="color:#B392F0;">crontab</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">username</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-e</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 编辑其他用户的crontab(需要权限)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># crontab格式</span></span>
<span class="line"><span style="color:#6A737D;"># 分 时 日 月 周 命令</span></span>
<span class="line"><span style="color:#6A737D;"># 0-59 0-23 1-31 1-12 0-7 command</span></span>
<span class="line"><span style="color:#6A737D;"># * 表示任意值</span></span>
<span class="line"><span style="color:#6A737D;"># , 指定列表值 1,3,5</span></span>
<span class="line"><span style="color:#6A737D;"># - 指定范围 1-5</span></span>
<span class="line"><span style="color:#6A737D;"># / 指定步长 */2 (每2个单位)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 示例:</span></span>
<span class="line"><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> /backup.sh        </span><span style="color:#6A737D;"># 每天凌晨2点执行</span></span>
<span class="line"><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">/</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> /check.sh       </span><span style="color:#6A737D;"># 每5分钟执行</span></span>
<span class="line"><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">-</span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">-</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> /work.sh     </span><span style="color:#6A737D;"># 工作日上午9点到下午6点每小时执行</span></span>
<span class="line"><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> /monthly.sh       </span><span style="color:#6A737D;"># 每月1日午夜执行</span></span>
<span class="line"><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> /report.sh    </span><span style="color:#6A737D;"># 每月1日和15日上午8:30执行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 系统级定时任务</span></span>
<span class="line"><span style="color:#B392F0;">/etc/crontab</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 系统crontab(包含用户名字段)</span></span>
<span class="line"><span style="color:#B392F0;">/etc/cron.d/</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 附加crontab</span></span>
<span class="line"><span style="color:#B392F0;">/etc/cron.daily/</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;"># 每日任务</span></span>
<span class="line"><span style="color:#B392F0;">/etc/cron.hourly/</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 每小时任务</span></span>
<span class="line"><span style="color:#B392F0;">/etc/cron.monthly/</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 每月任务</span></span>
<span class="line"><span style="color:#B392F0;">/etc/cron.weekly/</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 每周任务</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># anacron: 用于不常开机的系统</span></span>
<span class="line"><span style="color:#6A737D;"># 配置文件: /etc/anacrontab</span></span>
<span class="line"><span style="color:#6A737D;"># 格式: period delay job-identifier command</span></span>
<span class="line"><span style="color:#6A737D;"># 示例:</span></span>
<span class="line"><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">       cron.daily      run-parts /etc/cron.daily</span></span>
<span class="line"><span style="color:#6A737D;"># 每1天，延迟5分钟，运行/etc/cron.daily中的脚本</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="附录-实用技巧与故障排除" tabindex="-1">附录：实用技巧与故障排除 <a class="header-anchor" href="#附录-实用技巧与故障排除" aria-hidden="true">#</a></h2><h3 id="_1-常见问题解决" tabindex="-1">1. 常见问题解决 <a class="header-anchor" href="#_1-常见问题解决" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 忘记root密码</span></span>
<span class="line"><span style="color:#6A737D;"># 1. 重启系统</span></span>
<span class="line"><span style="color:#6A737D;"># 2. 在GRUB菜单时按e进入编辑</span></span>
<span class="line"><span style="color:#6A737D;"># 3. 找到以&quot;linux&quot;开头的行，末尾添加&quot;init=/bin/bash&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># 4. 按Ctrl+X启动</span></span>
<span class="line"><span style="color:#6A737D;"># 5. 执行: mount -o remount,rw /</span></span>
<span class="line"><span style="color:#6A737D;"># 6. 执行: passwd root</span></span>
<span class="line"><span style="color:#6A737D;"># 7. 执行: touch /.autorelabel  # SELinux环境下</span></span>
<span class="line"><span style="color:#6A737D;"># 8. 执行: exec /sbin/init</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 系统无法启动</span></span>
<span class="line"><span style="color:#6A737D;"># 1. 使用安装媒体启动(救援模式)</span></span>
<span class="line"><span style="color:#6A737D;"># 2. 挂载原系统: mount /dev/sda1 /mnt/sysimage</span></span>
<span class="line"><span style="color:#6A737D;"># 3. chroot /mnt/sysimage</span></span>
<span class="line"><span style="color:#6A737D;"># 4. 修复问题(如: grub-install /dev/sda, yum reinstall kernel)</span></span>
<span class="line"><span style="color:#6A737D;"># 5. exit, reboot</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 磁盘空间不足</span></span>
<span class="line"><span style="color:#6A737D;"># 1. 找出大文件/目录</span></span>
<span class="line"><span style="color:#B392F0;">du</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/log/</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sort</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span></span>
<span class="line"><span style="color:#B392F0;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-type</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">f</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-size</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+100M</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-exec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-lh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{}</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\;</span></span>
<span class="line"><span style="color:#6A737D;"># 2. 清理缓存</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clean</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># RHEL/CentOS</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clean</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># Debian/Ubuntu</span></span>
<span class="line"><span style="color:#6A737D;"># 3. 清理旧日志</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--vacuum-time=3d</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 保留最近3天</span></span>
<span class="line"><span style="color:#6A737D;"># 4. 清理旧内核</span></span>
<span class="line"><span style="color:#B392F0;">package-cleanup</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--oldkernels</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--count=2</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># RHEL/CentOS</span></span>
<span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">purge</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">linux-image-</span><span style="color:#79B8FF;">5.4*</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># Debian/Ubuntu</span></span>
<span class="line"><span style="color:#6A737D;"># 5. 清理临时文件</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-rf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/</span><span style="color:#79B8FF;">*</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-rf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/tmp/</span><span style="color:#79B8FF;">*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 网络故障排除</span></span>
<span class="line"><span style="color:#6A737D;"># 1. 检查物理连接</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span></span>
<span class="line"><span style="color:#6A737D;"># 2. 检查IP配置</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">addr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span></span>
<span class="line"><span style="color:#6A737D;"># 3. 检查路由</span></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span></span>
<span class="line"><span style="color:#6A737D;"># 4. 测试连通性</span></span>
<span class="line"><span style="color:#B392F0;">ping</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">8.8.8.8</span></span>
<span class="line"><span style="color:#6A737D;"># 5. 检查DNS</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/resolv.conf</span></span>
<span class="line"><span style="color:#B392F0;">nslookup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">google.com</span></span>
<span class="line"><span style="color:#6A737D;"># 6. 检查防火墙</span></span>
<span class="line"><span style="color:#B392F0;">firewall-cmd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--list-all</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># firewalld</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># iptables</span></span>
<span class="line"><span style="color:#B392F0;">ufw</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># Ubuntu防火墙</span></span>
<span class="line"><span style="color:#6A737D;"># 7. 检查服务状态</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">network</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># RHEL/CentOS</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">networking</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># Debian/Ubuntu</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="_2-有用的命令技巧" tabindex="-1">2. 有用的命令技巧 <a class="header-anchor" href="#_2-有用的命令技巧" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 历史命令</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+R</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 反向搜索历史</span></span>
<span class="line"><span style="color:#F97583;">!!</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 重复上一条命令</span></span>
<span class="line"><span style="color:#F97583;">!</span><span style="color:#B392F0;">-1</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 倒数第二条命令</span></span>
<span class="line"><span style="color:#F97583;">!</span><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 最近的ls命令</span></span>
<span class="line"><span style="color:#F97583;">!</span><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 上条命令最后一个参数</span></span>
<span class="line"><span style="color:#F97583;">!*</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># 上条命令所有参数</span></span>
<span class="line"><span style="color:#B392F0;">^old^new^</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;"># 替换上条命令中的old为new</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 快捷键</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+C</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 终止当前命令</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+Z</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 暂停当前命令</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+D</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 退出shell/EOF</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+L</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 清屏</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+A</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 移动到行首</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+E</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 移动到行尾</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+U</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 删除到行首</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+K</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 删除到行尾</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+Y</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 粘贴(上一次Ctrl+U/K删除的内容)</span></span>
<span class="line"><span style="color:#B392F0;">Ctrl+R</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 搜索历史</span></span>
<span class="line"><span style="color:#B392F0;">Tab</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;"># 命令/文件名补全</span></span>
<span class="line"><span style="color:#B392F0;">Alt+</span><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">                   </span><span style="color:#6A737D;"># 插入上条命令最后一个参数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 变量与脚本</span></span>
<span class="line"><span style="color:#E1E4E8;">${VAR</span><span style="color:#F97583;">:-</span><span style="color:#E1E4E8;">default}         </span><span style="color:#6A737D;"># 如果VAR未设置，使用default</span></span>
<span class="line"><span style="color:#E1E4E8;">${VAR</span><span style="color:#F97583;">:=</span><span style="color:#E1E4E8;">default}         </span><span style="color:#6A737D;"># 如果VAR未设置，设置为default</span></span>
<span class="line"><span style="color:#E1E4E8;">${VAR</span><span style="color:#F97583;">:?</span><span style="color:#E1E4E8;">message}         </span><span style="color:#6A737D;"># 如果VAR未设置，显示message并退出</span></span>
<span class="line"><span style="color:#E1E4E8;">${VAR</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;">+value}           </span><span style="color:#6A737D;"># 如果VAR设置，使用value</span></span>
<span class="line"><span style="color:#E1E4E8;">${</span><span style="color:#F97583;">#</span><span style="color:#E1E4E8;">VAR}                 </span><span style="color:#6A737D;"># 变量长度</span></span>
<span class="line"><span style="color:#E1E4E8;">${VAR</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;">start</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;">length}     </span><span style="color:#6A737D;"># 子字符串</span></span>
<span class="line"><span style="color:#9ECBFF;">$(</span><span style="color:#79B8FF;">command</span><span style="color:#9ECBFF;">)</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 命令替换</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Failed&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 如果命令失败执行</span></span>
<span class="line"><span style="color:#79B8FF;">command</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Success&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 如果命令成功执行</span></span>
<span class="line"><span style="color:#E1E4E8;">{ </span><span style="color:#B392F0;">command1</span><span style="color:#E1E4E8;">; </span><span style="color:#B392F0;">command2</span><span style="color:#E1E4E8;">; } </span><span style="color:#6A737D;"># 在当前shell执行多命令</span></span>
<span class="line"><span style="color:#E1E4E8;">( </span><span style="color:#B392F0;">command1</span><span style="color:#E1E4E8;">; </span><span style="color:#B392F0;">command2</span><span style="color:#E1E4E8;">; ) </span><span style="color:#6A737D;"># 在子shell执行多命令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 文件处理</span></span>
<span class="line"><span style="color:#B392F0;">sort</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">uniq</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 排序并去重</span></span>
<span class="line"><span style="color:#B392F0;">sort</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">uniq</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 排序并统计重复</span></span>
<span class="line"><span style="color:#B392F0;">sort</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">uniq</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 仅显示重复行</span></span>
<span class="line"><span style="color:#B392F0;">sort</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">comm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-3</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 比较两个排序文件</span></span>
<span class="line"><span style="color:#B392F0;">paste</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 横向合并文件</span></span>
<span class="line"><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file2</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 基于共同字段连接</span></span>
<span class="line"><span style="color:#B392F0;">cut</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f1,3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/passwd</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 用:分隔，取第1和3字段</span></span>
<span class="line"><span style="color:#B392F0;">column</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data.txt</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 以表格形式显示</span></span>
<span class="line"><span style="color:#B392F0;">watch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;ls -l&#39;</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 每秒执行一次命令</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="_3-文件系统修复实例" tabindex="-1">3. 文件系统修复实例 <a class="header-anchor" href="#_3-文件系统修复实例" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># ext4文件系统修复</span></span>
<span class="line"><span style="color:#6A737D;"># 1. 卸载文件系统</span></span>
<span class="line"><span style="color:#B392F0;">umount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span></span>
<span class="line"><span style="color:#6A737D;"># 2. 检查文件系统</span></span>
<span class="line"><span style="color:#B392F0;">fsck</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-N</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 模拟运行</span></span>
<span class="line"><span style="color:#B392F0;">fsck</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 自动修复</span></span>
<span class="line"><span style="color:#6A737D;"># 3. 检查严重损坏</span></span>
<span class="line"><span style="color:#B392F0;">fsck</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 检查坏块</span></span>
<span class="line"><span style="color:#6A737D;"># 4. 重新挂载</span></span>
<span class="line"><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># XFS文件系统修复</span></span>
<span class="line"><span style="color:#6A737D;"># 1. 卸载文件系统</span></span>
<span class="line"><span style="color:#B392F0;">umount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span></span>
<span class="line"><span style="color:#6A737D;"># 2. 检查文件系统</span></span>
<span class="line"><span style="color:#B392F0;">xfs_repair</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 仅检查</span></span>
<span class="line"><span style="color:#B392F0;">xfs_repair</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 修复</span></span>
<span class="line"><span style="color:#6A737D;"># 3. 强制修复</span></span>
<span class="line"><span style="color:#B392F0;">xfs_repair</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 清除日志(最后手段)</span></span>
<span class="line"><span style="color:#6A737D;"># 4. 重新挂载</span></span>
<span class="line"><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/sdb1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 无法卸载的文件系统</span></span>
<span class="line"><span style="color:#6A737D;"># 1. 找出使用进程</span></span>
<span class="line"><span style="color:#B392F0;">lsof</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+f</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span></span>
<span class="line"><span style="color:#B392F0;">fuser</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-vm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span></span>
<span class="line"><span style="color:#6A737D;"># 2. 终止进程</span></span>
<span class="line"><span style="color:#B392F0;">fuser</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-km</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 终止所有使用进程</span></span>
<span class="line"><span style="color:#6A737D;"># 3. 尝试延迟卸载</span></span>
<span class="line"><span style="color:#B392F0;">umount</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/mnt</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 延迟卸载</span></span>
<span class="line"><span style="color:#6A737D;"># 4. 重启系统</span></span>
<span class="line"><span style="color:#B392F0;">reboot</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><hr><blockquote><p>本手册基于《鸟哥的Linux私房菜》整理，力求全面详细，适合Linux新手和管理员日常参考。手册内容覆盖主流Linux发行版(RHEL/CentOS/Debian/Ubuntu等)，但具体命令和配置可能因发行版而异。建议结合官方文档和实际情况使用。手册最后更新于2024年，如有疑问请查阅最新官方文档。</p></blockquote></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-40602e86 data-v-620f9ac3><div class="edit-info" data-v-620f9ac3><!----><div class="last-updated" data-v-620f9ac3><p class="VPLastUpdated" data-v-620f9ac3 data-v-9447647c>Last updated: <time datetime="2026-01-02T10:17:56.000Z" data-v-9447647c></time></p></div></div><div class="prev-next" data-v-620f9ac3><div class="pager" data-v-620f9ac3><!----></div><div class="pager" data-v-620f9ac3><a class="pager-link next" href="/network/IPV6" data-v-620f9ac3><span class="desc" data-v-620f9ac3>Next page</span><span class="title" data-v-620f9ac3>IPv6</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-a818de47 data-v-c905fd42><div class="container" data-v-c905fd42><p class="message" data-v-c905fd42>Released under the Mit License."</p><p class="copyright" data-v-c905fd42>Copyright © 2021-present Zang Dunxi</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"a5bbbcc2\",\"java_spring_springmvc.md\":\"77f5f523\",\"kotlin_index.md\":\"9ad60039\",\"network_ipv6.md\":\"6aee9100\",\"network_计算机网络.md\":\"f9186c9d\",\"java_spring_springboot.md\":\"81fad397\",\"go_index.md\":\"783e1a99\",\"java_科学编程学习法.md\":\"462302a8\",\"java_spring_spring.md\":\"75125309\",\"java_软件开发环境安装教程.md\":\"11d31dc0\",\"network_数据通信技术.md\":\"34544091\",\"python_index.md\":\"1cfab8ca\",\"network_linux.md\":\"1c0b158b\",\"java_spring_springsecurityjwt.md\":\"050891af\",\"database_mysql.md\":\"ade51378\",\"blockchain_solidity.md\":\"35d121e4\",\"network_kubernetes.md\":\"6520e9c7\",\"java_spring_mybatis.md\":\"1e375e5f\",\"java_index.md\":\"0dcc4636\",\"java_spring_ssm整合.md\":\"7f652a98\",\"network_nginx.md\":\"49dd348d\",\"java_spring_mybatisplus.md\":\"3b956275\",\"java_spring_前后端分离博客系统.md\":\"ac3fd765\"}")</script>
    <script type="module" async src="/assets/app.6aa024e7.js"></script>
    
  </body>
</html>