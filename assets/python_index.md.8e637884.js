import{_ as s,c as n,o as a,a as l}from"./app.dec107d8.js";const u=JSON.parse('{"title":"Python笔记","description":"","frontmatter":{},"headers":[{"level":2,"title":"注释","slug":"注释","link":"#注释","children":[{"level":3,"title":"单行注释","slug":"单行注释","link":"#单行注释","children":[]},{"level":3,"title":"多行注释","slug":"多行注释","link":"#多行注释","children":[]}]},{"level":2,"title":"常用函数","slug":"常用函数","link":"#常用函数","children":[{"level":3,"title":"print() 打印字符","slug":"print-打印字符","link":"#print-打印字符","children":[]},{"level":3,"title":".format()","slug":"format","link":"#format","children":[]},{"level":3,"title":"f字符串","slug":"f字符串","link":"#f字符串","children":[]}]},{"level":2,"title":"字符串相关","slug":"字符串相关","link":"#字符串相关","children":[{"level":3,"title":"字符串长度","slug":"字符串长度","link":"#字符串长度","children":[]},{"level":3,"title":"字符串切片","slug":"字符串切片","link":"#字符串切片","children":[]},{"level":3,"title":"多行字符串","slug":"多行字符串","link":"#多行字符串","children":[]},{"level":3,"title":"字符串内查找字符","slug":"字符串内查找字符","link":"#字符串内查找字符","children":[]},{"level":3,"title":"统计特定字符出现的次数","slug":"统计特定字符出现的次数","link":"#统计特定字符出现的次数","children":[]},{"level":3,"title":"替换字符","slug":"替换字符","link":"#替换字符","children":[]},{"level":3,"title":"字母相关操作","slug":"字母相关操作","link":"#字母相关操作","children":[]},{"level":3,"title":"键盘录入内容","slug":"键盘录入内容","link":"#键盘录入内容","children":[]}]},{"level":2,"title":"分支结构设计","slug":"分支结构设计","link":"#分支结构设计","children":[{"level":3,"title":"if","slug":"if","link":"#if","children":[]},{"level":3,"title":"多分支if语句","slug":"多分支if语句","link":"#多分支if语句","children":[]},{"level":3,"title":"if语句的嵌套","slug":"if语句的嵌套","link":"#if语句的嵌套","children":[]}]},{"level":2,"title":"循环","slug":"循环","link":"#循环","children":[{"level":3,"title":"for","slug":"for","link":"#for","children":[]},{"level":3,"title":"range()函数","slug":"range-函数","link":"#range-函数","children":[]},{"level":3,"title":"while","slug":"while","link":"#while","children":[]},{"level":3,"title":"循环小练习","slug":"循环小练习","link":"#循环小练习","children":[]}]},{"level":2,"title":"列表","slug":"列表","link":"#列表","children":[{"level":3,"title":"list","slug":"list","link":"#list","children":[]},{"level":3,"title":"列表推导式","slug":"列表推导式","link":"#列表推导式","children":[]},{"level":3,"title":"列表小练习","slug":"列表小练习","link":"#列表小练习","children":[]}]},{"level":2,"title":"异常处理","slug":"异常处理","link":"#异常处理","children":[{"level":3,"title":"异常类型","slug":"异常类型","link":"#异常类型","children":[]}]},{"level":2,"title":"1. Python基础核心","slug":"_1-python基础核心","link":"#_1-python基础核心","children":[{"level":3,"title":"1.1 变量与数据类型","slug":"_1-1-变量与数据类型","link":"#_1-1-变量与数据类型","children":[]},{"level":3,"title":"1.2 运算符","slug":"_1-2-运算符","link":"#_1-2-运算符","children":[]},{"level":3,"title":"1.3 控制流","slug":"_1-3-控制流","link":"#_1-3-控制流","children":[]},{"level":3,"title":"1.4 数据结构","slug":"_1-4-数据结构","link":"#_1-4-数据结构","children":[]}]},{"level":2,"title":"2. 函数与模块","slug":"_2-函数与模块","link":"#_2-函数与模块","children":[{"level":3,"title":"2.1 函数基础","slug":"_2-1-函数基础","link":"#_2-1-函数基础","children":[]},{"level":3,"title":"2.2 函数高级特性","slug":"_2-2-函数高级特性","link":"#_2-2-函数高级特性","children":[]},{"level":3,"title":"2.3 模块与包","slug":"_2-3-模块与包","link":"#_2-3-模块与包","children":[]}]},{"level":2,"title":"3. 面向对象编程","slug":"_3-面向对象编程","link":"#_3-面向对象编程","children":[{"level":3,"title":"3.1 类与对象基础","slug":"_3-1-类与对象基础","link":"#_3-1-类与对象基础","children":[]},{"level":3,"title":"3.2 继承与多态","slug":"_3-2-继承与多态","link":"#_3-2-继承与多态","children":[]},{"level":3,"title":"3.3 特殊方法 (魔术方法)","slug":"_3-3-特殊方法-魔术方法","link":"#_3-3-特殊方法-魔术方法","children":[]},{"level":3,"title":"3.4 高级OOP概念","slug":"_3-4-高级oop概念","link":"#_3-4-高级oop概念","children":[]}]},{"level":2,"title":"4. 异常处理与文件操作","slug":"_4-异常处理与文件操作","link":"#_4-异常处理与文件操作","children":[{"level":3,"title":"4.1 异常处理","slug":"_4-1-异常处理","link":"#_4-1-异常处理","children":[]},{"level":3,"title":"4.2 文件操作","slug":"_4-2-文件操作","link":"#_4-2-文件操作","children":[]}]},{"level":2,"title":"5. 标准库精华","slug":"_5-标准库精华","link":"#_5-标准库精华","children":[{"level":3,"title":"5.1 日期与时间","slug":"_5-1-日期与时间","link":"#_5-1-日期与时间","children":[]},{"level":3,"title":"5.2 正则表达式","slug":"_5-2-正则表达式","link":"#_5-2-正则表达式","children":[]},{"level":3,"title":"5.3 并发与并行","slug":"_5-3-并发与并行","link":"#_5-3-并发与并行","children":[]}]},{"level":2,"title":"6. 现代Python最佳实践","slug":"_6-现代python最佳实践","link":"#_6-现代python最佳实践","children":[{"level":3,"title":"6.1 虚拟环境与依赖管理","slug":"_6-1-虚拟环境与依赖管理","link":"#_6-1-虚拟环境与依赖管理","children":[]},{"level":3,"title":"6.2 代码风格与静态检查","slug":"_6-2-代码风格与静态检查","link":"#_6-2-代码风格与静态检查","children":[]},{"level":3,"title":"6.3 测试与调试","slug":"_6-3-测试与调试","link":"#_6-3-测试与调试","children":[]}]},{"level":2,"title":"7. Web开发基础","slug":"_7-web开发基础","link":"#_7-web开发基础","children":[]},{"level":2,"title":"8. 数据科学基础","slug":"_8-数据科学基础","link":"#_8-数据科学基础","children":[]},{"level":2,"title":"9. 实战项目：简易博客系统","slug":"_9-实战项目-简易博客系统","link":"#_9-实战项目-简易博客系统","children":[]}],"relativePath":"python/index.md","lastUpdated":1767366913000}'),p={name:"python/index.md"},o=l(`<h1 id="python笔记" tabindex="-1">Python笔记 <a class="header-anchor" href="#python笔记" aria-hidden="true">#</a></h1><h2 id="注释" tabindex="-1">注释 <a class="header-anchor" href="#注释" aria-hidden="true">#</a></h2><h3 id="单行注释" tabindex="-1">单行注释 <a class="header-anchor" href="#单行注释" aria-hidden="true">#</a></h3><p>#来表示单行注释</p><h3 id="多行注释" tabindex="-1">多行注释 <a class="header-anchor" href="#多行注释" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">多行注释</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#9ECBFF;">三个双引号也可以表示多行注释</span></span>
<span class="line"><span style="color:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="常用函数" tabindex="-1">常用函数 <a class="header-anchor" href="#常用函数" aria-hidden="true">#</a></h2><h3 id="print-打印字符" tabindex="-1">print() 打印字符 <a class="header-anchor" href="#print-打印字符" aria-hidden="true">#</a></h3><h3 id="format" tabindex="-1">.format() <a class="header-anchor" href="#format" aria-hidden="true">#</a></h3><h3 id="f字符串" tabindex="-1">f字符串 <a class="header-anchor" href="#f字符串" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;lily&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">student_num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">202108710257</span></span>
<span class="line"><span style="color:#E1E4E8;">score </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">90</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;姓名：</span><span style="color:#79B8FF;">{0</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;">-^15}\\n</span><span style="color:#9ECBFF;">学号：</span><span style="color:#79B8FF;">{1</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;">-&lt;15}\\n</span><span style="color:#9ECBFF;">成绩：</span><span style="color:#79B8FF;">{2</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;">~&gt;15b}</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">.format(name,student_num,score)</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#f字符串，省略掉索引，不必使用占位符，类似于\${}</span></span>
<span class="line"><span style="color:#6A737D;">#print里面开头写个f，然后在字符串里面写大括号写值</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&#39;姓名：</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">name</span><span style="color:#F97583;">:-^15</span><span style="color:#79B8FF;">}\\n</span><span style="color:#9ECBFF;">学号：</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">student_num</span><span style="color:#F97583;">:-&lt;15</span><span style="color:#79B8FF;">}\\n</span><span style="color:#9ECBFF;">分数：</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">score:</span><span style="color:#F97583;">~&gt;</span><span style="color:#FDAEB7;font-style:italic;">15o</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="字符串相关" tabindex="-1">字符串相关 <a class="header-anchor" href="#字符串相关" aria-hidden="true">#</a></h2><h3 id="字符串长度" tabindex="-1">字符串长度 <a class="header-anchor" href="#字符串长度" aria-hidden="true">#</a></h3><p>len() 函数，获取字符串的长度</p><p>使用len()函数计算字符串长度，不区分汉子和字符，统一按照英文长度处理</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">s </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;alsfdj&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">s1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;sldjflasf&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">s2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;sldjflkasjsdafjljalfjklsadjlkfa&quot;</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(s))</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(s1))</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(s2))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="字符串切片" tabindex="-1">字符串切片 <a class="header-anchor" href="#字符串切片" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#字符串切片函数，变量名[start:end:step] start可以取值，end索引取不到值，step步长</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(s[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="多行字符串" tabindex="-1">多行字符串 <a class="header-anchor" href="#多行字符串" aria-hidden="true">#</a></h3><p>使用三个连续的单引号或者双引号表示</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">    *</span></span>
<span class="line"><span style="color:#9ECBFF;">   * *</span></span>
<span class="line"><span style="color:#9ECBFF;"> * * * *</span></span>
<span class="line"><span style="color:#9ECBFF;">    &#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="字符串内查找字符" tabindex="-1">字符串内查找字符 <a class="header-anchor" href="#字符串内查找字符" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#字符串内查找字符</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;a&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> s)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;a&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> s)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="统计特定字符出现的次数" tabindex="-1">统计特定字符出现的次数 <a class="header-anchor" href="#统计特定字符出现的次数" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#统计特定字符串出现的次数</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(s.count(</span><span style="color:#9ECBFF;">&quot;a&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="替换字符" tabindex="-1">替换字符 <a class="header-anchor" href="#替换字符" aria-hidden="true">#</a></h3><p>左边的替换成右边的</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#替换字符  把左边的替换成右边的</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(s.replace(</span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&#39;b&#39;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="字母相关操作" tabindex="-1">字母相关操作 <a class="header-anchor" href="#字母相关操作" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">s3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;python学习&#39;</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(s3)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(s3.title()) </span><span style="color:#6A737D;">#首字母大写</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(s3.upper())</span><span style="color:#6A737D;">#所有字母大写</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(s3.lower())</span><span style="color:#6A737D;">#所有字母小写</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="键盘录入内容" tabindex="-1">键盘录入内容 <a class="header-anchor" href="#键盘录入内容" aria-hidden="true">#</a></h3><p>​ input() 方法</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">    username </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入用户名：&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    passwd </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入密码：&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>​ 从键盘录入内容赋值给前面的变量</p><h2 id="分支结构设计" tabindex="-1">分支结构设计 <a class="header-anchor" href="#分支结构设计" aria-hidden="true">#</a></h2><p>#选择结构，单分支（if) ，双分支 （if else) ，多分支 （if elif else) #条件后的：不能省略 #else在双分支或者多分支只能干，都不能有条件</p><h3 id="if" tabindex="-1">if <a class="header-anchor" href="#if" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">height </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入身高：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">weight </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入体重：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(height)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(weight)</span></span>
<span class="line"><span style="color:#79B8FF;">BMI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (weight</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">height</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">BMI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;肥胖！！&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;正常。&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="多分支if语句" tabindex="-1">多分支if语句 <a class="header-anchor" href="#多分支if语句" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">height </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入身高：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">weight </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入体重：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(height)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(weight)</span></span>
<span class="line"><span style="color:#79B8FF;">BMI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (weight</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">height</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">BMI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">18.5</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;偏瘦&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">BMI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">24</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;正常&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">BMI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;偏胖&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;肥胖！！&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>小练习 开发一个四则运算器</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#开发一个四则运算器</span></span>
<span class="line"><span style="color:#E1E4E8;">first </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入第一个数：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">second </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入第二个数：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入运算方式：&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#用于接收结果</span></span>
<span class="line"><span style="color:#E1E4E8;">flag </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#用来判断用户输入是否合法，合法则正常输出结果，不合法，则不输出运算结果</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;+&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> first </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> second</span></span>
<span class="line"><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;-&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> first </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> second</span></span>
<span class="line"><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> first </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> second</span></span>
<span class="line"><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> first </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> second</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    flag </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">False</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;没有这种计算方式&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> flag:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(result)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="if语句的嵌套" tabindex="-1">if语句的嵌套 <a class="header-anchor" href="#if语句的嵌套" aria-hidden="true">#</a></h3><p>​ 小练习</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#用户取钱</span></span>
<span class="line"><span style="color:#E1E4E8;">password1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;123&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">password2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;123&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">pwd1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入登录密码：&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> pwd1 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> password1:</span></span>
<span class="line"><span style="color:#E1E4E8;">    pwd2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入取款密码：&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> pwd2 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> password2:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;取款密码输入正确，取款成功&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;取款密码输入错误，取款失败&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;登录密码输入错误，登录失败&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="循环" tabindex="-1">循环 <a class="header-anchor" href="#循环" aria-hidden="true">#</a></h2><h3 id="for" tabindex="-1">for <a class="header-anchor" href="#for" aria-hidden="true">#</a></h3><p>for循环基本结构</p><pre><code>for 循环变量 in 遍历结构: 语句块的内容
    #语句块
</code></pre><p>python 可以直接遍历字符串</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#通过for循环遍历字符串</span></span>
<span class="line"><span style="color:#E1E4E8;">s </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;python&#39;</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> s:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(i)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="range-函数" tabindex="-1">range()函数 <a class="header-anchor" href="#range-函数" aria-hidden="true">#</a></h3><p>​ range(start,end,step) start 可以取到，end取不到，step步长 ​ 如果要取1-100 则应该写 range(1,101) ​ 用for循环打印1-100里面的值</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">101</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(i)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>小练习</p><p>​ for循环打印99乘法表</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> j </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,i</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">j</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">*</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">=&#39;</span><span style="color:#E1E4E8;">,i</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">j,</span><span style="color:#FFAB70;">end</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;  &quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="while" tabindex="-1">while <a class="header-anchor" href="#while" aria-hidden="true">#</a></h3><p>用while循环实现 99乘法表</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">a </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> a </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> b </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> a:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">b</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">*</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">a</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">=&#39;</span><span style="color:#E1E4E8;">, a </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> b, </span><span style="color:#FFAB70;">end</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;  &quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        b</span><span style="color:#F97583;">+=</span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">    a </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="循环小练习" tabindex="-1">循环小练习 <a class="header-anchor" href="#循环小练习" aria-hidden="true">#</a></h3><p>多层循环实现银行卡取钱</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">password </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;123&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">pwd </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;123&quot;</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> l </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    password1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入登录密码：&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> password </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> password1:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;登录成功&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> q </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">            pwd1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入取款密码：&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> pwd1 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> pwd:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;取款成功&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> q </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;取款密码输入错误，请重新输入&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;密码错误超过三次，请重新登录&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">continue</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> l </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;登录失败，请重新输入登录密码&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;密码错误超过三次，程序结束&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>for循环实现输入10个数，求平均值</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入第&quot;</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(i</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">&quot;个值:&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;平均值为：&quot;</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>while循环实现输入任意个数，求平均值</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入第&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(i) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;个值:&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    i</span><span style="color:#F97583;">+=</span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;继续输入请按y,结束请按n&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    flag </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> flag </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;y&quot;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">continue</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;平均值为：&quot;</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> (i</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>一张0.08毫米厚纸对折多少次可以超过珠穆朗玛峰的高度？</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">mm </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.08</span></span>
<span class="line"><span style="color:#E1E4E8;">m </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8848000</span></span>
<span class="line"><span style="color:#E1E4E8;">count </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    mm </span><span style="color:#F97583;">*=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">    count </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> mm </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> m:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;对折&quot;</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(count)</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">&quot;次&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">continue</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="鸡兔同笼" tabindex="-1">鸡兔同笼 <a class="header-anchor" href="#鸡兔同笼" aria-hidden="true">#</a></h4><p>35个头 94只脚</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">    鸡兔同笼</span></span>
<span class="line"><span style="color:#9ECBFF;">    35个头 94只脚</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#79B8FF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">35</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">tutui </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">94</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">all</span></span>
<span class="line"><span style="color:#E1E4E8;">tu </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> tutui </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">ji </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">35</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> tu</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(ji)</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">&quot;只鸡&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">35</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ji)</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">&quot;只兔子&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="百钱买百鸡" tabindex="-1">百钱买百鸡 <a class="header-anchor" href="#百钱买百鸡" aria-hidden="true">#</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">    百钱买百鸡</span></span>
<span class="line"><span style="color:#9ECBFF;">    5文 1公，3文 1母 1文 3雏鸡</span></span>
<span class="line"><span style="color:#9ECBFF;">    问 100文 100只鸡  公 母 雏 各多少只</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">21</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> y </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">34</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> z </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">101</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (x </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> y </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> z </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> (x </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> y </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> z </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;公鸡有</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">只</span><span style="color:#79B8FF;">\\t</span><span style="color:#9ECBFF;">母鸡有</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">只</span><span style="color:#79B8FF;">\\t</span><span style="color:#9ECBFF;">小鸡有</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">只&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> (x, y, z))</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="回文数" tabindex="-1">回文数 <a class="header-anchor" href="#回文数" aria-hidden="true">#</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 回文数</span></span>
<span class="line"><span style="color:#E1E4E8;">num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入任意正整数：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">orgin_num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> num</span></span>
<span class="line"><span style="color:#E1E4E8;">reversed_num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> num </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    reversed_num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> num </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> reversed_num </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span></span>
<span class="line"><span style="color:#E1E4E8;">    num </span><span style="color:#F97583;">//=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> reversed_num </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> orgin_num:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;是回文数&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;不是回文数&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="列表" tabindex="-1">列表 <a class="header-anchor" href="#列表" aria-hidden="true">#</a></h2><h3 id="list" tabindex="-1">list <a class="header-anchor" href="#list" aria-hidden="true">#</a></h3><p>定义与使用</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 定义</span></span>
<span class="line"><span style="color:#E1E4E8;">list1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#6A737D;"># 索引</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(list1[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#6A737D;"># 切片</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(list1[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#6A737D;"># 遍历</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> list1:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(i)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 增</span></span>
<span class="line"><span style="color:#E1E4E8;">list1.append(</span><span style="color:#79B8FF;">123</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="列表判断回文数" tabindex="-1">列表判断回文数 <a class="header-anchor" href="#列表判断回文数" aria-hidden="true">#</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入整数：&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">list01 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">(num)</span></span>
<span class="line"><span style="color:#E1E4E8;">list02 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">(num)</span></span>
<span class="line"><span style="color:#E1E4E8;">list01.reverse()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#比较两个列表中元素是否一致，只要有一个元素不一样，不是回文数</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> list01 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> list02:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;yes&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;no&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="利用for循环遍历列表" tabindex="-1">利用for循环遍历列表 <a class="header-anchor" href="#利用for循环遍历列表" aria-hidden="true">#</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(list01)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> list01[i] </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> list02[i]:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;no&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#6A737D;"># for while 配合 else 来判断循环是否是正常结束，没有遇到break则执行else里面的代码</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;yes&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><em>注意：for while 配合 else 来判断循环是否是正常结束，没有遇到break则执行else里面的代码</em></p><h4 id="列表的增加" tabindex="-1">列表的增加 <a class="header-anchor" href="#列表的增加" aria-hidden="true">#</a></h4><p>listname.append() 在末尾处增加元素</p><p>Listname.extend() 在末尾处增加切片</p><p>listname.insert(索引，元素值) 在列表的指定位置索引处插入元素</p><h4 id="列表的删除" tabindex="-1">列表的删除 <a class="header-anchor" href="#列表的删除" aria-hidden="true">#</a></h4><h4 id="排序" tabindex="-1">排序 <a class="header-anchor" href="#排序" aria-hidden="true">#</a></h4><p>排序 sort() 会永远改变列表元素的排列顺序</p><p>sorted() 可以实现临时排序，默认排序方式是升序排列，通过传入参数reverse=True，实现降序</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">score_list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">435</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">456</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">67</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#6A737D;"># 排序 sort() 会永远改变列表元素的排列顺序  sorted() 可以实现临时排序，默认排序方式是升序排列，通过传入参数reverse=True，实现降序</span></span>
<span class="line"><span style="color:#E1E4E8;">list_num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> score_list.sort()</span></span>
<span class="line"><span style="color:#E1E4E8;">list_num1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sorted</span><span style="color:#E1E4E8;">(score_list)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(list_num1)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="赋值" tabindex="-1">赋值 <a class="header-anchor" href="#赋值" aria-hidden="true">#</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">a </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> a</span></span>
<span class="line"><span style="color:#E1E4E8;">a.append(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">b.append(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(b)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>直接赋值会使两个list同时指向一个地址，两个名字对应的列表一样，改变一个另一个也会改变。</p><ol><li>切片 为了解决这个问题，我们采用切片的方式复制</li></ol><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">a </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> a[:]</span></span>
<span class="line"><span style="color:#E1E4E8;">a.append(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">b.append(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(b)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>copy方法</li></ol><p>批量提升成绩</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 遍历列表，挨个改变元素的值</span></span>
<span class="line"><span style="color:#E1E4E8;">score_list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">56</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">69</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">58</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">90</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">56</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">88</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">list01 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(list01)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> score_list:</span></span>
<span class="line"><span style="color:#E1E4E8;">    i </span><span style="color:#F97583;">*=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1.2</span></span>
<span class="line"><span style="color:#E1E4E8;">    list01.append(i)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(list01)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="列表推导式" tabindex="-1">列表推导式 <a class="header-anchor" href="#列表推导式" aria-hidden="true">#</a></h3><h3 id="列表小练习" tabindex="-1">列表小练习 <a class="header-anchor" href="#列表小练习" aria-hidden="true">#</a></h3><p>根据索引定制每日运动计划</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">run </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;0分钟&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;20分钟&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;40分钟&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;60分钟&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">swim </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;0米&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;200米&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;400米&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;600米&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(run)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">1}</span><span style="color:#9ECBFF;">、</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">run[i]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">index_run </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请选择您要跑的时长选项：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(swim)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">1}</span><span style="color:#9ECBFF;">、</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">run[i]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">index_swim </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请选择您要跑的时长选项：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;定制每日运动计划：跑步</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">run[index_run</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">,游泳：</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">swim[index_swim</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="异常处理" tabindex="-1">异常处理 <a class="header-anchor" href="#异常处理" aria-hidden="true">#</a></h2><h3 id="异常类型" tabindex="-1">异常类型 <a class="header-anchor" href="#异常类型" aria-hidden="true">#</a></h3><table><thead><tr><th>异常类型</th><th>说明</th></tr></thead><tbody><tr><td>IndentationError</td><td>缩进错误</td></tr><tr><td>NameError</td><td>未声明，未初始化对象</td></tr><tr><td>ImportError</td><td>导入模块、对象失败</td></tr><tr><td>ZeroDivisionError</td><td>除零异常</td></tr><tr><td>SyntaxError</td><td>语法错误</td></tr><tr><td>TypeError</td><td>类型不合适引发的错误</td></tr><tr><td>ValueError</td><td>传入无效的参数</td></tr><tr><td>IndexError</td><td>索引超出序列范围</td></tr><tr><td>KeyError</td><td>请求一个不存在的字典关键字引发的异常</td></tr><tr><td>EOFError</td><td>读取超过文件结尾</td></tr><tr><td>AttributeError</td><td>访问未知对象属性引发的错误</td></tr><tr><td>MemoryError</td><td>内存溢出错误</td></tr></tbody></table><p>try ... except</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    语句块1：所有可能产生异常的代码</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> 异常的类型：</span></span>
<span class="line"><span style="color:#E1E4E8;">    异常处理方式</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>例子：</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    num1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入被除数：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    num2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入除数：&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(num1 </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> num2)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TypeError</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;输入类型错误&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(e)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ZeroDivisionError</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;除零异常&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(e)</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;没问题&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">finally</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;程序结束&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>小练习</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">run 20 - 200k</span></span>
<span class="line"><span style="color:#9ECBFF;">swim 200 - 100k</span></span>
<span class="line"><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">run </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;0分钟&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;20分钟&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;40分钟&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;60分钟&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">swim </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;0米&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;200米&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;400米&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;600米&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">plan_list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#E1E4E8;">calorie_list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(run)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> j </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(swim)):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;定制每日运动计划：跑步</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">run[i]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">消耗</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">100}</span><span style="color:#9ECBFF;">,游泳：</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">swim[j]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">消耗</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">j</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">200}</span><span style="color:#9ECBFF;"> 共</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">100</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">j</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">200}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        plan_list.append(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;定制每日运动计划：跑步</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">run[i]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">消耗</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">100}</span><span style="color:#9ECBFF;">,游泳：</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">swim[j]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">消耗</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">j</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">200}</span><span style="color:#9ECBFF;"> 共</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">100</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">j</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">200}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        calorie_list.append(i</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">100</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">j</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(plan_list)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(calorie_list)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;最大值&quot;</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">max</span><span style="color:#E1E4E8;">(calorie_list)))</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;最小值&quot;</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">min</span><span style="color:#E1E4E8;">(calorie_list)))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 遍历集合，寻找能被200整除的数</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> calorie_list:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(i)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_1-python基础核心" tabindex="-1">1. Python基础核心 <a class="header-anchor" href="#_1-python基础核心" aria-hidden="true">#</a></h2><h3 id="_1-1-变量与数据类型" tabindex="-1">1.1 变量与数据类型 <a class="header-anchor" href="#_1-1-变量与数据类型" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 基本数据类型</span></span>
<span class="line"><span style="color:#6A737D;"># 整数</span></span>
<span class="line"><span style="color:#E1E4E8;">age </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">25</span></span>
<span class="line"><span style="color:#E1E4E8;">temperature </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">10</span></span>
<span class="line"><span style="color:#E1E4E8;">population </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7_800_000_000</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># Python 3.6+支持下划线分隔符</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 浮点数</span></span>
<span class="line"><span style="color:#E1E4E8;">price </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">19.99</span></span>
<span class="line"><span style="color:#E1E4E8;">scientific </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2.5e-3</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 0.0025</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 字符串 (单引号、双引号、三引号)</span></span>
<span class="line"><span style="color:#E1E4E8;">name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Alice&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Hello, World!&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">multi_line </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&quot;&quot;这是多行字符串，</span></span>
<span class="line"><span style="color:#9ECBFF;">可以包含换行符和特殊字符，</span></span>
<span class="line"><span style="color:#9ECBFF;">很适合写文档。&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 布尔值</span></span>
<span class="line"><span style="color:#E1E4E8;">is_active </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span></span>
<span class="line"><span style="color:#E1E4E8;">has_permission </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># None (空值)</span></span>
<span class="line"><span style="color:#E1E4E8;">result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 类型检查与转换</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">(age))  </span><span style="color:#6A737D;"># &lt;class &#39;int&#39;&gt;</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">isinstance</span><span style="color:#E1E4E8;">(name, </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># True</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 类型转换</span></span>
<span class="line"><span style="color:#E1E4E8;">num_str </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;42&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">num_int </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(num_str)  </span><span style="color:#6A737D;"># &quot;42&quot; -&gt; 42</span></span>
<span class="line"><span style="color:#E1E4E8;">float_num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">(num_int)  </span><span style="color:#6A737D;"># 42 -&gt; 42.0</span></span>
<span class="line"><span style="color:#E1E4E8;">str_num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(float_num)  </span><span style="color:#6A737D;"># 42.0 -&gt; &quot;42.0&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 布尔转换规则</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">bool</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">))      </span><span style="color:#6A737D;"># False</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">bool</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">))      </span><span style="color:#6A737D;"># True</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">bool</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">))     </span><span style="color:#6A737D;"># False</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">bool</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#E1E4E8;">))    </span><span style="color:#6A737D;"># True</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">bool</span><span style="color:#E1E4E8;">([]))     </span><span style="color:#6A737D;"># False</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">bool</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">))   </span><span style="color:#6A737D;"># False</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="_1-2-运算符" tabindex="-1">1.2 运算符 <a class="header-anchor" href="#_1-2-运算符" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 算术运算符</span></span>
<span class="line"><span style="color:#E1E4E8;">a </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span></span>
<span class="line"><span style="color:#E1E4E8;">b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># 13 (加)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># 7 (减)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># 30 (乘)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># 3.333... (除，结果总是float)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">//</span><span style="color:#E1E4E8;"> b) </span><span style="color:#6A737D;"># 3 (整除)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># 1 (取模/余数)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;"> b) </span><span style="color:#6A737D;"># 1000 (幂)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 比较运算符</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># False (等于)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># True (不等于)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> b)   </span><span style="color:#6A737D;"># True (大于)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> b)   </span><span style="color:#6A737D;"># False (小于)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># True (大于等于)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># False (小于等于)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 逻辑运算符</span></span>
<span class="line"><span style="color:#E1E4E8;">x </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span></span>
<span class="line"><span style="color:#E1E4E8;">y </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">False</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(x </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> y)  </span><span style="color:#6A737D;"># False</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(x </span><span style="color:#F97583;">or</span><span style="color:#E1E4E8;"> y)   </span><span style="color:#6A737D;"># True</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> x)    </span><span style="color:#6A737D;"># False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 位运算符</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># 2 (按位与)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># 11 (按位或)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">^</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># 9 (按位异或)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">a)     </span><span style="color:#6A737D;"># -11 (按位取反)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;"># 20 (左移)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;"># 5 (右移)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 赋值运算符</span></span>
<span class="line"><span style="color:#E1E4E8;">c </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">c </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># c = c + 2 -&gt; 7</span></span>
<span class="line"><span style="color:#E1E4E8;">c </span><span style="color:#F97583;">-=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># c = c - 1 -&gt; 6</span></span>
<span class="line"><span style="color:#E1E4E8;">c </span><span style="color:#F97583;">*=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># c = c * 3 -&gt; 18</span></span>
<span class="line"><span style="color:#E1E4E8;">c </span><span style="color:#F97583;">/=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># c = c / 2 -&gt; 9.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Python特有的运算符</span></span>
<span class="line"><span style="color:#6A737D;"># 成员运算符</span></span>
<span class="line"><span style="color:#E1E4E8;">my_list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> my_list)    </span><span style="color:#6A737D;"># True</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> my_list) </span><span style="color:#6A737D;"># True</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 身份运算符 (检查对象ID是否相同)</span></span>
<span class="line"><span style="color:#E1E4E8;">a </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> a</span></span>
<span class="line"><span style="color:#E1E4E8;">c </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># True (同一个对象)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> c)  </span><span style="color:#6A737D;"># False (值相同但不同对象)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> c)  </span><span style="color:#6A737D;"># True (值比较)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 海象运算符 (Python 3.8+)</span></span>
<span class="line"><span style="color:#6A737D;"># 在表达式内部为变量赋值</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (n </span><span style="color:#F97583;">:=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(my_list)) </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;List is too long (</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">n</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> elements, expected &lt;= 3)&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h3 id="_1-3-控制流" tabindex="-1">1.3 控制流 <a class="header-anchor" href="#_1-3-控制流" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 条件语句</span></span>
<span class="line"><span style="color:#E1E4E8;">temperature </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">25</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># if-elif-else 结构</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> temperature </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;今天很热，注意防暑&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> temperature </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;今天天气舒适&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> temperature </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;今天有点凉，加件外套&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;今天很冷，注意保暖&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 三元表达式</span></span>
<span class="line"><span style="color:#E1E4E8;">age </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span></span>
<span class="line"><span style="color:#E1E4E8;">status </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;成年人&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> age </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;未成年人&quot;</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(status)  </span><span style="color:#6A737D;"># 成年人</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 循环</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># for 循环</span></span>
<span class="line"><span style="color:#6A737D;"># 遍历列表</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;苹果&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;香蕉&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;橙子&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;葡萄&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> fruit </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> fruits:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;我喜欢吃</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">fruit</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 遍历字符串</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> char </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Python&quot;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(char)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用 range()</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">):  </span><span style="color:#6A737D;"># 0,1,2,3,4</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;计数: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">):  </span><span style="color:#6A737D;"># 2,3,4,5</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;从2开始: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">):  </span><span style="color:#6A737D;"># 0,2,4,6,8 (步长为2)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;步长为2: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 遍历字典</span></span>
<span class="line"><span style="color:#E1E4E8;">person </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;北京&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 遍历键</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> key </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> person:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;键: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">key</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, 值: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">person[key]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 遍历键值对</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> key, value </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> person.items():</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">key</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">value</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># while 循环</span></span>
<span class="line"><span style="color:#E1E4E8;">count </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> count </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;计数器: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">count</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    count </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 无限循环 (需要break跳出)</span></span>
<span class="line"><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    user_input </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;输入&#39;exit&#39;退出: &quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> user_input.lower() </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;exit&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;你输入了: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">user_input</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 循环控制语句</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">continue</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 跳过当前迭代，继续下一个</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 完全退出循环</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(i)      </span><span style="color:#6A737D;"># 输出 0,1,2,4,5,6</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 注意：只有当循环正常完成(没有break)时才会执行else块</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;循环正常结束&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 嵌套循环</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> j </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;i=</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">i</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, j=</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">j</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><h3 id="_1-4-数据结构" tabindex="-1">1.4 数据结构 <a class="header-anchor" href="#_1-4-数据结构" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark has-diff" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 列表 (List) - 有序、可变序列</span></span>
<span class="line"><span style="color:#6A737D;"># 创建列表</span></span>
<span class="line"><span style="color:#E1E4E8;">empty_list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;苹果&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;香蕉&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;橙子&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">mixed_list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;hello&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3.14</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 列表操作</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits.append(</span><span style="color:#9ECBFF;">&quot;葡萄&quot;</span><span style="color:#E1E4E8;">)       </span><span style="color:#6A737D;"># 末尾添加 [&quot;苹果&quot;, &quot;香蕉&quot;, &quot;橙子&quot;, &quot;葡萄&quot;]</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits.insert(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;芒果&quot;</span><span style="color:#E1E4E8;">)    </span><span style="color:#6A737D;"># 在索引1处插入 [&quot;苹果&quot;, &quot;芒果&quot;, &quot;香蕉&quot;, &quot;橙子&quot;, &quot;葡萄&quot;]</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits.remove(</span><span style="color:#9ECBFF;">&quot;香蕉&quot;</span><span style="color:#E1E4E8;">)       </span><span style="color:#6A737D;"># 移除第一个匹配项 [&quot;苹果&quot;, &quot;芒果&quot;, &quot;橙子&quot;, &quot;葡萄&quot;]</span></span>
<span class="line"><span style="color:#E1E4E8;">popped_fruit </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fruits.pop() </span><span style="color:#6A737D;"># 移除并返回最后一个元素 [&quot;苹果&quot;, &quot;芒果&quot;, &quot;橙子&quot;], popped_fruit = &quot;葡萄&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">popped_item </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fruits.pop(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;"># 移除并返回索引0的元素 [&quot;芒果&quot;, &quot;橙子&quot;], popped_item = &quot;苹果&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 列表切片</span></span>
<span class="line"><span style="color:#E1E4E8;">numbers </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(numbers[</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">])   </span><span style="color:#6A737D;"># [2, 3, 4] (索引2到4)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(numbers[:</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">])    </span><span style="color:#6A737D;"># [0, 1, 2, 3] (从开头到索引3)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(numbers[</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">:])    </span><span style="color:#6A737D;"># [6, 7, 8, 9] (从索引6到结尾)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(numbers[::</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">])   </span><span style="color:#6A737D;"># [0, 2, 4, 6, 8] (步长为2)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(numbers[::</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">])  </span><span style="color:#6A737D;"># [9, 8, 7, 6, 5, 4, 3, 2, 1, 0] (反转列表)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 列表推导式 (简洁创建列表)</span></span>
<span class="line"><span style="color:#E1E4E8;">squares </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [x</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">)] </span><span style="color:#6A737D;"># [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span></span>
<span class="line"><span style="color:#E1E4E8;">even_squares </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [x</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">] </span><span style="color:#6A737D;"># [0, 4, 16, 36, 64]</span></span>
<span class="line"><span style="color:#E1E4E8;">matrix </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [[i</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">j </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> j </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)] </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)] </span><span style="color:#6A737D;"># [[0,0,0],[0,1,2],[0,2,4]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 元组 (Tuple) - 有序、不可变序列</span></span>
<span class="line"><span style="color:#6A737D;"># 创建元组</span></span>
<span class="line"><span style="color:#E1E4E8;">empty_tuple </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ()</span></span>
<span class="line"><span style="color:#E1E4E8;">single_item </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">42</span><span style="color:#E1E4E8;">,)  </span><span style="color:#6A737D;"># 注意逗号，没有逗号就是整数</span></span>
<span class="line"><span style="color:#E1E4E8;">person </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;北京&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">coordinates </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 元组解包</span></span>
<span class="line"><span style="color:#E1E4E8;">name, age, city </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> person</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;姓名: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, 年龄: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">age</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, 城市: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">city</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">x, y, z </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> coordinates</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;坐标: (</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">x</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">y</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">z</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 交换变量 (不需要临时变量)</span></span>
<span class="line"><span style="color:#E1E4E8;">a, b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">20</span></span>
<span class="line"><span style="color:#E1E4E8;">a, b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> b, a  </span><span style="color:#6A737D;"># a=20, b=10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 字典 (Dict) - 键值对集合</span></span>
<span class="line"><span style="color:#6A737D;"># 创建字典</span></span>
<span class="line"><span style="color:#E1E4E8;">empty_dict </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {}</span></span>
<span class="line"><span style="color:#E1E4E8;">person </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;李四&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;上海&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;skills&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;Python&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;JavaScript&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;SQL&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 字典操作</span></span>
<span class="line"><span style="color:#E1E4E8;">person[</span><span style="color:#9ECBFF;">&quot;email&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;lisi@example.com&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 添加/更新键值对</span></span>
<span class="line"><span style="color:#E1E4E8;">person[</span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 更新值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安全访问 (避免KeyError)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(person.get(</span><span style="color:#9ECBFF;">&quot;phone&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;未提供电话&quot;</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 未提供电话 (键不存在时返回默认值)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;skills&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> person:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;技能:&quot;</span><span style="color:#E1E4E8;">, person[</span><span style="color:#9ECBFF;">&quot;skills&quot;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 删除键值对</span></span>
<span class="line"><span style="color:#F97583;">del</span><span style="color:#E1E4E8;"> person[</span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">]  </span><span style="color:#6A737D;"># 直接删除</span></span>
<span class="line"><span style="color:#E1E4E8;">email </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> person.pop(</span><span style="color:#9ECBFF;">&quot;email&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;无邮箱&quot;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 删除并返回值，不存在时返回默认值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 字典视图</span></span>
<span class="line"><span style="color:#E1E4E8;">keys </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> person.keys()    </span><span style="color:#6A737D;"># dict_keys([&#39;name&#39;, &#39;age&#39;, &#39;skills&#39;])</span></span>
<span class="line"><span style="color:#E1E4E8;">values </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> person.values()  </span><span style="color:#6A737D;"># dict_values([&#39;李四&#39;, 29, [&#39;Python&#39;, &#39;JavaScript&#39;, &#39;SQL&#39;]])</span></span>
<span class="line"><span style="color:#E1E4E8;">items </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> person.items()  </span><span style="color:#6A737D;"># dict_items([(&#39;name&#39;,&#39;李四&#39;), (&#39;age&#39;,29), ...])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 字典推导式</span></span>
<span class="line"><span style="color:#E1E4E8;">squares_dict </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {x: x</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">)} </span><span style="color:#6A737D;"># {0:0, 1:1, 2:4, 3:9, 4:16, 5:25}</span></span>
<span class="line"><span style="color:#E1E4E8;">filtered_dict </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {k: v </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> k, v </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> person.items() </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> k </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;skills&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 集合 (Set) - 无序、不重复元素集合</span></span>
<span class="line"><span style="color:#6A737D;"># 创建集合</span></span>
<span class="line"><span style="color:#E1E4E8;">empty_set </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;">()  </span><span style="color:#6A737D;"># 注意：{} 创建的是字典</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits_set </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;苹果&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;香蕉&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;橙子&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;苹果&quot;</span><span style="color:#E1E4E8;">}  </span><span style="color:#6A737D;"># {&quot;苹果&quot;, &quot;香蕉&quot;, &quot;橙子&quot;} (自动去重)</span></span>
<span class="line"><span style="color:#E1E4E8;">numbers_set </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;">([</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">])  </span><span style="color:#6A737D;"># {1, 2, 3}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 集合操作</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits_set.add(</span><span style="color:#9ECBFF;">&quot;葡萄&quot;</span><span style="color:#E1E4E8;">)    </span><span style="color:#6A737D;"># 添加元素</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits_set.remove(</span><span style="color:#9ECBFF;">&quot;香蕉&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;"># 移除元素 (不存在时抛出KeyError)</span></span>
<span class="line"><span style="color:#E1E4E8;">fruits_set.discard(</span><span style="color:#9ECBFF;">&quot;芒果&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;"># 安全移除 (不存在时不报错)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 集合运算</span></span>
<span class="line"><span style="color:#E1E4E8;">set1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">set2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">union </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> set1 </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> set2      </span><span style="color:#6A737D;"># 并集 {1,2,3,4,5,6,7,8}</span></span>
<span class="line"><span style="color:#E1E4E8;">intersection </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> set1 </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> set2  </span><span style="color:#6A737D;"># 交集 {4,5}</span></span>
<span class="line"><span style="color:#E1E4E8;">difference </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> set1 </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> set2  </span><span style="color:#6A737D;"># 差集 {1,2,3}</span></span>
<span class="line"><span style="color:#E1E4E8;">symmetric_diff </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> set1 </span><span style="color:#F97583;">^</span><span style="color:#E1E4E8;"> set2  </span><span style="color:#6A737D;"># 对称差集 {1,2,3,6,7,8}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 集合推导式</span></span>
<span class="line"><span style="color:#E1E4E8;">even_squares_set </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {x</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">}  </span><span style="color:#6A737D;"># {0,4,16,36,64}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br></div></div><h2 id="_2-函数与模块" tabindex="-1">2. 函数与模块 <a class="header-anchor" href="#_2-函数与模块" aria-hidden="true">#</a></h2><h3 id="_2-1-函数基础" tabindex="-1">2.1 函数基础 <a class="header-anchor" href="#_2-1-函数基础" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 定义函数</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">greet</span><span style="color:#E1E4E8;">(name):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;简单的问候函数&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;你好，</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">！&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 调用函数</span></span>
<span class="line"><span style="color:#E1E4E8;">message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> greet(</span><span style="color:#9ECBFF;">&quot;小明&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(message)  </span><span style="color:#6A737D;"># 你好，小明！</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 带默认参数值的函数</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">create_user</span><span style="color:#E1E4E8;">(name, age</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;">, city</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;北京&quot;</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;创建用户信息字典，有默认参数&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: name,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">: age,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">: city</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 调用时可选择性提供参数</span></span>
<span class="line"><span style="color:#E1E4E8;">user1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> create_user(</span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 使用默认年龄和城市</span></span>
<span class="line"><span style="color:#E1E4E8;">user2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> create_user(</span><span style="color:#9ECBFF;">&quot;李四&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 指定年龄，使用默认城市</span></span>
<span class="line"><span style="color:#E1E4E8;">user3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> create_user(</span><span style="color:#9ECBFF;">&quot;王五&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">city</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;上海&quot;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 指定城市，使用默认年龄</span></span>
<span class="line"><span style="color:#E1E4E8;">user4 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> create_user(</span><span style="color:#9ECBFF;">&quot;赵六&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;广州&quot;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 指定所有参数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 关键字参数 (提高可读性)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">calculate_area</span><span style="color:#E1E4E8;">(length, width):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> length </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> width</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 两种调用方式等价</span></span>
<span class="line"><span style="color:#E1E4E8;">area1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> calculate_area(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">area2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> calculate_area(</span><span style="color:#FFAB70;">width</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">length</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 使用关键字参数，顺序无关</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 可变参数</span></span>
<span class="line"><span style="color:#6A737D;"># *args: 接收任意数量的位置参数，作为元组</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sum_all</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">numbers):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;计算任意数量数字的和&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    total </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> num </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> numbers:</span></span>
<span class="line"><span style="color:#E1E4E8;">        total </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> num</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> total</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(sum_all(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">))       </span><span style="color:#6A737D;"># 6</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(sum_all(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">40</span><span style="color:#E1E4E8;">)) </span><span style="color:#6A737D;"># 100</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># **kwargs: 接收任意数量的关键字参数，作为字典</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">print_info</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">kwargs):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;打印任意键值对信息&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> key, value </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> kwargs.items():</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">key</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">value</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">print_info(</span><span style="color:#FFAB70;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">age</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">job</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;工程师&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;"># 输出:</span></span>
<span class="line"><span style="color:#6A737D;"># name: 张三</span></span>
<span class="line"><span style="color:#6A737D;"># age: 30</span></span>
<span class="line"><span style="color:#6A737D;"># job: 工程师</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 同时使用 *args 和 **kwargs</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">log_message</span><span style="color:#E1E4E8;">(level, </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">messages, </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">metadata):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;记录带有元数据的消息&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    timestamp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> metadata.get(</span><span style="color:#9ECBFF;">&quot;timestamp&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;2023-01-01&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    user </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> metadata.get(</span><span style="color:#9ECBFF;">&quot;user&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;system&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    log_entry </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;[</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">timestamp</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">] [</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">level</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">] User: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">user</span><span style="color:#79B8FF;">}\\n</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    log_entry </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">.join(messages)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> log_entry</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">log </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> log_message(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;INFO&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;用户登录成功&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;IP地址: 192.168.1.100&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">timestamp</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;2023-06-15 14:30:00&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">user</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;admin&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(log)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><h3 id="_2-2-函数高级特性" tabindex="-1">2.2 函数高级特性 <a class="header-anchor" href="#_2-2-函数高级特性" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 匿名函数 (lambda)</span></span>
<span class="line"><span style="color:#6A737D;"># 基本语法: lambda 参数: 表达式</span></span>
<span class="line"><span style="color:#E1E4E8;">square </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">lambda</span><span style="color:#E1E4E8;"> x: x </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(square(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 25</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 在排序中使用</span></span>
<span class="line"><span style="color:#E1E4E8;">students </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;score&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">85</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;李四&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;score&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">92</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;王五&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;score&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">78</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 按分数排序</span></span>
<span class="line"><span style="color:#E1E4E8;">sorted_students </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sorted</span><span style="color:#E1E4E8;">(students, </span><span style="color:#FFAB70;">key</span><span style="color:#F97583;">=lambda</span><span style="color:#E1E4E8;"> x: x[</span><span style="color:#9ECBFF;">&quot;score&quot;</span><span style="color:#E1E4E8;">], </span><span style="color:#FFAB70;">reverse</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#6A737D;"># [{&#39;name&#39;:&#39;李四&#39;,&#39;score&#39;:92}, {&#39;name&#39;:&#39;张三&#39;,&#39;score&#39;:85}, {&#39;name&#39;:&#39;王五&#39;,&#39;score&#39;:78}]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 在map/filter中使用</span></span>
<span class="line"><span style="color:#E1E4E8;">numbers </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">squares </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">lambda</span><span style="color:#E1E4E8;"> x: x </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, numbers))  </span><span style="color:#6A737D;"># [1, 4, 9, 16, 25]</span></span>
<span class="line"><span style="color:#E1E4E8;">evens </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">filter</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">lambda</span><span style="color:#E1E4E8;"> x: x </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, numbers))  </span><span style="color:#6A737D;"># [2, 4]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 高阶函数 (接收函数作为参数或返回函数)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">apply_operation</span><span style="color:#E1E4E8;">(func, numbers):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;对数字列表应用操作函数&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> [func(num) </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> num </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> numbers]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用不同的操作函数</span></span>
<span class="line"><span style="color:#E1E4E8;">double </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">lambda</span><span style="color:#E1E4E8;"> x: x </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">increment </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">lambda</span><span style="color:#E1E4E8;"> x: x </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">doubled </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> apply_operation(double, [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">])  </span><span style="color:#6A737D;"># [2, 4, 6, 8]</span></span>
<span class="line"><span style="color:#E1E4E8;">incremented </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> apply_operation(increment, [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">])  </span><span style="color:#6A737D;"># [2, 3, 4, 5]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 函数作为返回值 (闭包)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">create_multiplier</span><span style="color:#E1E4E8;">(factor):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;创建一个乘法器函数&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">multiplier</span><span style="color:#E1E4E8;">(x):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> factor</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> multiplier</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">double </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> create_multiplier(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">triple </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> create_multiplier(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(double(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 10</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(triple(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 15</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 装饰器基础</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">timer</span><span style="color:#E1E4E8;">(func):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;装饰器：计算函数执行时间&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> time</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">wrapper</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">args, </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">kwargs):</span></span>
<span class="line"><span style="color:#E1E4E8;">        start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#E1E4E8;">        result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> func(</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">args, </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">kwargs)</span></span>
<span class="line"><span style="color:#E1E4E8;">        end_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">func.</span><span style="color:#79B8FF;">__name__}</span><span style="color:#9ECBFF;"> 执行时间: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">end_time </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.4f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> wrapper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用装饰器</span></span>
<span class="line"><span style="color:#B392F0;">@timer</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">slow_function</span><span style="color:#E1E4E8;">(n):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;模拟一个耗时操作&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    total </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(n):</span></span>
<span class="line"><span style="color:#E1E4E8;">        total </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> i</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> total</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> slow_function(</span><span style="color:#79B8FF;">1000000</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 会打印执行时间</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 内置高阶函数</span></span>
<span class="line"><span style="color:#6A737D;"># map() - 将函数应用于可迭代对象的每个元素</span></span>
<span class="line"><span style="color:#E1E4E8;">numbers </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">squared </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">lambda</span><span style="color:#E1E4E8;"> x: x</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, numbers))  </span><span style="color:#6A737D;"># [1, 4, 9, 16, 25]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># filter() - 过滤可迭代对象的元素</span></span>
<span class="line"><span style="color:#E1E4E8;">evens </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">filter</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">lambda</span><span style="color:#E1E4E8;"> x: x </span><span style="color:#F97583;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, numbers))  </span><span style="color:#6A737D;"># [2, 4]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># reduce() - 累积计算 (需要从functools导入)</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> functools </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">reduce</span></span>
<span class="line"><span style="color:#E1E4E8;">product </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">reduce</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">lambda</span><span style="color:#E1E4E8;"> x, y: x </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> y, numbers)  </span><span style="color:#6A737D;"># 1*2*3*4*5 = 120</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># sorted() - 排序</span></span>
<span class="line"><span style="color:#E1E4E8;">words </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;banana&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;apple&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;cherry&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;date&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">sorted_words </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sorted</span><span style="color:#E1E4E8;">(words)  </span><span style="color:#6A737D;"># [&#39;apple&#39;, &#39;banana&#39;, &#39;cherry&#39;, &#39;date&#39;]</span></span>
<span class="line"><span style="color:#E1E4E8;">sorted_by_length </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sorted</span><span style="color:#E1E4E8;">(words, </span><span style="color:#FFAB70;">key</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># [&#39;date&#39;, &#39;apple&#39;, &#39;banana&#39;, &#39;cherry&#39;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><h3 id="_2-3-模块与包" tabindex="-1">2.3 模块与包 <a class="header-anchor" href="#_2-3-模块与包" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 导入模块</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> math  </span><span style="color:#6A737D;"># 导入整个模块</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> datetime </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> datetime  </span><span style="color:#6A737D;"># 从模块导入特定对象</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> numpy </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> np  </span><span style="color:#6A737D;"># 导入并设置别名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用导入的模块</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(math.sqrt(</span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 4.0</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(datetime.now())  </span><span style="color:#6A737D;"># 当前日期时间</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(np.array([</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]))  </span><span style="color:#6A737D;"># NumPy数组</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建自己的模块</span></span>
<span class="line"><span style="color:#6A737D;"># 文件: utils.py</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">format_currency</span><span style="color:#E1E4E8;">(amount):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;格式化金额为货币字符串&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;¥</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">amount</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">calculate_discount</span><span style="color:#E1E4E8;">(price, discount_rate):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;计算折扣后价格&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> price </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> discount_rate)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 在另一个文件中使用</span></span>
<span class="line"><span style="color:#6A737D;"># from utils import format_currency, calculate_discount</span></span>
<span class="line"><span style="color:#6A737D;"># print(format_currency(1234.56))  # ¥1234.56</span></span>
<span class="line"><span style="color:#6A737D;"># print(calculate_discount(100, 0.2))  # 80.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 包的结构</span></span>
<span class="line"><span style="color:#6A737D;"># mypackage/</span></span>
<span class="line"><span style="color:#6A737D;"># ├── __init__.py</span></span>
<span class="line"><span style="color:#6A737D;"># ├── module1.py</span></span>
<span class="line"><span style="color:#6A737D;"># ├── module2.py</span></span>
<span class="line"><span style="color:#6A737D;"># └── subpackage/</span></span>
<span class="line"><span style="color:#6A737D;">#     ├── __init__.py</span></span>
<span class="line"><span style="color:#6A737D;">#     └── module3.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># __init__.py 文件使目录成为包</span></span>
<span class="line"><span style="color:#6A737D;"># 可以在其中导入子模块，方便统一访问</span></span>
<span class="line"><span style="color:#6A737D;"># 文件: mypackage/__init__.py</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> .module1 </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> important_function</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> .module2 </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> AnotherClass</span></span>
<span class="line"><span style="color:#6A737D;"># 现在可以这样导入: from mypackage import important_function, AnotherClass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 模块搜索路径</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> sys</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(sys.path)  </span><span style="color:#6A737D;"># Python查找模块的路径列表</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 临时添加路径</span></span>
<span class="line"><span style="color:#E1E4E8;">sys.path.append(</span><span style="color:#9ECBFF;">&#39;/path/to/your/modules&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 标准库常用模块</span></span>
<span class="line"><span style="color:#6A737D;"># os - 操作系统接口</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> os</span></span>
<span class="line"><span style="color:#E1E4E8;">current_dir </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> os.getcwd()  </span><span style="color:#6A737D;"># 获取当前工作目录</span></span>
<span class="line"><span style="color:#E1E4E8;">files </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> os.listdir(current_dir)  </span><span style="color:#6A737D;"># 列出目录内容</span></span>
<span class="line"><span style="color:#E1E4E8;">os.makedirs(</span><span style="color:#9ECBFF;">&quot;new_folder&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">exist_ok</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 创建目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># sys - 系统特定参数和函数</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(sys.version)  </span><span style="color:#6A737D;"># Python版本</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(sys.platform)  </span><span style="color:#6A737D;"># 操作系统平台</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># time/datetime - 日期和时间</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> time</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(time.time())  </span><span style="color:#6A737D;"># 当前时间戳</span></span>
<span class="line"><span style="color:#E1E4E8;">time.sleep(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 暂停1秒</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> datetime </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> datetime, timedelta</span></span>
<span class="line"><span style="color:#E1E4E8;">now </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.now()</span></span>
<span class="line"><span style="color:#E1E4E8;">tomorrow </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> timedelta(</span><span style="color:#FFAB70;">days</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(now.strftime(</span><span style="color:#9ECBFF;">&quot;%Y-%m-</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;"> %H:%M:%S&quot;</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 格式化日期</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># json - JSON编码解码</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> json</span></span>
<span class="line"><span style="color:#E1E4E8;">data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">json_str </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> json.dumps(data, </span><span style="color:#FFAB70;">ensure_ascii</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 转为JSON字符串</span></span>
<span class="line"><span style="color:#E1E4E8;">loaded_data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> json.loads(json_str)  </span><span style="color:#6A737D;"># 从JSON字符串加载</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># re - 正则表达式</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> re</span></span>
<span class="line"><span style="color:#E1E4E8;">text </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;我的电话号码是 13812345678&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.search(</span><span style="color:#F97583;">r</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">\\d</span><span style="color:#F97583;">{11}</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">, text)</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> match:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;找到电话号码:&quot;</span><span style="color:#E1E4E8;">, match.group())  </span><span style="color:#6A737D;"># 13812345678</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h2 id="_3-面向对象编程" tabindex="-1">3. 面向对象编程 <a class="header-anchor" href="#_3-面向对象编程" aria-hidden="true">#</a></h2><h3 id="_3-1-类与对象基础" tabindex="-1">3.1 类与对象基础 <a class="header-anchor" href="#_3-1-类与对象基础" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 定义类</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Person</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;表示一个人的类&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 构造函数</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, name, age):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> name  </span><span style="color:#6A737D;"># 实例属性</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.age </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> age</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 实例方法</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">greet</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;你好，我叫</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">，今年</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.age</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">岁。&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">have_birthday</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.age </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">又长大了一岁，现在</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.age</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">岁。&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建对象</span></span>
<span class="line"><span style="color:#E1E4E8;">person1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Person(</span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">person2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Person(</span><span style="color:#9ECBFF;">&quot;李四&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 访问属性和方法</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(person1.name)  </span><span style="color:#6A737D;"># 张三</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(person1.greet())  </span><span style="color:#6A737D;"># 你好，我叫张三，今年25岁。</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(person1.have_birthday())  </span><span style="color:#6A737D;"># 张三又长大了一岁，现在26岁。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 类属性 (所有实例共享)</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Dog</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 类属性 (在__init__外部定义)</span></span>
<span class="line"><span style="color:#E1E4E8;">    species </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;犬科动物&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, name, breed):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> name</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.breed </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> breed  </span><span style="color:#6A737D;"># 品种</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bark</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">在汪汪叫！&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 访问类属性</span></span>
<span class="line"><span style="color:#E1E4E8;">dog1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Dog(</span><span style="color:#9ECBFF;">&quot;旺财&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;金毛&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">dog2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Dog(</span><span style="color:#9ECBFF;">&quot;小黑&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;拉布拉多&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(dog1.species)  </span><span style="color:#6A737D;"># 犬科动物</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(dog2.species)  </span><span style="color:#6A737D;"># 犬科动物</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(Dog.species)   </span><span style="color:#6A737D;"># 犬科动物 (直接通过类访问)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改类属性 (影响所有实例)</span></span>
<span class="line"><span style="color:#E1E4E8;">Dog.species </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;家犬&quot;</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(dog1.species)  </span><span style="color:#6A737D;"># 家犬</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(dog2.species)  </span><span style="color:#6A737D;"># 家犬</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 实例属性与类属性的区别</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Counter</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 类属性</span></span>
<span class="line"><span style="color:#E1E4E8;">    count </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, name):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> name  </span><span style="color:#6A737D;"># 实例属性</span></span>
<span class="line"><span style="color:#E1E4E8;">        Counter.count </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 每创建一个实例，类属性count增加1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@</span><span style="color:#79B8FF;">classmethod</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_count</span><span style="color:#E1E4E8;">(cls):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;类方法，访问类属性&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cls</span><span style="color:#E1E4E8;">.count</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建实例</span></span>
<span class="line"><span style="color:#E1E4E8;">c1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Counter(</span><span style="color:#9ECBFF;">&quot;计数器1&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">c2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Counter(</span><span style="color:#9ECBFF;">&quot;计数器2&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">c3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Counter(</span><span style="color:#9ECBFF;">&quot;计数器3&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(Counter.get_count())  </span><span style="color:#6A737D;"># 3 (总共创建了3个实例)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(c1.count)  </span><span style="color:#6A737D;"># 3 (通过实例访问类属性)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(c2.count)  </span><span style="color:#6A737D;"># 3</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(c3.count)  </span><span style="color:#6A737D;"># 3</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><h3 id="_3-2-继承与多态" tabindex="-1">3.2 继承与多态 <a class="header-anchor" href="#_3-2-继承与多态" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 基类 (父类)</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Animal</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, name):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> name</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">speak</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;基类中的方法，会被子类覆盖&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">NotImplementedError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;子类必须实现speak方法&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 子类 (继承)</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Dog</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Animal</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">speak</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">说：汪汪！&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cat</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Animal</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">speak</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">说：喵喵！&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Duck</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Animal</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">speak</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">说：嘎嘎！&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建对象</span></span>
<span class="line"><span style="color:#E1E4E8;">animals </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    Dog(</span><span style="color:#9ECBFF;">&quot;旺财&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">    Cat(</span><span style="color:#9ECBFF;">&quot;咪咪&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">    Duck(</span><span style="color:#9ECBFF;">&quot;唐老鸭&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 多态：不同对象对同一方法的不同实现</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> animal </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> animals:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(animal.speak())</span></span>
<span class="line"><span style="color:#6A737D;"># 旺财说：汪汪！</span></span>
<span class="line"><span style="color:#6A737D;"># 咪咪说：喵喵！</span></span>
<span class="line"><span style="color:#6A737D;"># 唐老鸭说：嘎嘎！</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># super() 函数 - 调用父类方法</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Bird</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, name):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> name</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fly</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">在天空中飞翔&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Penguin</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Bird</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, name, weight):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 调用父类的__init__方法</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">super</span><span style="color:#E1E4E8;">().</span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(name)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.weight </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> weight</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fly</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 调用父类的fly方法</span></span>
<span class="line"><span style="color:#E1E4E8;">        parent_fly </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">super</span><span style="color:#E1E4E8;">().fly()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">parent_fly</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">，但企鹅</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">太重(</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.weight</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">kg)了，实际上不能飞！&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">penguin </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Penguin(</span><span style="color:#9ECBFF;">&quot;小企&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(penguin.fly())</span></span>
<span class="line"><span style="color:#6A737D;"># 小企在天空中飞翔，但企鹅小企太重(15kg)了，实际上不能飞！</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 多重继承</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Flyable</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fly</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;我能飞！&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Swimmable</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">swim</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;我能游泳！&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Duck2</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Bird</span><span style="color:#E1E4E8;">, </span><span style="color:#B392F0;">Flyable</span><span style="color:#E1E4E8;">, </span><span style="color:#B392F0;">Swimmable</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;鸭子继承自Bird，同时也具备飞行和游泳能力&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">donald </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Duck2(</span><span style="color:#9ECBFF;">&quot;唐老鸭&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(donald.fly())  </span><span style="color:#6A737D;"># 从Flyable继承</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(donald.swim())  </span><span style="color:#6A737D;"># 从Swimmable继承</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(donald.name)   </span><span style="color:#6A737D;"># 从Bird继承</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 方法解析顺序 (MRO)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(Duck2.mro())</span></span>
<span class="line"><span style="color:#6A737D;"># [&lt;class &#39;__main__.Duck2&#39;&gt;, &lt;class &#39;__main__.Bird&#39;&gt;, &lt;class &#39;__main__.Flyable&#39;&gt;, &lt;class &#39;__main__.Swimmable&#39;&gt;, &lt;class &#39;object&#39;&gt;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br></div></div><h3 id="_3-3-特殊方法-魔术方法" tabindex="-1">3.3 特殊方法 (魔术方法) <a class="header-anchor" href="#_3-3-特殊方法-魔术方法" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Vector</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;表示二维向量的类&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, x, y):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.x </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> x</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.y </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> y</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 字符串表示</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__str__</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;对用户友好的字符串表示&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;Vector(</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.x</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, </span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.y</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__repr__</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;对开发者友好的字符串表示，通常包含更多信息&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;Vector(x=</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.x</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, y=</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.y</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 算术运算符</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__add__</span><span style="color:#E1E4E8;">(self, other):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;+ 运算符&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">isinstance</span><span style="color:#E1E4E8;">(other, Vector):</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> Vector(</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.x </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> other.x, </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.y </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> other.y)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TypeError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;只能将Vector与Vector相加&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__sub__</span><span style="color:#E1E4E8;">(self, other):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;- 运算符&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">isinstance</span><span style="color:#E1E4E8;">(other, Vector):</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> Vector(</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.x </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> other.x, </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.y </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> other.y)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TypeError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;只能将Vector与Vector相减&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__mul__</span><span style="color:#E1E4E8;">(self, scalar):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;* 运算符 (标量乘法)&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">isinstance</span><span style="color:#E1E4E8;">(scalar, (</span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">)):</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> Vector(</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.x </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> scalar, </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.y </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> scalar)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TypeError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;只能将Vector与标量相乘&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 比较运算符</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__eq__</span><span style="color:#E1E4E8;">(self, other):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;== 运算符&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">isinstance</span><span style="color:#E1E4E8;">(other, Vector):</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.x </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> other.x </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.y </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> other.y</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">False</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__lt__</span><span style="color:#E1E4E8;">(self, other):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;&lt; 运算符 (比较向量长度)&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">isinstance</span><span style="color:#E1E4E8;">(other, Vector):</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.magnitude() </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> other.magnitude()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TypeError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;只能比较两个Vector对象&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 其他有用的方法</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">magnitude</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;向量的模 (长度)&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.x</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.y</span><span style="color:#F97583;">**</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.5</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__len__</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;len() 函数支持&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 二维向量</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__getitem__</span><span style="color:#E1E4E8;">(self, index):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;[] 索引访问支持&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> index </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.x</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> index </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.y</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">IndexError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Vector索引只能是0或1&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__setitem__</span><span style="color:#E1E4E8;">(self, index, value):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;[] 索引赋值支持&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> index </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.x </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> value</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> index </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.y </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> value</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">IndexError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Vector索引只能是0或1&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 上下文管理器支持</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__enter__</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;进入上下文: </span><span style="color:#79B8FF;">{self}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__exit__</span><span style="color:#E1E4E8;">(self, exc_type, exc_val, exc_tb):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;退出上下文: </span><span style="color:#79B8FF;">{self}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> exc_type </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;捕获到异常: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">exc_type</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">exc_val</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 不抑制异常</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用Vector类</span></span>
<span class="line"><span style="color:#E1E4E8;">v1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Vector(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">v2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Vector(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(v1))  </span><span style="color:#6A737D;"># Vector(3, 4)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">repr</span><span style="color:#E1E4E8;">(v1))  </span><span style="color:#6A737D;"># Vector(x=3, y=4)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">v3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> v1 </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> v2  </span><span style="color:#6A737D;"># Vector(4, 6)</span></span>
<span class="line"><span style="color:#E1E4E8;">v4 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> v1 </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> v2  </span><span style="color:#6A737D;"># Vector(2, 2)</span></span>
<span class="line"><span style="color:#E1E4E8;">v5 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> v1 </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># Vector(6, 8)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(v1 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> Vector(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># True</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(v1 </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> v2)  </span><span style="color:#6A737D;"># False (因为v1.length=5, v2.length≈2.24)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(v1))  </span><span style="color:#6A737D;"># 2</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(v1[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">])   </span><span style="color:#6A737D;"># 3</span></span>
<span class="line"><span style="color:#E1E4E8;">v1[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(v1)      </span><span style="color:#6A737D;"># Vector(3, 5)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 上下文管理器用法</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> Vector(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> v:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;在上下文中: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">v</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 可以在这里执行操作</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># raise ValueError(&quot;测试异常&quot;)  # 取消注释会触发异常处理</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br></div></div><h3 id="_3-4-高级oop概念" tabindex="-1">3.4 高级OOP概念 <a class="header-anchor" href="#_3-4-高级oop概念" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 属性 (Property) - 控制属性访问</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Temperature</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, celsius):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">._celsius </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> celsius  </span><span style="color:#6A737D;"># 使用下划线表示内部/私有属性</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@</span><span style="color:#79B8FF;">property</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">celsius</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;获取摄氏温度&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">._celsius</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@celsius.setter</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">celsius</span><span style="color:#E1E4E8;">(self, value):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;设置摄氏温度，带验证&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> value </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">273.15</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;温度不能低于绝对零度&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">._celsius </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> value</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@</span><span style="color:#79B8FF;">property</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fahrenheit</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;获取华氏温度 (只读属性)&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">._celsius </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">32</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@fahrenheit.setter</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fahrenheit</span><span style="color:#E1E4E8;">(self, value):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;设置华氏温度，自动转换为摄氏&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.celsius </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (value </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">32</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">9</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用属性</span></span>
<span class="line"><span style="color:#E1E4E8;">temp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Temperature(</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(temp.celsius)  </span><span style="color:#6A737D;"># 25</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(temp.fahrenheit)  </span><span style="color:#6A737D;"># 77.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">temp.celsius </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(temp.fahrenheit)  </span><span style="color:#6A737D;"># 86.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">temp.fahrenheit </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(temp.celsius)  </span><span style="color:#6A737D;"># 37.777...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 静态方法和类方法</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MathUtils</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@</span><span style="color:#79B8FF;">staticmethod</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(a, b):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;静态方法：不需要访问类或实例属性&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> a </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> b</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@</span><span style="color:#79B8FF;">classmethod</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">from_string</span><span style="color:#E1E4E8;">(cls, num_str):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;类方法：接收类作为第一个参数，可以访问类属性或创建实例&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">(num_str.replace(</span><span style="color:#9ECBFF;">&quot;,&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(MathUtils.add(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 8</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(MathUtils.from_string(</span><span style="color:#9ECBFF;">&quot;1,234.56&quot;</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 1234.56</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 抽象基类 (ABC)</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> abc </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ABC</span><span style="color:#E1E4E8;">, abstractmethod</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Shape</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">ABC</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;抽象基类：定义形状接口&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@abstractmethod</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">area</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;计算面积 (必须在子类中实现)&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">pass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@abstractmethod</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">perimeter</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;计算周长 (必须在子类中实现)&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">pass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">describe</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;具体方法，所有子类继承&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;这个形状的面积是</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.area()</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">，周长是</span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.perimeter()</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Rectangle</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Shape</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, width, height):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.width </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> width</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.height </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> height</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">area</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.width </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.height</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">perimeter</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.width </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.height)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Circle</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Shape</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, radius):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.radius </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> radius</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">area</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> math</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> math.pi </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.radius </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">perimeter</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> math</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> math.pi </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.radius</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用</span></span>
<span class="line"><span style="color:#E1E4E8;">rect </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Rectangle(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">circle </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Circle(</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(rect.describe())  </span><span style="color:#6A737D;"># 这个形状的面积是15.00，周长是16.00</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(circle.describe())  </span><span style="color:#6A737D;"># 这个形状的面积是50.27，周长是25.13</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 尝试实例化抽象基类 (会失败)</span></span>
<span class="line"><span style="color:#6A737D;"># shape = Shape()  # TypeError: Can&#39;t instantiate abstract class Shape with abstract methods area, perimeter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 数据类 (Python 3.7+)</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> dataclasses </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> dataclass, field</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> typing </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> List</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@dataclass</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Product</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;使用dataclass简化类定义&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#79B8FF;">str</span></span>
<span class="line"><span style="color:#E1E4E8;">    price: </span><span style="color:#79B8FF;">float</span></span>
<span class="line"><span style="color:#E1E4E8;">    quantity: </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 默认值</span></span>
<span class="line"><span style="color:#E1E4E8;">    categories: List[</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> field(</span><span style="color:#FFAB70;">default_factory</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 可变默认值</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">total_value</span><span style="color:#E1E4E8;">(self) -&gt; </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.price </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.quantity</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用</span></span>
<span class="line"><span style="color:#E1E4E8;">product1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Product(</span><span style="color:#9ECBFF;">&quot;笔记本电脑&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8999.0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, [</span><span style="color:#9ECBFF;">&quot;电子产品&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;办公用品&quot;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#E1E4E8;">product2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Product(</span><span style="color:#9ECBFF;">&quot;鼠标&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">199.0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(product1)  </span><span style="color:#6A737D;"># Product(name=&#39;笔记本电脑&#39;, price=8999.0, quantity=2, categories=[&#39;电子产品&#39;, &#39;办公用品&#39;])</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(product2)  </span><span style="color:#6A737D;"># Product(name=&#39;鼠标&#39;, price=199.0, quantity=1, categories=[])</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(product1.total_value())  </span><span style="color:#6A737D;"># 17998.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># dataclass自动提供__init__, __repr__, __eq__等方法</span></span>
<span class="line"><span style="color:#E1E4E8;">product3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Product(</span><span style="color:#9ECBFF;">&quot;鼠标&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">199.0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(product2 </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> product3)  </span><span style="color:#6A737D;"># True (值相等)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br></div></div><h2 id="_4-异常处理与文件操作" tabindex="-1">4. 异常处理与文件操作 <a class="header-anchor" href="#_4-异常处理与文件操作" aria-hidden="true">#</a></h2><h3 id="_4-1-异常处理" tabindex="-1">4.1 异常处理 <a class="header-anchor" href="#_4-1-异常处理" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 基本try-except结构</span></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 可能引发异常的代码</span></span>
<span class="line"><span style="color:#E1E4E8;">    num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">input</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;请输入一个整数: &quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> num</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;10除以</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">num</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">等于</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">result</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 处理ValueError (例如输入非数字)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;错误：请输入有效的整数&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ZeroDivisionError</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 处理ZeroDivisionError (例如除以零)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;错误：不能除以零&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 捕获其他所有异常</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;发生未知错误: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 没有异常时执行</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;计算成功完成&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">finally</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 无论是否发生异常都会执行</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;程序执行完毕&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 捕获多个异常</span></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 代码可能引发多种异常</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;nonexistent_file.txt&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    content </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.read()</span></span>
<span class="line"><span style="color:#E1E4E8;">    num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;abc&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">FileNotFoundError</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">PermissionError</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;文件错误: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;值错误: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 自定义异常</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">InvalidAgeError</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;自定义异常：无效年龄&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">InvalidNameError</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;自定义异常：无效姓名&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">validate_user</span><span style="color:#E1E4E8;">(name, age):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;验证用户信息&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> name </span><span style="color:#F97583;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> name.strip():</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> InvalidNameError(</span><span style="color:#9ECBFF;">&quot;姓名不能为空&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> name.replace(</span><span style="color:#9ECBFF;">&quot; &quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">).isalpha():</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> InvalidNameError(</span><span style="color:#9ECBFF;">&quot;姓名只能包含字母和空格&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> age </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> InvalidAgeError(</span><span style="color:#9ECBFF;">&quot;年龄不能为负数&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> age </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">120</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> InvalidAgeError(</span><span style="color:#9ECBFF;">&quot;年龄不能超过120岁&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用自定义异常</span></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    validate_user(</span><span style="color:#9ECBFF;">&quot;张三123&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 无效姓名</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> InvalidNameError </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;姓名验证失败: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> InvalidAgeError </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;年龄验证失败: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 异常链</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">process_data</span><span style="color:#E1E4E8;">(data):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 模拟处理数据</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> data:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;没有提供数据&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> [x </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> data]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 重新抛出异常，保留原始异常信息</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">RuntimeError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;数据处理失败&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> e</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> process_data([])</span></span>
<span class="line"><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;捕获到异常: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;原始异常: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e.__cause__</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 上下文管理器处理异常</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ExceptionHandler</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;上下文管理器，处理特定异常&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, exceptions</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;">,), handler</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.exceptions </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> exceptions</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.handler </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> handler </span><span style="color:#F97583;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.default_handler</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">default_handler</span><span style="color:#E1E4E8;">(self, exc_type, exc_val, exc_tb):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;捕获到异常 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">exc_type.</span><span style="color:#79B8FF;">__name__}</span><span style="color:#9ECBFF;">: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">exc_val</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 抑制异常 (不传播)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__enter__</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__exit__</span><span style="color:#E1E4E8;">(self, exc_type, exc_val, exc_tb):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> exc_type </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">issubclass</span><span style="color:#E1E4E8;">(exc_type, </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.exceptions):</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.handler(exc_type, exc_val, exc_tb)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 不抑制异常</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> ExceptionHandler(</span><span style="color:#FFAB70;">exceptions</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">ZeroDivisionError</span><span style="color:#E1E4E8;">)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;abc&quot;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 这会触发ValueError，但被上下文管理器处理</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> ExceptionHandler(</span><span style="color:#FFAB70;">exceptions</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">FileNotFoundError</span><span style="color:#E1E4E8;">,), </span></span>
<span class="line"><span style="color:#E1E4E8;">                     </span><span style="color:#FFAB70;">handler</span><span style="color:#F97583;">=lambda</span><span style="color:#E1E4E8;"> t, v, tb: </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;文件未找到: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">v</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;missing.txt&quot;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 这会触发FileNotFoundError，但被处理</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br></div></div><h3 id="_4-2-文件操作" tabindex="-1">4.2 文件操作 <a class="header-anchor" href="#_4-2-文件操作" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 基本文件操作</span></span>
<span class="line"><span style="color:#6A737D;"># 写入文件</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;example.txt&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;w&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.write(</span><span style="color:#9ECBFF;">&quot;Hello, World!</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.write(</span><span style="color:#9ECBFF;">&quot;这是第二行文本。</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.write(</span><span style="color:#9ECBFF;">&quot;第三行：Python文件操作演示。</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 读取整个文件</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;example.txt&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    content </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.read()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;文件内容:&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(content)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 逐行读取</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;example.txt&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;逐行读取:&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> line </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(line.strip())  </span><span style="color:#6A737D;"># strip()移除行尾换行符</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 读取所有行到列表</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;example.txt&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    lines </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.readlines()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;行列表:&quot;</span><span style="color:#E1E4E8;">, lines)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># [&#39;Hello, World!\\n&#39;, &#39;这是第二行文本。\\n&#39;, &#39;第三行：Python文件操作演示。\\n&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 移动文件指针</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;example.txt&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 读取前10个字符</span></span>
<span class="line"><span style="color:#E1E4E8;">    first_part </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.read(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;前10个字符:&quot;</span><span style="color:#E1E4E8;">, first_part)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 获取当前位置</span></span>
<span class="line"><span style="color:#E1E4E8;">    position </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.tell()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;当前位置: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">position</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">字节&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 移动到文件开头</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.seek(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;回到开头后读取:&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.readline().strip())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 二进制文件操作</span></span>
<span class="line"><span style="color:#6A737D;"># 写入二进制数据</span></span>
<span class="line"><span style="color:#E1E4E8;">data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">bytes</span><span style="color:#E1E4E8;">([</span><span style="color:#79B8FF;">65</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">66</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">67</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">68</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">69</span><span style="color:#E1E4E8;">])  </span><span style="color:#6A737D;"># ASCII A-E</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;binary.bin&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;wb&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.write(data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 读取二进制数据</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;binary.bin&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;rb&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    binary_content </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.read()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;二进制内容:&quot;</span><span style="color:#E1E4E8;">, binary_content)  </span><span style="color:#6A737D;"># b&#39;ABCDE&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;转换为列表:&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">(binary_content))  </span><span style="color:#6A737D;"># [65, 66, 67, 68, 69]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># CSV文件操作</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> csv</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 写入CSV</span></span>
<span class="line"><span style="color:#E1E4E8;">data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    [</span><span style="color:#9ECBFF;">&quot;姓名&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;年龄&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;城市&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    [</span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;北京&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    [</span><span style="color:#9ECBFF;">&quot;李四&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;上海&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    [</span><span style="color:#9ECBFF;">&quot;王五&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;广州&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;people.csv&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;w&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">newline</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8-sig&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> csvfile:</span></span>
<span class="line"><span style="color:#E1E4E8;">    writer </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> csv.writer(csvfile)</span></span>
<span class="line"><span style="color:#E1E4E8;">    writer.writerows(data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 读取CSV</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;people.csv&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8-sig&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> csvfile:</span></span>
<span class="line"><span style="color:#E1E4E8;">    reader </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> csv.reader(csvfile)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> row </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> reader:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(row)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用DictReader/DictWriter处理带标题的CSV</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;people.csv&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8-sig&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> csvfile:</span></span>
<span class="line"><span style="color:#E1E4E8;">    reader </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> csv.DictReader(csvfile)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> row </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> reader:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">row[</span><span style="color:#9ECBFF;">&#39;姓名&#39;</span><span style="color:#E1E4E8;">]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">住在</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">row[</span><span style="color:#9ECBFF;">&#39;城市&#39;</span><span style="color:#E1E4E8;">]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">，今年</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">row[</span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">岁&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># JSON文件操作</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 写入JSON</span></span>
<span class="line"><span style="color:#E1E4E8;">person </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;北京&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;skills&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;Python&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;JavaScript&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;SQL&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;married&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">False</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;person.json&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;w&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> jsonfile:</span></span>
<span class="line"><span style="color:#E1E4E8;">    json.dump(person, jsonfile, </span><span style="color:#FFAB70;">ensure_ascii</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">indent</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 读取JSON</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;person.json&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> jsonfile:</span></span>
<span class="line"><span style="color:#E1E4E8;">    loaded_person </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> json.load(jsonfile)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;加载的JSON数据:&quot;</span><span style="color:#E1E4E8;">, loaded_person)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 处理大文件 (逐块读取)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">process_large_file</span><span style="color:#E1E4E8;">(filename, chunk_size</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1024</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;处理大文件，避免内存溢出&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(filename, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;utf-8&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            chunk </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">file</span><span style="color:#E1E4E8;">.read(chunk_size)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> chunk:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 处理数据块</span></span>
<span class="line"><span style="color:#E1E4E8;">            process_chunk(chunk)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">process_chunk</span><span style="color:#E1E4E8;">(chunk):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;处理数据块 (示例函数)&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 实际处理逻辑</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;处理了</span><span style="color:#79B8FF;">{len</span><span style="color:#E1E4E8;">(chunk)</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">个字符的块&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br></div></div><h2 id="_5-标准库精华" tabindex="-1">5. 标准库精华 <a class="header-anchor" href="#_5-标准库精华" aria-hidden="true">#</a></h2><h3 id="_5-1-日期与时间" tabindex="-1">5.1 日期与时间 <a class="header-anchor" href="#_5-1-日期与时间" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark has-diff" tabindex="0"><code><span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> datetime </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> datetime, date, time, timedelta, timezone</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> time </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> time_module</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> calendar</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 当前日期和时间</span></span>
<span class="line"><span style="color:#E1E4E8;">now </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.now()</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;当前日期时间:&quot;</span><span style="color:#E1E4E8;">, now)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;当前日期:&quot;</span><span style="color:#E1E4E8;">, now.date())</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;当前时间:&quot;</span><span style="color:#E1E4E8;">, now.time())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建特定日期时间</span></span>
<span class="line"><span style="color:#E1E4E8;">specific_date </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> date(</span><span style="color:#79B8FF;">2023</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 2023年6月15日</span></span>
<span class="line"><span style="color:#E1E4E8;">specific_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time(</span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">45</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 14:30:45</span></span>
<span class="line"><span style="color:#E1E4E8;">specific_datetime </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime(</span><span style="color:#79B8FF;">2023</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">15</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">45</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 日期时间格式化</span></span>
<span class="line"><span style="color:#E1E4E8;">formatted </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now.strftime(</span><span style="color:#9ECBFF;">&quot;%Y-%m-</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;"> %H:%M:%S&quot;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># &quot;2023-06-15 14:30:45&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">formatted_date </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now.strftime(</span><span style="color:#9ECBFF;">&quot;%A, %B </span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">, %Y&quot;</span><span style="color:#E1E4E8;">)   </span><span style="color:#6A737D;"># &quot;Thursday, June 15, 2023&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">formatted_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now.strftime(</span><span style="color:#9ECBFF;">&quot;%I:%M %p&quot;</span><span style="color:#E1E4E8;">)       </span><span style="color:#6A737D;"># &quot;02:30 PM&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从字符串解析日期</span></span>
<span class="line"><span style="color:#E1E4E8;">date_str </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;2023-06-15&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">parsed_date </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.strptime(date_str, </span><span style="color:#9ECBFF;">&quot;%Y-%m-</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">).date()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">datetime_str </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;15/06/2023 14:30:00&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">parsed_datetime </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.strptime(datetime_str, </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">%d</span><span style="color:#9ECBFF;">/%m/%Y %H:%M:%S&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 日期时间计算</span></span>
<span class="line"><span style="color:#E1E4E8;">tomorrow </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> timedelta(</span><span style="color:#FFAB70;">days</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">yesterday </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> timedelta(</span><span style="color:#FFAB70;">days</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">next_week </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> timedelta(</span><span style="color:#FFAB70;">weeks</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">three_hours_later </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> now </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> timedelta(</span><span style="color:#FFAB70;">hours</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 时区处理</span></span>
<span class="line"><span style="color:#E1E4E8;">utc_now </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.now(timezone.utc)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;UTC时间:&quot;</span><span style="color:#E1E4E8;">, utc_now)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建带时区的时间</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> zoneinfo </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> ZoneInfo  </span><span style="color:#6A737D;"># Python 3.9+</span></span>
<span class="line"><span style="color:#E1E4E8;">bj_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.now(ZoneInfo(</span><span style="color:#9ECBFF;">&quot;Asia/Shanghai&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">ny_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.now(ZoneInfo(</span><span style="color:#9ECBFF;">&quot;America/New_York&quot;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 计算时间差</span></span>
<span class="line"><span style="color:#E1E4E8;">start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.now()</span></span>
<span class="line"><span style="color:#6A737D;"># 模拟一些操作</span></span>
<span class="line"><span style="color:#E1E4E8;">time_module.sleep(</span><span style="color:#79B8FF;">1.5</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">end_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> datetime.now()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">time_diff </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> end_time </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;操作耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time_diff.total_seconds()</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 日历功能</span></span>
<span class="line"><span style="color:#E1E4E8;">cal </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> calendar.month(</span><span style="color:#79B8FF;">2023</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 2023年6月的日历</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(cal)</span></span>
<span class="line"><span style="color:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#9ECBFF;">      June 2023</span></span>
<span class="line"><span style="color:#9ECBFF;">Mo Tu We Th Fr Sa Su</span></span>
<span class="line"><span style="color:#9ECBFF;">          1  2  3  4</span></span>
<span class="line"><span style="color:#9ECBFF;"> 5  6  7  8  9 10 11</span></span>
<span class="line"><span style="color:#9ECBFF;">12 13 14 15 16 17 18</span></span>
<span class="line"><span style="color:#9ECBFF;">19 20 21 22 23 24 25</span></span>
<span class="line"><span style="color:#9ECBFF;">26 27 28 29 30</span></span>
<span class="line"><span style="color:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 检查闰年</span></span>
<span class="line"><span style="color:#E1E4E8;">is_leap </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> calendar.isleap(</span><span style="color:#79B8FF;">2024</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># True</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;2024年是闰年吗? </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">is_leap</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取一个月的天数</span></span>
<span class="line"><span style="color:#E1E4E8;">days_in_month </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> calendar.monthrange(</span><span style="color:#79B8FF;">2023</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># (2, 28) - 2023年2月有28天，1号是星期三(2)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;2023年2月有</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">days_in_month[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">]</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">天&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h3 id="_5-2-正则表达式" tabindex="-1">5.2 正则表达式 <a class="header-anchor" href="#_5-2-正则表达式" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> re</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 基本匹配</span></span>
<span class="line"><span style="color:#E1E4E8;">text </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;我的邮箱是 user@example.com，电话是 13812345678&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">pattern </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">r</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">\\b[A-Za-z0-9._%+-]</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">@</span><span style="color:#79B8FF;">[A-Za-z0-9.-]</span><span style="color:#F97583;">+</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#79B8FF;">[A-Z|a-z]</span><span style="color:#F97583;">{2,}</span><span style="color:#79B8FF;">\\b</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.search(pattern, text)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> match:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;找到邮箱:&quot;</span><span style="color:#E1E4E8;">, match.group())  </span><span style="color:#6A737D;"># user@example.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 多个匹配</span></span>
<span class="line"><span style="color:#E1E4E8;">phone_pattern </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">r</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#DBEDFF;">1</span><span style="color:#79B8FF;">[3-9]\\d</span><span style="color:#F97583;">{9}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 中国大陆手机号</span></span>
<span class="line"><span style="color:#E1E4E8;">matches </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.findall(phone_pattern, text)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;找到的电话号码:&quot;</span><span style="color:#E1E4E8;">, matches)  </span><span style="color:#6A737D;"># [&#39;13812345678&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 替换</span></span>
<span class="line"><span style="color:#E1E4E8;">masked_text </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.sub(phone_pattern, </span><span style="color:#9ECBFF;">&quot;138****5678&quot;</span><span style="color:#E1E4E8;">, text)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;脱敏后的文本:&quot;</span><span style="color:#E1E4E8;">, masked_text)</span></span>
<span class="line"><span style="color:#6A737D;"># 我的邮箱是 user@example.com，电话是 138****5678</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 分组</span></span>
<span class="line"><span style="color:#E1E4E8;">url_pattern </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">r</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">(</span><span style="color:#DBEDFF;">https</span><span style="color:#F97583;">?</span><span style="color:#DBEDFF;">://</span><span style="color:#79B8FF;">)</span><span style="color:#F97583;">?</span><span style="color:#79B8FF;">(</span><span style="color:#DBEDFF;">www</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#79B8FF;">)</span><span style="color:#F97583;">?</span><span style="color:#79B8FF;">([a-zA-Z0-9-]</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">)</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#79B8FF;">([a-z]</span><span style="color:#F97583;">{2,}</span><span style="color:#79B8FF;">)(</span><span style="color:#DBEDFF;">/</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">*</span><span style="color:#79B8FF;">)</span><span style="color:#F97583;">?</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">url </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;https://www.example.com/path/to/page?query=123&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.search(url_pattern, url)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> match:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;完整匹配:&quot;</span><span style="color:#E1E4E8;">, match.group(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># https://www.example.com/path/to/page?query=123</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;协议:&quot;</span><span style="color:#E1E4E8;">, match.group(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">))     </span><span style="color:#6A737D;"># https://</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;www:&quot;</span><span style="color:#E1E4E8;">, match.group(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">))      </span><span style="color:#6A737D;"># www.</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;域名:&quot;</span><span style="color:#E1E4E8;">, match.group(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">))     </span><span style="color:#6A737D;"># example</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;顶级域名:&quot;</span><span style="color:#E1E4E8;">, match.group(</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># com</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;路径:&quot;</span><span style="color:#E1E4E8;">, match.group(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">))     </span><span style="color:#6A737D;"># /path/to/page?query=123</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 预编译模式 (提高效率)</span></span>
<span class="line"><span style="color:#E1E4E8;">email_pattern </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.compile(</span><span style="color:#F97583;">r</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">\\b[A-Za-z0-9._%+-]</span><span style="color:#F97583;">+</span><span style="color:#DBEDFF;">@</span><span style="color:#79B8FF;">[A-Za-z0-9.-]</span><span style="color:#F97583;">+</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#79B8FF;">[A-Z|a-z]</span><span style="color:#F97583;">{2,}</span><span style="color:#79B8FF;">\\b</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">text1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;联系我: alice@example.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">text2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;发送到: bob@test.org&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(email_pattern.findall(text1))  </span><span style="color:#6A737D;"># [&#39;alice@example.com&#39;]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(email_pattern.findall(text2))  </span><span style="color:#6A737D;"># [&#39;bob@test.org&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 多行模式</span></span>
<span class="line"><span style="color:#E1E4E8;">multiline_text </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#9ECBFF;">姓名: 张三</span></span>
<span class="line"><span style="color:#9ECBFF;">邮箱: zhangsan@example.com</span></span>
<span class="line"><span style="color:#9ECBFF;">电话: 13800138000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">姓名: 李四</span></span>
<span class="line"><span style="color:#9ECBFF;">邮箱: lisi@example.com</span></span>
<span class="line"><span style="color:#9ECBFF;">电话: 13900139000</span></span>
<span class="line"><span style="color:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用re.MULTILINE标志</span></span>
<span class="line"><span style="color:#E1E4E8;">pattern </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.compile(</span><span style="color:#F97583;">r</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#DBEDFF;">姓名: </span><span style="color:#79B8FF;">(.</span><span style="color:#F97583;">+?</span><span style="color:#79B8FF;">)</span><span style="color:#85E89D;font-weight:bold;">\\n</span><span style="color:#DBEDFF;">邮箱: </span><span style="color:#79B8FF;">(.</span><span style="color:#F97583;">+?</span><span style="color:#79B8FF;">)</span><span style="color:#85E89D;font-weight:bold;">\\n</span><span style="color:#DBEDFF;">电话: </span><span style="color:#79B8FF;">(.</span><span style="color:#F97583;">+?</span><span style="color:#79B8FF;">)</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, re.</span><span style="color:#79B8FF;">MULTILINE</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">matches </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pattern.findall(multiline_text)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> name, email, phone </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> matches:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;姓名: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">name</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, 邮箱: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">email</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, 电话: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">phone</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Unicode支持</span></span>
<span class="line"><span style="color:#E1E4E8;">chinese_text </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;你好，世界！Hello, World! 12345&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">chinese_pattern </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">r</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">[\\u4e00-\\u9fff]</span><span style="color:#F97583;">+</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 匹配中文字符</span></span>
<span class="line"><span style="color:#E1E4E8;">matches </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> re.findall(chinese_pattern, chinese_text)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;中文匹配:&quot;</span><span style="color:#E1E4E8;">, matches)  </span><span style="color:#6A737D;"># [&#39;你好&#39;, &#39;世界&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 常用正则表达式模式</span></span>
<span class="line"><span style="color:#6A737D;"># 邮箱: r&quot;\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># 电话(中国大陆): r&quot;1[3-9]\\d{9}&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># URL: r&quot;https?://(?:[-\\w.]|(?:%[\\da-fA-F]{2}))+&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># IP地址: r&quot;\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\b&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># 日期(YYYY-MM-DD): r&quot;\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># 身份证号(简化): r&quot;\\d{17}[\\dXx]&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h3 id="_5-3-并发与并行" tabindex="-1">5.3 并发与并行 <a class="header-anchor" href="#_5-3-并发与并行" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> threading</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> multiprocessing</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> concurrent.futures</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> asyncio</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> time</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> requests</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 线程 (适用于I/O密集型任务)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fetch_url</span><span style="color:#E1E4E8;">(url):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;获取URL内容&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;开始获取: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">url</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    response </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> requests.get(url, </span><span style="color:#FFAB70;">timeout</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;完成获取: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">url</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, 状态码: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">response.status_code</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> response.text</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">urls </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;https://example.com&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;https://httpbin.org/get&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;https://jsonplaceholder.typicode.com/posts/1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 1. 使用threading</span></span>
<span class="line"><span style="color:#E1E4E8;">threads </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#E1E4E8;">results </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">thread_fetch</span><span style="color:#E1E4E8;">(url):</span></span>
<span class="line"><span style="color:#E1E4E8;">    results[url] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fetch_url(url)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> url </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> urls:</span></span>
<span class="line"><span style="color:#E1E4E8;">    thread </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> threading.Thread(</span><span style="color:#FFAB70;">target</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">thread_fetch, </span><span style="color:#FFAB70;">args</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(url,))</span></span>
<span class="line"><span style="color:#E1E4E8;">    threads.append(thread)</span></span>
<span class="line"><span style="color:#E1E4E8;">    thread.start()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 等待所有线程完成</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> thread </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> threads:</span></span>
<span class="line"><span style="color:#E1E4E8;">    thread.join()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;线程总耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time.time() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 2. 使用concurrent.futures (更简洁)</span></span>
<span class="line"><span style="color:#E1E4E8;">start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> concurrent.futures.ThreadPoolExecutor(</span><span style="color:#FFAB70;">max_workers</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> executor:</span></span>
<span class="line"><span style="color:#E1E4E8;">    future_to_url </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {executor.submit(fetch_url, url): url </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> url </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> urls}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> future </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> concurrent.futures.as_completed(future_to_url):</span></span>
<span class="line"><span style="color:#E1E4E8;">        url </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> future_to_url[future]</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> future.result()</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">url</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 获取成功，长度: </span><span style="color:#79B8FF;">{len</span><span style="color:#E1E4E8;">(data)</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> exc:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">url</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 生成异常: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">exc</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;ThreadPoolExecutor总耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time.time() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 进程 (适用于CPU密集型任务)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cpu_intensive_task</span><span style="color:#E1E4E8;">(n):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;CPU密集型任务：计算大数的和&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;开始计算 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">n</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 项&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    total </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(i </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">range</span><span style="color:#E1E4E8;">(n))</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;完成计算 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">n</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 项&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> total</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">numbers </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">10000000</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">20000000</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30000000</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 1. 使用multiprocessing</span></span>
<span class="line"><span style="color:#E1E4E8;">processes </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#E1E4E8;">results </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">process_task</span><span style="color:#E1E4E8;">(n):</span></span>
<span class="line"><span style="color:#E1E4E8;">    results.append(cpu_intensive_task(n))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> n </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> numbers:</span></span>
<span class="line"><span style="color:#E1E4E8;">    process </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> multiprocessing.Process(</span><span style="color:#FFAB70;">target</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">process_task, </span><span style="color:#FFAB70;">args</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(n,))</span></span>
<span class="line"><span style="color:#E1E4E8;">    processes.append(process)</span></span>
<span class="line"><span style="color:#E1E4E8;">    process.start()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 等待所有进程完成</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> process </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> processes:</span></span>
<span class="line"><span style="color:#E1E4E8;">    process.join()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;进程总耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time.time() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;进程结果:&quot;</span><span style="color:#E1E4E8;">, results)  </span><span style="color:#6A737D;"># 注意：进程间内存不共享，这样无法获取结果</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 2. 使用multiprocessing.Pool (更好)</span></span>
<span class="line"><span style="color:#E1E4E8;">start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> multiprocessing.Pool(</span><span style="color:#FFAB70;">processes</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> pool:</span></span>
<span class="line"><span style="color:#E1E4E8;">    results </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pool.map(cpu_intensive_task, numbers)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;Pool总耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time.time() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Pool结果:&quot;</span><span style="color:#E1E4E8;">, results)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 3. 使用concurrent.futures.ProcessPoolExecutor</span></span>
<span class="line"><span style="color:#E1E4E8;">start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> concurrent.futures.ProcessPoolExecutor(</span><span style="color:#FFAB70;">max_workers</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> executor:</span></span>
<span class="line"><span style="color:#E1E4E8;">    future_to_num </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {executor.submit(cpu_intensive_task, n): n </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> n </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> numbers}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> future </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> concurrent.futures.as_completed(future_to_num):</span></span>
<span class="line"><span style="color:#E1E4E8;">        n </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> future_to_num[future]</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> future.result()</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;任务 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">n</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 完成，结果: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">result</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> exc:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;任务 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">n</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 生成异常: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">exc</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;ProcessPoolExecutor总耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time.time() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 异步IO (asyncio) - Python 3.5+</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">async_fetch_url</span><span style="color:#E1E4E8;">(session, url):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;异步获取URL内容&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;开始异步获取: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">url</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> session.get(url) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> response:</span></span>
<span class="line"><span style="color:#E1E4E8;">        text </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> response.text()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;完成异步获取: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">url</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, 状态码: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">response.status</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> text</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">async_main</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> aiohttp</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> aiohttp.ClientSession() </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> session:</span></span>
<span class="line"><span style="color:#E1E4E8;">        tasks </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [async_fetch_url(session, url) </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> url </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> urls]</span></span>
<span class="line"><span style="color:#E1E4E8;">        results </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> asyncio.gather(</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">tasks)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> results</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#E1E4E8;">async_results </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> asyncio.run(async_main())</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;异步IO总耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time.time() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 混合使用 - 实际应用中的模式</span></span>
<span class="line"><span style="color:#6A737D;"># 例如：Web爬虫同时使用线程池(网络请求)和进程池(数据处理)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">process_data</span><span style="color:#E1E4E8;">(data):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;处理获取到的数据 (CPU密集型)&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 模拟数据处理</span></span>
<span class="line"><span style="color:#E1E4E8;">    time.sleep(</span><span style="color:#79B8FF;">0.1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">mixed_task</span><span style="color:#E1E4E8;">(url):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;混合任务：获取URL内容，然后处理&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    content </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> fetch_url(url)</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> process_data(content)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 主函数：使用线程池获取数据，然后使用进程池处理</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">mixed_approach</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 步骤1: 使用线程池获取所有URL内容</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> concurrent.futures.ThreadPoolExecutor(</span><span style="color:#FFAB70;">max_workers</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> thread_executor:</span></span>
<span class="line"><span style="color:#E1E4E8;">        futures </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [thread_executor.submit(fetch_url, url) </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> url </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> urls]</span></span>
<span class="line"><span style="color:#E1E4E8;">        contents </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [future.result() </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> future </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> concurrent.futures.as_completed(futures)]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;获取数据完成，耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time.time() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 步骤2: 使用进程池处理数据</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> concurrent.futures.ProcessPoolExecutor(</span><span style="color:#FFAB70;">max_workers</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> process_executor:</span></span>
<span class="line"><span style="color:#E1E4E8;">        futures </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [process_executor.submit(process_data, content) </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> content </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> contents]</span></span>
<span class="line"><span style="color:#E1E4E8;">        results </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [future.result() </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> future </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> concurrent.futures.as_completed(futures)]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;混合任务总耗时: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">time.time() </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> results</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">mixed_results </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> mixed_approach()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br></div></div><h2 id="_6-现代python最佳实践" tabindex="-1">6. 现代Python最佳实践 <a class="header-anchor" href="#_6-现代python最佳实践" aria-hidden="true">#</a></h2><h3 id="_6-1-虚拟环境与依赖管理" tabindex="-1">6.1 虚拟环境与依赖管理 <a class="header-anchor" href="#_6-1-虚拟环境与依赖管理" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 创建虚拟环境</span></span>
<span class="line"><span style="color:#B392F0;">python</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">venv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.venv</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 激活虚拟环境</span></span>
<span class="line"><span style="color:#6A737D;"># Windows (cmd):</span></span>
<span class="line"><span style="color:#B392F0;">.venv\\Scripts\\activate</span></span>
<span class="line"><span style="color:#6A737D;"># Windows (PowerShell):</span></span>
<span class="line"><span style="color:#B392F0;">.venv\\Scripts\\Activate.ps1</span></span>
<span class="line"><span style="color:#6A737D;"># Linux/macOS:</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.venv/bin/activate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 验证激活</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">.venv</span><span style="color:#E1E4E8;">) $ which python</span></span>
<span class="line"><span style="color:#6A737D;"># /path/to/project/.venv/bin/python</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装包</span></span>
<span class="line"><span style="color:#B392F0;">pip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">requests</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pandas</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">numpy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 生成依赖列表</span></span>
<span class="line"><span style="color:#B392F0;">pip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">freeze</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">requirements.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从依赖列表安装</span></span>
<span class="line"><span style="color:#B392F0;">pip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">requirements.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 现代方式: pyproject.toml (PEP 621)</span></span>
<span class="line"><span style="color:#6A737D;"># [project]</span></span>
<span class="line"><span style="color:#6A737D;"># name = &quot;my-project&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># version = &quot;0.1.0&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># dependencies = [</span></span>
<span class="line"><span style="color:#6A737D;">#     &quot;requests&gt;=2.31.0&quot;,</span></span>
<span class="line"><span style="color:#6A737D;">#     &quot;pandas&gt;=2.0.0&quot;,</span></span>
<span class="line"><span style="color:#6A737D;">#     &quot;numpy&gt;=1.24.0&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># ]</span></span>
<span class="line"><span style="color:#6A737D;"># [project.optional-dependencies]</span></span>
<span class="line"><span style="color:#6A737D;"># dev = [&quot;pytest&quot;, &quot;black&quot;, &quot;mypy&quot;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装项目及其依赖</span></span>
<span class="line"><span style="color:#B392F0;">pip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 仅安装开发依赖</span></span>
<span class="line"><span style="color:#B392F0;">pip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;.[dev]&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="_6-2-代码风格与静态检查" tabindex="-1">6.2 代码风格与静态检查 <a class="header-anchor" href="#_6-2-代码风格与静态检查" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># PEP 8 风格指南示例</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> os</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> sys</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> datetime </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> datetime</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> typing </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> List, Dict, Union, Optional, Any, Tuple</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> requests</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> pandas </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> pd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 常量 (全大写+下划线)</span></span>
<span class="line"><span style="color:#79B8FF;">MAX_RETRIES</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#79B8FF;">DEFAULT_TIMEOUT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5.0</span></span>
<span class="line"><span style="color:#79B8FF;">LOG_FILE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;application.log&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">DataProcessor</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;处理数据的类&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, source: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">, output_dir: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;output&quot;</span><span style="color:#E1E4E8;">) -&gt; </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#9ECBFF;">        初始化数据处理器</span></span>
<span class="line"><span style="color:#9ECBFF;">        </span></span>
<span class="line"><span style="color:#9ECBFF;">        Args:</span></span>
<span class="line"><span style="color:#9ECBFF;">            source: 数据源路径</span></span>
<span class="line"><span style="color:#9ECBFF;">            output_dir: 输出目录，默认为&quot;output&quot;</span></span>
<span class="line"><span style="color:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.source </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> source</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.output_dir </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> output_dir</span></span>
<span class="line"><span style="color:#E1E4E8;">        os.makedirs(output_dir, </span><span style="color:#FFAB70;">exist_ok</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">load_data</span><span style="color:#E1E4E8;">(self) -&gt; pd.DataFrame:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;加载数据&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.source.endswith(</span><span style="color:#9ECBFF;">&quot;.csv&quot;</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> pd.read_csv(</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.source)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.source.endswith(</span><span style="color:#9ECBFF;">&quot;.json&quot;</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> pd.read_json(</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.source)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;不支持的文件格式: </span><span style="color:#79B8FF;">{self</span><span style="color:#E1E4E8;">.source</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;加载数据失败: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">raise</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">process</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        self, </span></span>
<span class="line"><span style="color:#E1E4E8;">        columns: Optional[List[</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">]] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        filter_condition: Optional[Dict[</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">, Any]] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span></span>
<span class="line"><span style="color:#E1E4E8;">    ) -&gt; pd.DataFrame:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#9ECBFF;">        处理数据</span></span>
<span class="line"><span style="color:#9ECBFF;">        </span></span>
<span class="line"><span style="color:#9ECBFF;">        Args:</span></span>
<span class="line"><span style="color:#9ECBFF;">            columns: 要保留的列名列表，None表示保留所有列</span></span>
<span class="line"><span style="color:#9ECBFF;">            filter_condition: 过滤条件，格式为{column: value}</span></span>
<span class="line"><span style="color:#9ECBFF;">        </span></span>
<span class="line"><span style="color:#9ECBFF;">        Returns:</span></span>
<span class="line"><span style="color:#9ECBFF;">            处理后的DataFrame</span></span>
<span class="line"><span style="color:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        df </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.load_data()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 选择列</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> columns:</span></span>
<span class="line"><span style="color:#E1E4E8;">            df </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[columns]</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 过滤行</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> filter_condition:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> column, value </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> filter_condition.items():</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> column </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> df.columns:</span></span>
<span class="line"><span style="color:#E1E4E8;">                    df </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[df[column] </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> value]</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> df</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">save</span><span style="color:#E1E4E8;">(self, df: pd.DataFrame, filename: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">) -&gt; </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;保存处理后的数据&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        output_path </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> os.path.join(</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.output_dir, filename)</span></span>
<span class="line"><span style="color:#E1E4E8;">        df.to_csv(output_path, </span><span style="color:#FFAB70;">index</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> output_path</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 类型提示示例</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">calculate_stats</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    data: List[Union[</span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">]],</span></span>
<span class="line"><span style="color:#E1E4E8;">    weights: Optional[List[</span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">]] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span></span>
<span class="line"><span style="color:#E1E4E8;">) -&gt; Dict[</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">]:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;计算统计数据&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> data:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;数据列表不能为空&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    total </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(data)</span></span>
<span class="line"><span style="color:#E1E4E8;">    count </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(data)</span></span>
<span class="line"><span style="color:#E1E4E8;">    average </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> total </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> count</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;total&quot;</span><span style="color:#E1E4E8;">: total,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;count&quot;</span><span style="color:#E1E4E8;">: count,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;average&quot;</span><span style="color:#E1E4E8;">: average,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;min&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">min</span><span style="color:#E1E4E8;">(data),</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;max&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">max</span><span style="color:#E1E4E8;">(data)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 加权平均</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> weights </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(weights) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> count:</span></span>
<span class="line"><span style="color:#E1E4E8;">        weighted_sum </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(d </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> w </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> d, w </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">zip</span><span style="color:#E1E4E8;">(data, weights))</span></span>
<span class="line"><span style="color:#E1E4E8;">        total_weight </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(weights)</span></span>
<span class="line"><span style="color:#E1E4E8;">        result[</span><span style="color:#9ECBFF;">&quot;weighted_average&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> weighted_sum </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> total_weight</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 错误处理最佳实践</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">safe_divide</span><span style="color:#E1E4E8;">(a: </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">, b: </span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">) -&gt; Optional[</span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">]:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;安全除法，处理除零错误&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> a </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> b</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ZeroDivisionError</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;警告: 除零错误，返回None&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">TypeError</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;警告: 类型错误，参数必须是数字&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;未知错误: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 上下文管理器最佳实践</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> contextlib </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> contextmanager</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@contextmanager</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">managed_resource</span><span style="color:#E1E4E8;">(resource_id: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;安全管理资源的上下文管理器&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;获取资源: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">resource_id</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    resource </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;id&quot;</span><span style="color:#E1E4E8;">: resource_id, </span><span style="color:#9ECBFF;">&quot;status&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;active&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">yield</span><span style="color:#E1E4E8;"> resource</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;资源 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">resource_id</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;"> 处理时出错: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">finally</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;释放资源: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">resource_id</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        resource[</span><span style="color:#9ECBFF;">&quot;status&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;released&quot;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__name__</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;__main__&quot;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        processor </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> DataProcessor(</span><span style="color:#9ECBFF;">&quot;data.csv&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        filtered_data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> processor.process(</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#FFAB70;">columns</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#FFAB70;">filter_condition</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;北京&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">        )</span></span>
<span class="line"><span style="color:#E1E4E8;">        output_file </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> processor.save(filtered_data, </span><span style="color:#9ECBFF;">&quot;beijing_users.csv&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;处理完成，结果保存至: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">output_file</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> managed_resource(</span><span style="color:#9ECBFF;">&quot;database_connection&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> db:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 使用数据库连接</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;使用资源: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">db</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 模拟操作</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;error&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> db[</span><span style="color:#9ECBFF;">&quot;id&quot;</span><span style="color:#E1E4E8;">]:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;模拟错误&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Exception</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;主程序出错: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">e</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        sys.exit(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br></div></div><h3 id="_6-3-测试与调试" tabindex="-1">6.3 测试与调试 <a class="header-anchor" href="#_6-3-测试与调试" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># test_calculator.py</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> pytest</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> unittest.mock </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> patch, MagicMock</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> calculator </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> add, subtract, multiply, divide, Calculator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TestBasicOperations</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试基本数学运算&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_add</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试加法&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> add(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> add(</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> add(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_subtract</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试减法&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> subtract(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> subtract(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> subtract(</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_multiply</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试乘法&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> multiply(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> multiply(</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">6</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> multiply(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_divide</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试除法&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> divide(</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> divide(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2.5</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> divide(</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 测试除零错误</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> pytest.raises(</span><span style="color:#79B8FF;">ValueError</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">match</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;不能除以零&quot;</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">            divide(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TestCalculatorClass</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试Calculator类&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup_method</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;每个测试方法前运行&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.calc </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Calculator()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_calculator_add</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试Calculator的add方法&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.calc.add(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_calculator_history</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试操作历史&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.calc.add(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.calc.subtract(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        history </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.calc.get_history()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(history) </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> history[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">][</span><span style="color:#9ECBFF;">&quot;operation&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;add&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> history[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">][</span><span style="color:#9ECBFF;">&quot;result&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> history[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">][</span><span style="color:#9ECBFF;">&quot;operation&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;subtract&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> history[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">][</span><span style="color:#9ECBFF;">&quot;result&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@patch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;calculator.requests.get&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_calculator_fetch_data</span><span style="color:#E1E4E8;">(self, mock_get):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;测试使用mock的网络请求&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 配置mock</span></span>
<span class="line"><span style="color:#E1E4E8;">        mock_response </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> MagicMock()</span></span>
<span class="line"><span style="color:#E1E4E8;">        mock_response.json.return_value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span><span style="color:#9ECBFF;">&quot;result&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">42</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">        mock_get.return_value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> mock_response</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 调用方法</span></span>
<span class="line"><span style="color:#E1E4E8;">        result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.calc.fetch_data(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 验证结果</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> result </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">42</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># 验证mock被正确调用</span></span>
<span class="line"><span style="color:#E1E4E8;">        mock_get.assert_called_once_with(</span><span style="color:#9ECBFF;">&quot;https://api.example.com/data/1&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># conftest.py (共享fixture)</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> pytest</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> tempfile</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@pytest.fixture</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">temp_file</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;创建临时文件的fixture&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> tempfile.NamedTemporaryFile(</span><span style="color:#FFAB70;">delete</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> f:</span></span>
<span class="line"><span style="color:#E1E4E8;">        f.write(</span><span style="color:#F97583;">b</span><span style="color:#9ECBFF;">&quot;测试内容&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        file_path </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> f.name</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">yield</span><span style="color:#E1E4E8;"> file_path</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 清理</span></span>
<span class="line"><span style="color:#E1E4E8;">    os.unlink(file_path)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@pytest.fixture</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sample_data</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;提供示例数据的fixture&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;北京&quot;</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;李四&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;上海&quot;</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;王五&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;city&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;广州&quot;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># test_file_operations.py</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_read_file</span><span style="color:#E1E4E8;">(temp_file):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;使用fixture测试文件读取&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">open</span><span style="color:#E1E4E8;">(temp_file, </span><span style="color:#9ECBFF;">&#39;r&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">encoding</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;utf-8&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> f:</span></span>
<span class="line"><span style="color:#E1E4E8;">        content </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> f.read()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> content </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;测试内容&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test_process_data</span><span style="color:#E1E4E8;">(sample_data):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;使用fixture测试数据处理&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    names </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [item[</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> sample_data]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> names </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;张三&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;李四&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;王五&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    avg_age </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sum</span><span style="color:#E1E4E8;">(item[</span><span style="color:#9ECBFF;">&quot;age&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> sample_data) </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">len</span><span style="color:#E1E4E8;">(sample_data)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">assert</span><span style="color:#E1E4E8;"> avg_age </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">27.666666666666668</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 调试技巧</span></span>
<span class="line"><span style="color:#6A737D;"># 1. 使用logging</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> logging</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">logging.basicConfig(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">level</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">logging.</span><span style="color:#79B8FF;">DEBUG</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">format</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">%(asctime)s</span><span style="color:#9ECBFF;"> - </span><span style="color:#79B8FF;">%(name)s</span><span style="color:#9ECBFF;"> - </span><span style="color:#79B8FF;">%(levelname)s</span><span style="color:#9ECBFF;"> - </span><span style="color:#79B8FF;">%(message)s</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">handlers</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span></span>
<span class="line"><span style="color:#E1E4E8;">        logging.FileHandler(</span><span style="color:#9ECBFF;">&quot;debug.log&quot;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">        logging.StreamHandler()</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">logger </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> logging.getLogger(</span><span style="color:#79B8FF;">__name__</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">complex_function</span><span style="color:#E1E4E8;">(x, y):</span></span>
<span class="line"><span style="color:#E1E4E8;">    logger.debug(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;开始执行，参数: x=</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">x</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">, y=</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">y</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> x </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> y</span></span>
<span class="line"><span style="color:#E1E4E8;">    logger.debug(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;计算结果: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">result</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 2. 使用pdb (Python调试器)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">debug_me</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    a </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">    b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> pdb; pdb.set_trace()  </span><span style="color:#6A737D;"># 程序会在此暂停，进入交互式调试</span></span>
<span class="line"><span style="color:#E1E4E8;">    c </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> a </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> b</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> c</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 3. 使用装饰器跟踪函数执行</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> functools </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> wraps</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">trace</span><span style="color:#E1E4E8;">(func):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">@wraps</span><span style="color:#E1E4E8;">(func)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">wrapper</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">args, </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">kwargs):</span></span>
<span class="line"><span style="color:#E1E4E8;">        args_repr </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">repr</span><span style="color:#E1E4E8;">(a) </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> a </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> args]</span></span>
<span class="line"><span style="color:#E1E4E8;">        kwargs_repr </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">k</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">=</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">v</span><span style="color:#F97583;">!r</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> k, v </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> kwargs.items()]</span></span>
<span class="line"><span style="color:#E1E4E8;">        signature </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;, &quot;</span><span style="color:#E1E4E8;">.join(args_repr </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> kwargs_repr)</span></span>
<span class="line"><span style="color:#E1E4E8;">        logger.debug(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;调用 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">func.</span><span style="color:#79B8FF;">__name__}</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">signature</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        start_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#E1E4E8;">        result </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> func(</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">args, </span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">kwargs)</span></span>
<span class="line"><span style="color:#E1E4E8;">        end_time </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> time.time()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        logger.debug(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">func.</span><span style="color:#79B8FF;">__name__}</span><span style="color:#9ECBFF;"> 返回 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">result</span><span style="color:#F97583;">!r</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">，耗时 </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">end_time </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> start_time</span><span style="color:#F97583;">:.4f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">秒&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> result</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> wrapper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@trace</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">slow_operation</span><span style="color:#E1E4E8;">(n):</span></span>
<span class="line"><span style="color:#E1E4E8;">    time.sleep(n)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> n </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 4. 内存分析</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> tracemalloc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">tracemalloc.start()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ... 执行代码 ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">snapshot </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> tracemalloc.take_snapshot()</span></span>
<span class="line"><span style="color:#E1E4E8;">top_stats </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> snapshot.statistics(</span><span style="color:#9ECBFF;">&#39;lineno&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;[ 顶部10行内存使用 ]&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> stat </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> top_stats[:</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">]:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(stat)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br></div></div><h2 id="_7-web开发基础" tabindex="-1">7. Web开发基础 <a class="header-anchor" href="#_7-web开发基础" aria-hidden="true">#</a></h2><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># Flask示例 (轻量级Web框架)</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> flask </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Flask, request, jsonify, render_template</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> flask_sqlalchemy </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> SQLAlchemy</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> datetime </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> datetime</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">app </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Flask(</span><span style="color:#79B8FF;">__name__</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">app.config[</span><span style="color:#9ECBFF;">&#39;SQLALCHEMY_DATABASE_URI&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;sqlite:///blog.db&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">app.config[</span><span style="color:#9ECBFF;">&#39;SQLALCHEMY_TRACK_MODIFICATIONS&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">False</span></span>
<span class="line"><span style="color:#E1E4E8;">db </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> SQLAlchemy(app)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 模型定义</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Post</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">db</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Model</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> db.Column(db.Integer, </span><span style="color:#FFAB70;">primary_key</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    title </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> db.Column(db.String(</span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">), </span><span style="color:#FFAB70;">nullable</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    content </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> db.Column(db.Text, </span><span style="color:#FFAB70;">nullable</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    created_at </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> db.Column(db.DateTime, </span><span style="color:#FFAB70;">default</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">datetime.utcnow)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">to_dict</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;id&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.id,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;title&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.title,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;content&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.content,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;created_at&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.created_at.isoformat()</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建数据库表</span></span>
<span class="line"><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> app.app_context():</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.create_all()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 路由</span></span>
<span class="line"><span style="color:#B392F0;">@app.route</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">home</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    posts </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Post.query.order_by(Post.created_at.desc()).all()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> render_template(</span><span style="color:#9ECBFF;">&#39;index.html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">posts</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">posts)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.route</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/posts&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">methods</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&#39;GET&#39;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_posts</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    posts </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Post.query.order_by(Post.created_at.desc()).all()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> jsonify([post.to_dict() </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> post </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> posts])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.route</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/posts&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">methods</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&#39;POST&#39;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">create_post</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> request.get_json()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> data </span><span style="color:#F97583;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;title&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> data </span><span style="color:#F97583;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;content&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> data:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> jsonify({</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;标题和内容是必需的&#39;</span><span style="color:#E1E4E8;">}), </span><span style="color:#79B8FF;">400</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    post </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Post(</span><span style="color:#FFAB70;">title</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">data[</span><span style="color:#9ECBFF;">&#39;title&#39;</span><span style="color:#E1E4E8;">], </span><span style="color:#FFAB70;">content</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">data[</span><span style="color:#9ECBFF;">&#39;content&#39;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.session.add(post)</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.session.commit()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> jsonify(post.to_dict()), </span><span style="color:#79B8FF;">201</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.route</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/posts/&lt;int:post_id&gt;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">methods</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&#39;GET&#39;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_post</span><span style="color:#E1E4E8;">(post_id):</span></span>
<span class="line"><span style="color:#E1E4E8;">    post </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Post.query.get_or_404(post_id)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> jsonify(post.to_dict())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.route</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/posts/&lt;int:post_id&gt;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">methods</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&#39;PUT&#39;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">update_post</span><span style="color:#E1E4E8;">(post_id):</span></span>
<span class="line"><span style="color:#E1E4E8;">    post </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Post.query.get_or_404(post_id)</span></span>
<span class="line"><span style="color:#E1E4E8;">    data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> request.get_json()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;title&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> data:</span></span>
<span class="line"><span style="color:#E1E4E8;">        post.title </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> data[</span><span style="color:#9ECBFF;">&#39;title&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;content&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> data:</span></span>
<span class="line"><span style="color:#E1E4E8;">        post.content </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> data[</span><span style="color:#9ECBFF;">&#39;content&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    db.session.commit()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> jsonify(post.to_dict())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.route</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/posts/&lt;int:post_id&gt;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">methods</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&#39;DELETE&#39;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">delete_post</span><span style="color:#E1E4E8;">(post_id):</span></span>
<span class="line"><span style="color:#E1E4E8;">    post </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Post.query.get_or_404(post_id)</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.session.delete(post)</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.session.commit()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">204</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 错误处理</span></span>
<span class="line"><span style="color:#B392F0;">@app.errorhandler</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">404</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">not_found_error</span><span style="color:#E1E4E8;">(error):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> jsonify({</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;未找到资源&#39;</span><span style="color:#E1E4E8;">}), </span><span style="color:#79B8FF;">404</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.errorhandler</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">500</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">internal_error</span><span style="color:#E1E4E8;">(error):</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.session.rollback()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> jsonify({</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;内部服务器错误&#39;</span><span style="color:#E1E4E8;">}), </span><span style="color:#79B8FF;">500</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__name__</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;__main__&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    app.run(</span><span style="color:#FFAB70;">debug</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Django风格视图示例 (功能视图)</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> django.http </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> JsonResponse</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> django.views.decorators.csrf </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> csrf_exempt</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> django.views.decorators.http </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> require_http_methods</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> .models </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Product</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@csrf_exempt</span></span>
<span class="line"><span style="color:#B392F0;">@require_http_methods</span><span style="color:#E1E4E8;">([</span><span style="color:#9ECBFF;">&quot;GET&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;POST&quot;</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">product_list</span><span style="color:#E1E4E8;">(request):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> request.method </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;GET&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        products </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Product.objects.all()</span></span>
<span class="line"><span style="color:#E1E4E8;">        data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [{</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;id&#39;</span><span style="color:#E1E4E8;">: p.id,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;name&#39;</span><span style="color:#E1E4E8;">: p.name,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;price&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(p.price),</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">&#39;stock&#39;</span><span style="color:#E1E4E8;">: p.stock</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> p </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> products]</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> JsonResponse(data, </span><span style="color:#FFAB70;">safe</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">elif</span><span style="color:#E1E4E8;"> request.method </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;POST&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> json.loads(request.body)</span></span>
<span class="line"><span style="color:#E1E4E8;">            product </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Product.objects.create(</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#FFAB70;">name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">data[</span><span style="color:#9ECBFF;">&#39;name&#39;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#FFAB70;">price</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">data[</span><span style="color:#9ECBFF;">&#39;price&#39;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#FFAB70;">stock</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">data.get(</span><span style="color:#9ECBFF;">&#39;stock&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            )</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> JsonResponse({</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&#39;id&#39;</span><span style="color:#E1E4E8;">: product.id,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&#39;name&#39;</span><span style="color:#E1E4E8;">: product.name,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&#39;price&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(product.price),</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">&#39;stock&#39;</span><span style="color:#E1E4E8;">: product.stock</span></span>
<span class="line"><span style="color:#E1E4E8;">            }, </span><span style="color:#FFAB70;">status</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">201</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">except</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">KeyError</span><span style="color:#E1E4E8;">, json.JSONDecodeError) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> e:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> JsonResponse({</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">(e)}, </span><span style="color:#FFAB70;">status</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">400</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># FastAPI示例 (现代、异步)</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> fastapi </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> FastAPI, HTTPException, Depends</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pydantic </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> BaseModel</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> typing </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> List, Optional</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sqlalchemy </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> create_engine, Column, Integer, String, Float</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sqlalchemy.ext.declarative </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> declarative_base</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sqlalchemy.orm </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> sessionmaker, Session</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">app </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> FastAPI()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 数据库设置</span></span>
<span class="line"><span style="color:#79B8FF;">SQLALCHEMY_DATABASE_URL</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;sqlite:///./test.db&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">engine </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> create_engine(</span><span style="color:#79B8FF;">SQLALCHEMY_DATABASE_URL</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">connect_args</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#9ECBFF;">&quot;check_same_thread&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">SessionLocal </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> sessionmaker(</span><span style="color:#FFAB70;">autocommit</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">autoflush</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">False</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">bind</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">engine)</span></span>
<span class="line"><span style="color:#E1E4E8;">Base </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> declarative_base()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 模型</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ItemDB</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">Base</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    __tablename__ </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;items&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Column(Integer, </span><span style="color:#FFAB70;">primary_key</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Column(String, </span><span style="color:#FFAB70;">index</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    description </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Column(String, </span><span style="color:#FFAB70;">nullable</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    price </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Column(Float)</span></span>
<span class="line"><span style="color:#E1E4E8;">    tax </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Column(Float, </span><span style="color:#FFAB70;">nullable</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Base.metadata.create_all(</span><span style="color:#FFAB70;">bind</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">engine)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Pydantic模型</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ItemBase</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">BaseModel</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#79B8FF;">str</span></span>
<span class="line"><span style="color:#E1E4E8;">    description: Optional[</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span></span>
<span class="line"><span style="color:#E1E4E8;">    price: </span><span style="color:#79B8FF;">float</span></span>
<span class="line"><span style="color:#E1E4E8;">    tax: Optional[</span><span style="color:#79B8FF;">float</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ItemCreate</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">ItemBase</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Item</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">ItemBase</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">int</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Config</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        orm_mode </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">True</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 依赖项</span></span>
<span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_db</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    db </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> SessionLocal()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">yield</span><span style="color:#E1E4E8;"> db</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">finally</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        db.close()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 路由</span></span>
<span class="line"><span style="color:#B392F0;">@app.post</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/items/&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">response_model</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">Item)</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">create_item</span><span style="color:#E1E4E8;">(item: ItemCreate, db: Session </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Depends(get_db)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    db_item </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ItemDB(</span><span style="color:#F97583;">**</span><span style="color:#E1E4E8;">item.dict())</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.add(db_item)</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.commit()</span></span>
<span class="line"><span style="color:#E1E4E8;">    db.refresh(db_item)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> db_item</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/items/&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">response_model</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">List[Item])</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">read_items</span><span style="color:#E1E4E8;">(skip: </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, limit: </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">, db: Session </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Depends(get_db)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    items </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> db.query(ItemDB).offset(skip).limit(limit).all()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/items/</span><span style="color:#79B8FF;">{item_id}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">response_model</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">Item)</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">read_item</span><span style="color:#E1E4E8;">(item_id: </span><span style="color:#79B8FF;">int</span><span style="color:#E1E4E8;">, db: Session </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Depends(get_db)):</span></span>
<span class="line"><span style="color:#E1E4E8;">    db_item </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> db.query(ItemDB).filter(ItemDB.id </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> item_id).first()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> db_item </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">raise</span><span style="color:#E1E4E8;"> HTTPException(</span><span style="color:#FFAB70;">status_code</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">404</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">detail</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;Item not found&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> db_item</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 异步HTTP客户端</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> httpx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fetch_data</span><span style="color:#E1E4E8;">(url: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">) -&gt; </span><span style="color:#79B8FF;">dict</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> httpx.AsyncClient() </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> client:</span></span>
<span class="line"><span style="color:#E1E4E8;">        response </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> client.get(url)</span></span>
<span class="line"><span style="color:#E1E4E8;">        response.raise_for_status()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> response.json()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">@app.get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/external-data&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">get_external_data</span><span style="color:#E1E4E8;">():</span></span>
<span class="line"><span style="color:#E1E4E8;">    data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> fetch_data(</span><span style="color:#9ECBFF;">&quot;https://api.example.com/data&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> data</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br></div></div><h2 id="_8-数据科学基础" tabindex="-1">8. 数据科学基础 <a class="header-anchor" href="#_8-数据科学基础" aria-hidden="true">#</a></h2><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># NumPy基础</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> numpy </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> np</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建数组</span></span>
<span class="line"><span style="color:#E1E4E8;">arr1 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.array([</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#E1E4E8;">arr2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.array([[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">], [</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">], [</span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">]])</span></span>
<span class="line"><span style="color:#E1E4E8;">zeros </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.zeros((</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">))  </span><span style="color:#6A737D;"># 3x4零矩阵</span></span>
<span class="line"><span style="color:#E1E4E8;">ones </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.ones((</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">))   </span><span style="color:#6A737D;"># 2x3全1矩阵</span></span>
<span class="line"><span style="color:#E1E4E8;">identity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.eye(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)     </span><span style="color:#6A737D;"># 3x3单位矩阵</span></span>
<span class="line"><span style="color:#E1E4E8;">random_arr </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.random.rand(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 3x3随机矩阵(0-1)</span></span>
<span class="line"><span style="color:#E1E4E8;">range_arr </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.arange(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)    </span><span style="color:#6A737D;"># [0, 2, 4, 6, 8]</span></span>
<span class="line"><span style="color:#E1E4E8;">linspace </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.linspace(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">)    </span><span style="color:#6A737D;"># [0.0, 0.25, 0.5, 0.75, 1.0]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 数组属性</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;形状:&quot;</span><span style="color:#E1E4E8;">, arr2.shape)  </span><span style="color:#6A737D;"># (3, 3)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;维度:&quot;</span><span style="color:#E1E4E8;">, arr2.ndim)   </span><span style="color:#6A737D;"># 2</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;元素总数:&quot;</span><span style="color:#E1E4E8;">, arr2.size)  </span><span style="color:#6A737D;"># 9</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;数据类型:&quot;</span><span style="color:#E1E4E8;">, arr2.dtype)  </span><span style="color:#6A737D;"># int64</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 数组操作</span></span>
<span class="line"><span style="color:#6A737D;"># 索引和切片</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(arr2[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">])  </span><span style="color:#6A737D;"># 2</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(arr2[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, :])   </span><span style="color:#6A737D;"># [4, 5, 6]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(arr2[:, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">])   </span><span style="color:#6A737D;"># [3, 6, 9]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(arr2[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">])  </span><span style="color:#6A737D;"># [[4,5], [7,8]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 重塑</span></span>
<span class="line"><span style="color:#E1E4E8;">reshaped </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> arr2.reshape(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 1x9矩阵</span></span>
<span class="line"><span style="color:#E1E4E8;">flattened </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> arr2.flatten()     </span><span style="color:#6A737D;"># 一维数组 [1,2,3,4,5,6,7,8,9]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 合并</span></span>
<span class="line"><span style="color:#E1E4E8;">arr3 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.array([</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">11</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#E1E4E8;">horizontal_stack </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.hstack((arr1, arr3))  </span><span style="color:#6A737D;"># 水平堆叠</span></span>
<span class="line"><span style="color:#E1E4E8;">vertical_stack </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.vstack((arr1, arr3))    </span><span style="color:#6A737D;"># 垂直堆叠</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 数学运算</span></span>
<span class="line"><span style="color:#E1E4E8;">a </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.array([</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"><span style="color:#E1E4E8;">b </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> np.array([</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># [5, 7, 9]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># [-3, -3, -3]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># [4, 10, 18]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(a </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> b)  </span><span style="color:#6A737D;"># [0.25, 0.4, 0.5]</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(np.dot(a, b))  </span><span style="color:#6A737D;"># 32 (点积)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 聚合函数</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(np.sum(arr2))  </span><span style="color:#6A737D;"># 45</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(np.mean(arr2))  </span><span style="color:#6A737D;"># 5.0</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(np.median(arr2))  </span><span style="color:#6A737D;"># 5.0</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(np.std(arr2))  </span><span style="color:#6A737D;"># 标准差</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(np.min(arr2), np.max(arr2))  </span><span style="color:#6A737D;"># 1, 9</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Pandas基础</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> pandas </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> pd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建DataFrame</span></span>
<span class="line"><span style="color:#E1E4E8;">data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;姓名&#39;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&#39;张三&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;李四&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;王五&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;赵六&#39;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">: [</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">28</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">35</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;城市&#39;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&#39;北京&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;上海&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;广州&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;深圳&#39;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">: [</span><span style="color:#79B8FF;">15000</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">20000</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">18000</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">25000</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">df </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pd.DataFrame(data)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从CSV读取</span></span>
<span class="line"><span style="color:#6A737D;"># df = pd.read_csv(&#39;data.csv&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 基本信息</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(df.head())  </span><span style="color:#6A737D;"># 前5行</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(df.info())  </span><span style="color:#6A737D;"># 列信息</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(df.describe())  </span><span style="color:#6A737D;"># 统计摘要</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 选择数据</span></span>
<span class="line"><span style="color:#6A737D;"># 按列</span></span>
<span class="line"><span style="color:#E1E4E8;">names </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[</span><span style="color:#9ECBFF;">&#39;姓名&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">ages_cities </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[[</span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;城市&#39;</span><span style="color:#E1E4E8;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 按行</span></span>
<span class="line"><span style="color:#E1E4E8;">first_row </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df.iloc[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">]  </span><span style="color:#6A737D;"># 第一行</span></span>
<span class="line"><span style="color:#E1E4E8;">subset </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df.iloc[</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]   </span><span style="color:#6A737D;"># 第2-3行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 条件筛选</span></span>
<span class="line"><span style="color:#E1E4E8;">beijing_people </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[df[</span><span style="color:#9ECBFF;">&#39;城市&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;北京&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">high_salary </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[df[</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20000</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">young_people </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[(df[</span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> (df[</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">15000</span><span style="color:#E1E4E8;">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 添加/删除列</span></span>
<span class="line"><span style="color:#E1E4E8;">df[</span><span style="color:#9ECBFF;">&#39;税后工资&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.8</span></span>
<span class="line"><span style="color:#E1E4E8;">df[</span><span style="color:#9ECBFF;">&#39;工作年限&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 删除列</span></span>
<span class="line"><span style="color:#E1E4E8;">df </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df.drop(</span><span style="color:#9ECBFF;">&#39;工作年限&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">axis</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 分组和聚合</span></span>
<span class="line"><span style="color:#E1E4E8;">avg_salary_by_city </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df.groupby(</span><span style="color:#9ECBFF;">&#39;城市&#39;</span><span style="color:#E1E4E8;">)[</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">].mean()</span></span>
<span class="line"><span style="color:#E1E4E8;">count_by_age </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df.groupby(</span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">).size()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 处理缺失值</span></span>
<span class="line"><span style="color:#E1E4E8;">df[</span><span style="color:#9ECBFF;">&#39;奖金&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">5000</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">None</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3000</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8000</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">df[</span><span style="color:#9ECBFF;">&#39;奖金&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[</span><span style="color:#9ECBFF;">&#39;奖金&#39;</span><span style="color:#E1E4E8;">].fillna(df[</span><span style="color:#9ECBFF;">&#39;奖金&#39;</span><span style="color:#E1E4E8;">].mean())  </span><span style="color:#6A737D;"># 用均值填充</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 合并数据</span></span>
<span class="line"><span style="color:#E1E4E8;">df2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pd.DataFrame({</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;姓名&#39;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&#39;张三&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;李四&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;王五&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;钱七&#39;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;部门&#39;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&#39;技术&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;市场&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;产品&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;设计&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">merged </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> pd.merge(df, df2, </span><span style="color:#FFAB70;">on</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;姓名&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">how</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;left&#39;</span><span style="color:#E1E4E8;">)  </span><span style="color:#6A737D;"># 左连接</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 数据可视化</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> matplotlib.pyplot </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> plt</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> seaborn </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> sns</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置样式</span></span>
<span class="line"><span style="color:#E1E4E8;">sns.set(</span><span style="color:#FFAB70;">style</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;whitegrid&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 直方图</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.figure(</span><span style="color:#FFAB70;">figsize</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">sns.histplot(df[</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">], </span><span style="color:#FFAB70;">bins</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">kde</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.title(</span><span style="color:#9ECBFF;">&#39;工资分布&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.xlabel(</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.ylabel(</span><span style="color:#9ECBFF;">&#39;人数&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.savefig(</span><span style="color:#9ECBFF;">&#39;salary_distribution.png&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.close()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 箱线图</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.figure(</span><span style="color:#FFAB70;">figsize</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">sns.boxplot(</span><span style="color:#FFAB70;">x</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;城市&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">y</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">data</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">df)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.title(</span><span style="color:#9ECBFF;">&#39;各城市工资分布&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.savefig(</span><span style="color:#9ECBFF;">&#39;city_salary_boxplot.png&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.close()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 散点图</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.figure(</span><span style="color:#FFAB70;">figsize</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">sns.scatterplot(</span><span style="color:#FFAB70;">x</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">y</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">hue</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;城市&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">data</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">df, </span><span style="color:#FFAB70;">s</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.title(</span><span style="color:#9ECBFF;">&#39;年龄与工资关系&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.savefig(</span><span style="color:#9ECBFF;">&#39;age_salary_scatter.png&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.close()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 热力图 (相关性)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.figure(</span><span style="color:#FFAB70;">figsize</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">corr </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[[</span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;奖金&#39;</span><span style="color:#E1E4E8;">]].corr()</span></span>
<span class="line"><span style="color:#E1E4E8;">sns.heatmap(corr, </span><span style="color:#FFAB70;">annot</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">True</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">cmap</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;coolwarm&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">vmin</span><span style="color:#F97583;">=-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">vmax</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.title(</span><span style="color:#9ECBFF;">&#39;变量相关性&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.savefig(</span><span style="color:#9ECBFF;">&#39;correlation_heatmap.png&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.close()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 机器学习入门 (scikit-learn)</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sklearn.model_selection </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> train_test_split</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sklearn.linear_model </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> LinearRegression</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sklearn.metrics </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> mean_squared_error, r2_score</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> sklearn.preprocessing </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> StandardScaler</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 准备数据 (预测工资)</span></span>
<span class="line"><span style="color:#E1E4E8;">X </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[[</span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">]]  </span><span style="color:#6A737D;"># 特征</span></span>
<span class="line"><span style="color:#E1E4E8;">y </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> df[</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">]    </span><span style="color:#6A737D;"># 目标</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 分割训练集和测试集</span></span>
<span class="line"><span style="color:#E1E4E8;">X_train, X_test, y_train, y_test </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> train_test_split(X, y, </span><span style="color:#FFAB70;">test_size</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">0.2</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">random_state</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">42</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 特征缩放</span></span>
<span class="line"><span style="color:#E1E4E8;">scaler </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> StandardScaler()</span></span>
<span class="line"><span style="color:#E1E4E8;">X_train_scaled </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> scaler.fit_transform(X_train)</span></span>
<span class="line"><span style="color:#E1E4E8;">X_test_scaled </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> scaler.transform(X_test)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建和训练模型</span></span>
<span class="line"><span style="color:#E1E4E8;">model </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> LinearRegression()</span></span>
<span class="line"><span style="color:#E1E4E8;">model.fit(X_train_scaled, y_train)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 预测</span></span>
<span class="line"><span style="color:#E1E4E8;">y_pred </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> model.predict(X_test_scaled)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 评估</span></span>
<span class="line"><span style="color:#E1E4E8;">mse </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> mean_squared_error(y_test, y_pred)</span></span>
<span class="line"><span style="color:#E1E4E8;">r2 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> r2_score(y_test, y_pred)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;均方误差: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">mse</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">f</span><span style="color:#9ECBFF;">&quot;R²分数: </span><span style="color:#79B8FF;">{</span><span style="color:#E1E4E8;">r2</span><span style="color:#F97583;">:.2f</span><span style="color:#79B8FF;">}</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 可视化结果</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.figure(</span><span style="color:#FFAB70;">figsize</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.scatter(X_test, y_test, </span><span style="color:#FFAB70;">color</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;blue&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">label</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;实际值&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.scatter(X_test, y_pred, </span><span style="color:#FFAB70;">color</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;red&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">label</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;预测值&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.plot(X_test, y_pred, </span><span style="color:#FFAB70;">color</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;green&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">linewidth</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">label</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;回归线&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.title(</span><span style="color:#9ECBFF;">&#39;工资预测&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.xlabel(</span><span style="color:#9ECBFF;">&#39;年龄&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.ylabel(</span><span style="color:#9ECBFF;">&#39;工资&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.legend()</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.savefig(</span><span style="color:#9ECBFF;">&#39;regression_result.png&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">plt.close()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 保存模型</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> joblib</span></span>
<span class="line"><span style="color:#E1E4E8;">joblib.dump(model, </span><span style="color:#9ECBFF;">&#39;salary_prediction_model.pkl&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 加载模型</span></span>
<span class="line"><span style="color:#E1E4E8;">loaded_model </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> joblib.load(</span><span style="color:#9ECBFF;">&#39;salary_prediction_model.pkl&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br></div></div><h2 id="_9-实战项目-简易博客系统" tabindex="-1">9. 实战项目：简易博客系统 <a class="header-anchor" href="#_9-实战项目-简易博客系统" aria-hidden="true">#</a></h2><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># blog_system.py</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> sqlite3</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> datetime </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> datetime</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> os</span></span>
<span class="line"><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> typing </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> List, Dict, Optional, Any</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">BlogSystem</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;&quot;&quot;简易博客系统&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">__init__</span><span style="color:#E1E4E8;">(self, db_path: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;blog.db&quot;</span><span style="color:#E1E4E8;">):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;初始化博客系统&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.db_path </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> db_path</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">._initialize_database()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">_initialize_database</span><span style="color:#E1E4E8;">(self):</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;初始化数据库和表&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">with</span><span style="color:#E1E4E8;"> sqlite3.connect(</span><span style="color:#79B8FF;">self</span><span style="color:#E1E4E8;">.db_path) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> conn:</span></span>
<span class="line"><span style="color:#E1E4E8;">            cursor </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> conn.cursor()</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 创建文章表</span></span>
<span class="line"><span style="color:#E1E4E8;">            cursor.execute(</span><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">            CREATE TABLE IF NOT EXISTS posts (</span></span>
<span class="line"><span style="color:#9ECBFF;">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span class="line"><span style="color:#9ECBFF;">                title TEXT NOT NULL,</span></span>
<span class="line"><span style="color:#9ECBFF;">                content TEXT NOT NULL,</span></span>
<span class="line"><span style="color:#9ECBFF;">                author TEXT NOT NULL,</span></span>
<span class="line"><span style="color:#9ECBFF;">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="color:#9ECBFF;">                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="color:#9ECBFF;">            )</span></span>
<span class="line"><span style="color:#9ECBFF;">            &#39;&#39;&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 创建评论表</span></span>
<span class="line"><span style="color:#E1E4E8;">            cursor.execute(</span><span style="color:#9ECBFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">            CREATE TABLE IF NOT EXISTS comments (</span></span>
<span class="line"><span style="color:#9ECBFF;">                id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span class="line"><span style="color:#9ECBFF;">                post_id INTEGER NOT NULL,</span></span>
<span class="line"><span style="color:#9ECBFF;">                author TEXT NOT NULL,</span></span>
<span class="line"><span style="color:#9ECBFF;">                content TEXT NOT NULL,</span></span>
<span class="line"><span style="color:#9ECBFF;">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="color:#9ECBFF;">                FOREIGN KEY (post_id) REFERENCES posts (id)</span></span>
<span class="line"><span style="color:#9ECBFF;">            )</span></span>
<span class="line"><span style="color:#9ECBFF;">            &#39;&#39;&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span></span>
<span class="line"><span style="color:#E1E4E8;">            conn.commit()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">create_post</span><span style="color:#E1E4E8;">(self, title: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">, content: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">, author: </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">) -&gt; Dict[</span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;">, Any]:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;&quot;&quot;创建新文章&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        created</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div>`,165),e=[o];function r(c,E,t,y,i,F){return a(),n("div",null,e)}const m=s(p,[["render",r]]);export{u as __pageData,m as default};
