import{_ as s,c as n,o as a,a as e}from"./app.450482b3.js";const u=JSON.parse('{"title":"nginxç®€ä»‹åŠç¯å¢ƒå‡†å¤‡","description":"","frontmatter":{},"headers":[{"level":3,"title":"ç¼“å†²ï¼ˆbufferï¼‰","slug":"ç¼“å†²-buffer","link":"#ç¼“å†²-buffer","children":[]},{"level":3,"title":"ç¼“å­˜ï¼ˆcacheï¼‰","slug":"ç¼“å­˜-cache","link":"#ç¼“å­˜-cache","children":[]},{"level":3,"title":"ç¤ºä¾‹","slug":"ç¤ºä¾‹","link":"#ç¤ºä¾‹","children":[]},{"level":3,"title":"é…ç½®æœåŠ¡ç»„","slug":"é…ç½®æœåŠ¡ç»„","link":"#é…ç½®æœåŠ¡ç»„","children":[]},{"level":3,"title":"è´Ÿè½½å‡è¡¡ç­–ç•¥","slug":"è´Ÿè½½å‡è¡¡ç­–ç•¥","link":"#è´Ÿè½½å‡è¡¡ç­–ç•¥","children":[]},{"level":3,"title":"ç”Ÿæˆè¯ä¹¦","slug":"ç”Ÿæˆè¯ä¹¦","link":"#ç”Ÿæˆè¯ä¹¦","children":[]},{"level":3,"title":"é…ç½®ssl","slug":"é…ç½®ssl","link":"#é…ç½®ssl","children":[]},{"level":3,"title":"httpsä¼˜åŒ–","slug":"httpsä¼˜åŒ–","link":"#httpsä¼˜åŒ–","children":[]},{"level":3,"title":"1.stream","slug":"_1-stream","link":"#_1-stream","children":[]},{"level":3,"title":"2.tcpè´Ÿè½½å‡è¡¡","slug":"_2-tcpè´Ÿè½½å‡è¡¡","link":"#_2-tcpè´Ÿè½½å‡è¡¡","children":[]},{"level":2,"title":"return","slug":"return","link":"#return","children":[{"level":3,"title":"å¼ºåˆ¶æ‰€æœ‰è¯·æ±‚ä½¿ç”¨Https","slug":"å¼ºåˆ¶æ‰€æœ‰è¯·æ±‚ä½¿ç”¨https","link":"#å¼ºåˆ¶æ‰€æœ‰è¯·æ±‚ä½¿ç”¨https","children":[]}]},{"level":2,"title":"è½¬å‘å’Œé‡å®šå‘","slug":"è½¬å‘å’Œé‡å®šå‘","link":"#è½¬å‘å’Œé‡å®šå‘","children":[]},{"level":2,"title":"rewrite","slug":"rewrite","link":"#rewrite","children":[]},{"level":2,"title":"lastä¸break","slug":"lastä¸break","link":"#lastä¸break","children":[{"level":3,"title":"ä¸ä½¿ç”¨lastå’Œbreak","slug":"ä¸ä½¿ç”¨lastå’Œbreak","link":"#ä¸ä½¿ç”¨lastå’Œbreak","children":[]},{"level":3,"title":"ä½¿ç”¨break","slug":"ä½¿ç”¨break","link":"#ä½¿ç”¨break","children":[]},{"level":3,"title":"ä½¿ç”¨last","slug":"ä½¿ç”¨last","link":"#ä½¿ç”¨last","children":[]},{"level":3,"title":"gzipå‹ç¼©","slug":"gzipå‹ç¼©","link":"#gzipå‹ç¼©","children":[]},{"level":3,"title":"sendfile","slug":"sendfile","link":"#sendfile","children":[]},{"level":3,"title":"try_files","slug":"try-files","link":"#try-files","children":[]},{"level":3,"title":"error_page","slug":"error-page","link":"#error-page","children":[]}]},{"level":2,"title":"ä¸€ã€æ¨èå†™æ³•","slug":"ä¸€ã€æ¨èå†™æ³•","link":"#ä¸€ã€æ¨èå†™æ³•","children":[{"level":3,"title":"1.é‡å¤çš„é…ç½®å¯ç»§æ‰¿è‡ªçˆ¶çº§","slug":"_1-é‡å¤çš„é…ç½®å¯ç»§æ‰¿è‡ªçˆ¶çº§","link":"#_1-é‡å¤çš„é…ç½®å¯ç»§æ‰¿è‡ªçˆ¶çº§","children":[]},{"level":3,"title":"2.ä¸è¦å°†æ‰€æœ‰è¯·æ±‚éƒ½ä»£ç†åˆ°åç«¯æœåŠ¡å™¨","slug":"_2-ä¸è¦å°†æ‰€æœ‰è¯·æ±‚éƒ½ä»£ç†åˆ°åç«¯æœåŠ¡å™¨","link":"#_2-ä¸è¦å°†æ‰€æœ‰è¯·æ±‚éƒ½ä»£ç†åˆ°åç«¯æœåŠ¡å™¨","children":[]},{"level":3,"title":"3.è‹¥éå¿…è¦ï¼Œä¸è¦ç¼“å­˜åŠ¨æ€è¯·æ±‚ï¼Œåªç¼“å­˜é™æ€æ–‡ä»¶","slug":"_3-è‹¥éå¿…è¦-ä¸è¦ç¼“å­˜åŠ¨æ€è¯·æ±‚-åªç¼“å­˜é™æ€æ–‡ä»¶","link":"#_3-è‹¥éå¿…è¦-ä¸è¦ç¼“å­˜åŠ¨æ€è¯·æ±‚-åªç¼“å­˜é™æ€æ–‡ä»¶","children":[]},{"level":3,"title":"4.æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä½¿ç”¨try_filesä»£æ›¿if -f","slug":"_4-æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä½¿ç”¨try-filesä»£æ›¿if-f","link":"#_4-æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä½¿ç”¨try-filesä»£æ›¿if-f","children":[]},{"level":3,"title":"5.åœ¨é‡å†™è·¯å¾„ä¸­åŒ…å«http://æˆ–httpsğŸ˜•/","slug":"_5-åœ¨é‡å†™è·¯å¾„ä¸­åŒ…å«http-æˆ–https","link":"#_5-åœ¨é‡å†™è·¯å¾„ä¸­åŒ…å«http-æˆ–https","children":[]},{"level":3,"title":"6.ä¿æŒé‡å†™è§„åˆ™ç®€å•å¹²å‡€","slug":"_6-ä¿æŒé‡å†™è§„åˆ™ç®€å•å¹²å‡€","link":"#_6-ä¿æŒé‡å†™è§„åˆ™ç®€å•å¹²å‡€","children":[]}]},{"level":2,"title":"äºŒã€æ³¨æ„äº‹é¡¹","slug":"äºŒã€æ³¨æ„äº‹é¡¹","link":"#äºŒã€æ³¨æ„äº‹é¡¹","children":[{"level":3,"title":"1.æ­£ç¡®çš„é…ç½®æœªç”Ÿæ•ˆï¼Œè¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜","slug":"_1-æ­£ç¡®çš„é…ç½®æœªç”Ÿæ•ˆ-è¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜","link":"#_1-æ­£ç¡®çš„é…ç½®æœªç”Ÿæ•ˆ-è¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜","children":[]},{"level":3,"title":"2.åœ¨HTTPSä¸­ä¸å¯ç”¨ SSLv3","slug":"_2-åœ¨httpsä¸­ä¸å¯ç”¨-sslv3","link":"#_2-åœ¨httpsä¸­ä¸å¯ç”¨-sslv3","children":[]},{"level":3,"title":"3.ä¸è¦å°† root ç›®å½•é…ç½®æˆ /æˆ– /rootã€‚","slug":"_3-ä¸è¦å°†-root-ç›®å½•é…ç½®æˆ-æˆ–-rootã€‚","link":"#_3-ä¸è¦å°†-root-ç›®å½•é…ç½®æˆ-æˆ–-rootã€‚","children":[]},{"level":3,"title":"4.è°¨æ…ä½¿ç”¨chmod 777","slug":"_4-è°¨æ…ä½¿ç”¨chmod-777","link":"#_4-è°¨æ…ä½¿ç”¨chmod-777","children":[]},{"level":3,"title":"5.ä¸è¦å°†éƒ¨ç½²çš„é¡¹ç›®æ‹·è´åˆ°é»˜è®¤ç›®å½•ä¸‹","slug":"_5-ä¸è¦å°†éƒ¨ç½²çš„é¡¹ç›®æ‹·è´åˆ°é»˜è®¤ç›®å½•ä¸‹","link":"#_5-ä¸è¦å°†éƒ¨ç½²çš„é¡¹ç›®æ‹·è´åˆ°é»˜è®¤ç›®å½•ä¸‹","children":[]}]}],"relativePath":"network/Nginx.md","lastUpdated":1696570916000}'),l={name:"network/Nginx.md"},p=e(`<h1 id="nginxç®€ä»‹åŠç¯å¢ƒå‡†å¤‡" tabindex="-1"><strong>nginxç®€ä»‹åŠç¯å¢ƒå‡†å¤‡</strong> <a class="header-anchor" href="#nginxç®€ä»‹åŠç¯å¢ƒå‡†å¤‡" aria-hidden="true">#</a></h1><h4 id="ä¸€ã€nginxç®€ä»‹" tabindex="-1">ä¸€ã€nginxç®€ä»‹ <a class="header-anchor" href="#ä¸€ã€nginxç®€ä»‹" aria-hidden="true">#</a></h4><p>Nginxæ˜¯ä¸€æ¬¾è½»é‡çº§çš„WebæœåŠ¡å™¨ã€åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”±äºå®ƒçš„å†…å­˜å ç”¨å°‘ï¼Œå¯åŠ¨æå¿«ï¼Œé«˜å¹¶å‘èƒ½åŠ›å¼ºï¼Œåœ¨äº’è”ç½‘é¡¹ç›®ä¸­å¹¿æ³›åº”ç”¨ã€‚</p><p>æœ¬è¯¾ç¨‹åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><p>1.nginx å®‰è£…</p><p>2.é…ç½®é™æ€web</p><p>3.HTTPåå‘ä»£ç†</p><p>4.åŠ¨é™åˆ†ç¦»</p><p>5.ç¼“å†²å’Œç¼“å­˜</p><p>6.è´Ÿè½½å‡è¡¡</p><p>7.URLé‡å†™</p><p>8.TCPåå‘ä»£ç†</p><p>9.HTTPSé…ç½®</p><h4 id="äºŒã€ç¯å¢ƒå‡†å¤‡" tabindex="-1">äºŒã€ç¯å¢ƒå‡†å¤‡ <a class="header-anchor" href="#äºŒã€ç¯å¢ƒå‡†å¤‡" aria-hidden="true">#</a></h4><p>æœ¬è¯¾ç¨‹çš„é‡ç‚¹æ˜¯nginxçš„ä½¿ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶å­¦ä¹ ï¼Œè€Œä¸æ˜¯æŠŠå¤§é‡æ—¶é—´èŠ±è´¹åœ¨ç¯å¢ƒæ­å»ºè¿‡ç¨‹ä¸­ï¼Œæœ¬è¯¾ç¨‹æä¾›äº†è™šæ‹Ÿæœºé•œåƒï¼ŒåŸºäºCentos7ï¼Œç½‘ç›˜é“¾æ¥: <a href="https://pan.baidu.com/s/1NmCR-vdAcZLouRRn9V1yTA" target="_blank" rel="noreferrer">https://pan.baidu.com/s/1NmCR-vdAcZLouRRn9V1yTA</a> å¯†ç : 1b60</p><ul><li>ä½¿ç”¨è¯´æ˜ï¼š</li></ul><p>ç”¨æˆ·å/å¯†ç ï¼šroot/123456ï¼Œè¯¾ç¨‹ä¸­ä½¿ç”¨çš„ç¯å¢ƒå’Œåº”ç”¨æ”¾ç½®åœ¨/homeç›®å½•ä¸‹</p><table><thead><tr><th><strong>ç›®å½•</strong></th><th><strong>ç®€ä»‹</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>AdminLTE-3.2.0</td><td>é™æ€webåå°ç®¡ç†ç³»ç»Ÿ</td><td>é™æ€webçš„é…ç½®æ¼”ç¤º</td></tr><tr><td>apps/ruoyi-admin.jar</td><td>è‹¥ä¾åå°ç®¡ç†ç³»ç»Ÿï¼ŒåŸºäºspringboot</td><td>æ–¹å‘ä»£ç†æ¼”ç¤º</td></tr><tr><td>apache-tomcat-8.5.81apps/ruoyi-admin.war</td><td>javawebæœåŠ¡å™¨</td><td>åŠ¨é™åˆ†ç¦»æ¼”ç¤º</td></tr><tr><td>sql/ry_20210924.sqlsql/quartz.sql</td><td>æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬</td><td>åˆ›å»ºè‹¥ä¾åå°æ•°æ®åº“</td></tr><tr><td>mysql5.7</td><td>æ•°æ®åº“</td><td>ç”¨æˆ·å/å¯†ç ï¼šroot/123456</td></tr><tr><td>open-JDK 1.8</td><td>javaè¿è¡Œç¯å¢ƒ</td><td>å·²å®‰è£…</td></tr></tbody></table><h4 id="ä¸‰ã€ä¸‹è½½åœ°å€" tabindex="-1">ä¸‰ã€ä¸‹è½½åœ°å€ <a class="header-anchor" href="#ä¸‰ã€ä¸‹è½½åœ°å€" aria-hidden="true">#</a></h4><p>å¦‚æœä¸éœ€è¦è™šæ‹Ÿæœºï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œä¸‹è½½å®‰è£…ã€‚</p><ul><li>AdminLTE</li></ul><p>å®˜æ–¹ç½‘å€ï¼š<a href="https://adminlte.io/" target="_blank" rel="noreferrer">https://adminlte.io/</a></p><p>æºç ä¸‹è½½ï¼š<a href="https://codeload.github.com/ColorlibHQ/AdminLTE/tar.gz/refs/tags/v3.2.0" target="_blank" rel="noreferrer">https://codeload.github.com/ColorlibHQ/AdminLTE/tar.gz/refs/tags/v3.2.0</a></p><p>ä¸€ä¸ªé™æ€webåå°ç®¡ç†ç³»ç»Ÿ</p><ul><li>RuoYi</li></ul><p>ä¸€ä¸ªåŸºäºSpring Bootçš„åå°ç®¡ç†ç³»ç»Ÿ</p><p>è¯´æ˜æ–‡æ¡£ï¼š<a href="http://doc.ruoyi.vip/ruoyi/" target="_blank" rel="noreferrer">http://doc.ruoyi.vip/ruoyi/</a></p><p>æºç ä¸‹è½½ï¼š<a href="https://codeload.github.com/yangzongzhuan/RuoYi/zip/refs/tags/v4.7.4" target="_blank" rel="noreferrer">https://codeload.github.com/yangzongzhuan/RuoYi/zip/refs/tags/v4.7.4</a></p><p>ä¹Ÿå¯ä»¥ä»ç½‘ç›˜ä¸­è·å–æ‰“åŒ…å¥½çš„ruoyi-admin.jarå’Œruoyi-admin.war</p><p>ç½‘ç›˜é“¾æ¥: <a href="https://pan.baidu.com/s/1NmCR-vdAcZLouRRn9V1yTA" target="_blank" rel="noreferrer">https://pan.baidu.com/s/1NmCR-vdAcZLouRRn9V1yTA</a> å¯†ç : 1b60</p><ul><li>open-JDK 1.8</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">java-1.8.0-openjdk.x86_64</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">java-1.8.0-openjdk-devel.x86_64</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>tomcat 8.5</li></ul><p>å®˜æ–¹ç½‘å€ï¼š<a href="https://tomcat.apache.org/" target="_blank" rel="noreferrer">https://tomcat.apache.org/</a></p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://dlcdn.apache.org/tomcat/tomcat-8/v8.5.81/bin/apache-tomcat-8.5.81.tar.gz" target="_blank" rel="noreferrer">https://dlcdn.apache.org/tomcat/tomcat-8/v8.5.81/bin/apache-tomcat-8.5.81.tar.gz</a></p><ul><li>mysql 5.7</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/yum.repos.d/mysql-community.repo</span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">[mysql57-community]</span></span>
<span class="line"><span style="color:#9ECBFF;">name=MySQL 5.7 Community Server</span></span>
<span class="line"><span style="color:#9ECBFF;">baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/</span><span style="color:#79B8FF;">\\$</span><span style="color:#9ECBFF;">releasever/</span><span style="color:#79B8FF;">\\$</span><span style="color:#9ECBFF;">basearch/</span></span>
<span class="line"><span style="color:#9ECBFF;">enabled=1</span></span>
<span class="line"><span style="color:#9ECBFF;">gpgcheck=1</span></span>
<span class="line"><span style="color:#9ECBFF;">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-2022</span></span>
<span class="line"><span style="color:#9ECBFF;">       file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://repo.mysql.com/RPM-GPG-KEY-mysql-</span><span style="color:#79B8FF;">2022</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mysql-community-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mysqld</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mysqld</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;temporary password&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/log/mysqld.log</span></span>
<span class="line"><span style="color:#6A737D;">#A temporary password is generated for root@localhost: m9cpkdkLEX</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">mysql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-uroot</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">USER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;root&#39;@&#39;localhost&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">IDENTIFIED</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">BY</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;MyNewPass4!&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>ä¿®æ”¹ç®€å•çš„å¯†ç </p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">SHOW</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VARIABLES</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LIKE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;validate_password%&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GLOBAL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">validate_password_policy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LOW</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#79B8FF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GLOBAL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">validate_password_length</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">USER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;root&#39;@&#39;localhost&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">IDENTIFIED</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">BY</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;123456&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="_1-å®‰è£…ä¸å¯åŠ¨" tabindex="-1"><strong>1.å®‰è£…ä¸å¯åŠ¨</strong> <a class="header-anchor" href="#_1-å®‰è£…ä¸å¯åŠ¨" aria-hidden="true">#</a></h1><p>ç¯å¢ƒå‡†å¤‡ï¼š</p><ul><li>Centos 7.4+</li><li>å¯è®¿é—®è”ç½‘</li><li>å…³é—­é˜²ç«å¢™</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">firewalld</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">firewalld</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_1-ä½¿ç”¨yumå®‰è£…" tabindex="-1">1.ä½¿ç”¨yumå®‰è£… <a class="header-anchor" href="#_1-ä½¿ç”¨yumå®‰è£…" aria-hidden="true">#</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum-utils</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">net-tools</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/yum.repos.d/nginx.repo</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#9ECBFF;"> EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">[nginx-stable]</span></span>
<span class="line"><span style="color:#9ECBFF;">name=nginx stable repo</span></span>
<span class="line"><span style="color:#9ECBFF;">baseurl=http://nginx.org/packages/centos/</span><span style="color:#79B8FF;">\\$</span><span style="color:#9ECBFF;">releasever/</span><span style="color:#79B8FF;">\\$</span><span style="color:#9ECBFF;">basearch/</span></span>
<span class="line"><span style="color:#9ECBFF;">gpgcheck=1</span></span>
<span class="line"><span style="color:#9ECBFF;">enabled=1</span></span>
<span class="line"><span style="color:#9ECBFF;">gpgkey=https://nginx.org/keys/nginx_signing.key</span></span>
<span class="line"><span style="color:#9ECBFF;">module_hotfixes=true</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2-å¸¸ç”¨å‘½ä»¤" tabindex="-1">2.å¸¸ç”¨å‘½ä»¤ <a class="header-anchor" href="#_2-å¸¸ç”¨å‘½ä»¤" aria-hidden="true">#</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#ç«‹å³åœæ­¢</span></span>
<span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æ‰§è¡Œå®Œå½“å‰è¯·æ±‚å†åœæ­¢</span></span>
<span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œç›¸å½“äºrestart</span></span>
<span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">reload</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#å°†æ—¥å¿—å†™å…¥ä¸€ä¸ªæ–°çš„æ–‡ä»¶</span></span>
<span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">reopen</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æµ‹è¯•é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ—¥å¿—ä½äº<code>/var/log/nginx/</code></p><h4 id="_3-ä½¿ç”¨systemctlå¯åŠ¨ã€åœæ­¢ã€é‡æ–°åŠ è½½" tabindex="-1">3.ä½¿ç”¨systemctlå¯åŠ¨ã€åœæ­¢ã€é‡æ–°åŠ è½½ <a class="header-anchor" href="#_3-ä½¿ç”¨systemctlå¯åŠ¨ã€åœæ­¢ã€é‡æ–°åŠ è½½" aria-hidden="true">#</a></h4><p>æ³¨æ„ï¼šåœ¨centos 7ä¸­ï¼Œç”¨systemctlå¯åŠ¨nginxå¯èƒ½å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œ</p><p>nginx: [emerg] bind() to 0.0.0.0:8000 failed (13: Permission denied)</p><p>è¿™æ˜¯ç”±äºselinuxçš„å®‰å…¨ç­–ç•¥å¼•èµ·çš„ã€‚è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li>setenforce 0 ï¼ˆä¸´æ—¶ï¼‰</li><li>ä¿®æ”¹/etc/selinux/configï¼Œè®¾ç½®SELINUX=disabled ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼Œéœ€é‡å¯ï¼‰</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#äº§çœ‹æ—¥å¿—</span></span>
<span class="line"><span style="color:#B392F0;">journalctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xe</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">reload</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#é…ç½®å¼€æœºå¯åŠ¨</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_4-é…ç½®æ–‡ä»¶" tabindex="-1">4.é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_4-é…ç½®æ–‡ä»¶" aria-hidden="true">#</a></h4><p>é…ç½®æ–‡ä»¶ä½äº /etc/nginx/nginx.conf , ä¸‹åˆ—å‘½ä»¤ä¼šå¼•ç”¨/etc/nginx/conf.dç›®å½•ä¸‹æ‰€æœ‰çš„.confæ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥ä¿æŒä¸»é…ç½®æ–‡ä»¶çš„ç®€æ´ï¼ŒåŒæ—¶é…ä¸ªå¤šä¸ª.confæ–‡ä»¶æ–¹ä¾¿åŒºåˆ†ï¼Œå¢åŠ å¯è¯»æ€§ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">include </span><span style="color:#E1E4E8;">/etc/nginx/conf.d/*.conf;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é»˜è®¤é…ç½®/etc/nginx/conf.d/default.conf</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">#ç›‘å¬ç«¯å£</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;"> localhost;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">  /usr/share/nginx/html; </span><span style="color:#6A737D;">#æ ¹ç›®å½•</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> index </span><span style="color:#E1E4E8;"> index.html index.htm; </span><span style="color:#6A737D;">#é¦–é¡µ</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> error_page </span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">500</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">502</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">503</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">504</span><span style="color:#E1E4E8;">  /50x.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">/50x.html </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">  /usr/share/nginx/html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_5-é…ç½®æ–‡ä»¶ç»“æ„" tabindex="-1">5.é…ç½®æ–‡ä»¶ç»“æ„ <a class="header-anchor" href="#_5-é…ç½®æ–‡ä»¶ç»“æ„" aria-hidden="true">#</a></h4><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">http</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  server{</span><span style="color:#6A737D;">#è™šæ‹Ÿä¸»æœº</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">80ï¼›</span></span>
<span class="line"><span style="color:#E1E4E8;">      server_name localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  server{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://nginx.org/en/linux_packages.html" target="_blank" rel="noreferrer">https://nginx.org/en/linux_packages.html</a></p><p><a href="https://nginx.org/en/docs/beginners_guide.html#control" target="_blank" rel="noreferrer">https://nginx.org/en/docs/beginners_guide.html#control</a></p><h1 id="_2-é™æ€ç½‘é¡µ" tabindex="-1"><strong>2.é™æ€ç½‘é¡µ</strong> <a class="header-anchor" href="#_2-é™æ€ç½‘é¡µ" aria-hidden="true">#</a></h1><h4 id="é™æ€ç½‘é¡µé…ç½®" tabindex="-1">é™æ€ç½‘é¡µé…ç½® <a class="header-anchor" href="#é™æ€ç½‘é¡µé…ç½®" aria-hidden="true">#</a></h4><p>é…ç½®ä¸€ä¸ªé™æ€çš„AdminLTEåå°ç®¡ç†ç³»ç»Ÿã€‚</p><p>AdminLTEå®˜æ–¹ç½‘å€ï¼š<a href="https://adminlte.io/" target="_blank" rel="noreferrer">https://adminlte.io/</a></p><p>æºç ä¸‹è½½ï¼š<a href="https://codeload.github.com/ColorlibHQ/AdminLTE/tar.gz/refs/tags/v3.2.0" target="_blank" rel="noreferrer">https://codeload.github.com/ColorlibHQ/AdminLTE/tar.gz/refs/tags/v3.2.0</a></p><p>é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">server{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8000;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/home/AdminLTE-3.2.0;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> index </span><span style="color:#E1E4E8;">index.html index2.html index3.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è™šæ‹Ÿä¸»æœºserveré€šè¿‡listenå’Œserver_nameè¿›è¡ŒåŒºåˆ†ï¼Œå¦‚æœæœ‰å¤šä¸ªserveré…ç½®ï¼Œlisten + server_name ä¸èƒ½é‡å¤ã€‚</p><h4 id="listen" tabindex="-1">listen <a class="header-anchor" href="#listen" aria-hidden="true">#</a></h4><p>ç›‘å¬å¯ä»¥é…ç½®æˆ<code>IP</code>æˆ–<code>ç«¯å£</code>æˆ–<code>IP+ç«¯å£</code></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">listen 127.0.0.1:8000; </span></span>
<span class="line"><span style="color:#e1e4e8;">listen 127.0.0.1;ï¼ˆ ç«¯å£ä¸å†™,é»˜è®¤80 ï¼‰ </span></span>
<span class="line"><span style="color:#e1e4e8;">listen 8000; </span></span>
<span class="line"><span style="color:#e1e4e8;">listen *:8000; </span></span>
<span class="line"><span style="color:#e1e4e8;">listen localhost:8000;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="server-name" tabindex="-1">server_name <a class="header-anchor" href="#server-name" aria-hidden="true">#</a></h4><p>server_nameä¸»è¦ç”¨äºåŒºåˆ†ï¼Œå¯ä»¥éšä¾¿èµ·ã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å˜é‡<code>$hostname</code>é…ç½®æˆä¸»æœºåã€‚</p><p>æˆ–è€…é…ç½®æˆåŸŸåï¼š<code>example.org</code> <code>www.example.org</code> <code>*.example.org</code></p><p>å¦‚æœå¤šä¸ªserverçš„ç«¯å£é‡å¤ï¼Œé‚£ä¹ˆæ ¹æ®<code>åŸŸå</code>æˆ–è€…<code>ä¸»æœºå</code>å»åŒ¹é… server_name è¿›è¡Œé€‰æ‹©ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">curl http://localhost:80\`ä¼šè®¿é—®\`/usr/share/nginx/html</span></span>
<span class="line"><span style="color:#e1e4e8;">curl http://nginx-dev:80\`ä¼šè®¿é—®\`/home/AdminLTE-3.2.0</span></span>
<span class="line"><span style="color:#e1e4e8;"># curl http://localhost:80 ä¼šè®¿é—®è¿™ä¸ª</span></span>
<span class="line"><span style="color:#e1e4e8;">server {</span></span>
<span class="line"><span style="color:#e1e4e8;">    listen       80;</span></span>
<span class="line"><span style="color:#e1e4e8;">    server_name  localhost;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    #access_log  /var/log/nginx/host.access.log  main;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">    location / {</span></span>
<span class="line"><span style="color:#e1e4e8;">        root   /usr/share/nginx/html;</span></span>
<span class="line"><span style="color:#e1e4e8;">        index  index.html index.htm;</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"> # curl http://nginx-dev:80 ä¼šè®¿é—®è¿™ä¸ª</span></span>
<span class="line"><span style="color:#e1e4e8;">server{</span></span>
<span class="line"><span style="color:#e1e4e8;">    listen 80;</span></span>
<span class="line"><span style="color:#e1e4e8;">    server_name nginx-dev;#ä¸»æœºå</span></span>
<span class="line"><span style="color:#e1e4e8;">    </span></span>
<span class="line"><span style="color:#e1e4e8;">    location / {</span></span>
<span class="line"><span style="color:#e1e4e8;">        root /home/AdminLTE-3.2.0;</span></span>
<span class="line"><span style="color:#e1e4e8;">        index index.html index2.html index3.html;</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">  </span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="location" tabindex="-1">location <a class="header-anchor" href="#location" aria-hidden="true">#</a></h4><p><code>/</code>è¯·æ±‚æŒ‡å‘ root ç›®å½•</p><p>location æ€»æ˜¯ä»<code>/</code>ç›®å½•å¼€å§‹åŒ¹é…ï¼Œå¦‚æœæœ‰å­ç›®å½•ï¼Œä¾‹å¦‚<code>/css</code>ï¼Œä»–ä¼šæŒ‡å‘<code>/static/css</code></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/css </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/static;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://nginx.org/en/docs/beginners_guide.html" target="_blank" rel="noreferrer">https://nginx.org/en/docs/beginners_guide.html</a></p><p><a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#listen" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/ngx_http_core_module.html#listen</a></p><p><a href="https://nginx.org/en/docs/http/server_names.html" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/server_names.html</a></p><h1 id="_3-httpåå‘ä»£ç†" tabindex="-1"><strong>3.HTTPåå‘ä»£ç†</strong> <a class="header-anchor" href="#_3-httpåå‘ä»£ç†" aria-hidden="true">#</a></h1><h4 id="_1-æ­£å‘ä»£ç†ä¸åå‘ä»£ç†" tabindex="-1">1.æ­£å‘ä»£ç†ä¸åå‘ä»£ç† <a class="header-anchor" href="#_1-æ­£å‘ä»£ç†ä¸åå‘ä»£ç†" aria-hidden="true">#</a></h4><ul><li><strong>æ­£å‘ä»£ç†</strong></li></ul><p>åœ¨<strong>å®¢æˆ·ç«¯</strong>ä»£ç†è½¬å‘è¯·æ±‚ç§°ä¸º<strong>æ­£å‘ä»£ç†</strong>ã€‚ä¾‹å¦‚VPNã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659069721078-51b03bd0-f4ae-4441-a8b1-deef20ce8e05.svg" alt="img"></p><ul><li><strong>åå‘ä»£ç†</strong></li></ul><p>åœ¨<strong>æœåŠ¡å™¨ç«¯</strong>ä»£ç†è½¬å‘è¯·æ±‚ç§°ä¸º<strong>åå‘ä»£ç†</strong>ã€‚ä¾‹å¦‚nginx</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659069737327-ed7e214e-aace-45b1-afe3-32a776b94b8f.svg" alt="img"></p><h4 id="_2-é…ç½®ä»£ç†æœåŠ¡" tabindex="-1">2.é…ç½®ä»£ç†æœåŠ¡ <a class="header-anchor" href="#_2-é…ç½®ä»£ç†æœåŠ¡" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659084328663-32955bb1-82f0-40f3-b94a-f233b4a5793f.png" alt="img"></p><p>RuoYiæ˜¯ä¸€ä¸ªåŸºäºSpring Bootçš„åå°ç®¡ç†ç³»ç»Ÿï¼Œruoyi-admin.jarå¯ä»¥ä»ç½‘ç›˜ä¸­è·å–</p><p>ç½‘ç›˜é“¾æ¥: <a href="https://pan.baidu.com/s/1NmCR-vdAcZLouRRn9V1yTA" target="_blank" rel="noreferrer">https://pan.baidu.com/s/1NmCR-vdAcZLouRRn9V1yTA</a> å¯†ç : 1b60</p><p>ä¹Ÿå¯ä»¥æ ¹æ®å®˜ç½‘æ–‡æ¡£ï¼ˆ<a href="http://doc.ruoyi.vip/ruoyi/%EF%BC%89%EF%BC%8C%E8%87%AA%E5%B7%B1%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85%E3%80%82" target="_blank" rel="noreferrer">http://doc.ruoyi.vip/ruoyi/ï¼‰ï¼Œè‡ªå·±ç¼–è¯‘æ‰“åŒ…ã€‚</a></p><p>æºç ä¸‹è½½ï¼š<a href="https://codeload.github.com/yangzongzhuan/RuoYi/zip/refs/tags/v4.7.4" target="_blank" rel="noreferrer">https://codeload.github.com/yangzongzhuan/RuoYi/zip/refs/tags/v4.7.4</a></p><p>å¯åŠ¨ruoyiåå°æœåŠ¡ï¼Œç«¯å£ä¸º8088ï¼›</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">java</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-jar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ruoyi-admin.jar</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>nginxé…ç½®æ–‡ä»¶ï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8001;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">ruoyi.localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>proxy_passé…ç½®è¯´æ˜ï¼š</strong></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/some/path/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8080;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>å¦‚æœ<code>proxy-pass</code>çš„åœ°å€åªé…ç½®åˆ°ç«¯å£ï¼Œä¸åŒ…å«<code>/</code>æˆ–å…¶ä»–è·¯å¾„ï¼Œé‚£ä¹ˆlocationå°†è¢«è¿½åŠ åˆ°è½¬å‘åœ°å€ä¸­</li></ul><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œè®¿é—® <code>http://localhost/some/path/page.html</code> å°†è¢«ä»£ç†åˆ° <code>http://localhost:8080/some/path/page.html</code></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/some/path/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8080/zh-cn/;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>å¦‚æœ<code>proxy-pass</code>çš„åœ°å€åŒ…æ‹¬<code>/</code>æˆ–å…¶ä»–è·¯å¾„ï¼Œé‚£ä¹ˆ/some/pathå°†ä¼šè¢«æ›¿æ¢ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œè®¿é—® <code>http://localhost/some/path/page.html</code> å°†è¢«ä»£ç†åˆ° <code>http://localhost:8080/zh-cn/page.html</code>ã€‚â€</li></ul><h4 id="_3-è®¾ç½®ä»£ç†è¯·æ±‚headers" tabindex="-1">3.è®¾ç½®ä»£ç†è¯·æ±‚headers <a class="header-anchor" href="#_3-è®¾ç½®ä»£ç†è¯·æ±‚headers" aria-hidden="true">#</a></h4><p>â€ç”¨æˆ·å¯ä»¥é‡æ–°å®šä¹‰æˆ–è¿½åŠ headerä¿¡æ¯ä¼ é€’ç»™åç«¯<a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass_request_headers" target="_blank" rel="noreferrer">â€</a>â€æœåŠ¡å™¨ã€‚å¯ä»¥åŒ…å«æ–‡æœ¬ã€å˜é‡åŠå…¶ç»„åˆã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä»…é‡å®šä¹‰ä¸¤ä¸ªå­—æ®µï¼šâ€</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">proxy_set_header </span><span style="color:#E1E4E8;">Host       $proxy_host;</span></span>
<span class="line"><span style="color:#F97583;">proxy_set_header </span><span style="color:#E1E4E8;">Connection close;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç”±äºä½¿ç”¨åå‘ä»£ç†ä¹‹åï¼Œåç«¯æœåŠ¡æ— æ³•è·å–ç”¨æˆ·çš„çœŸå®IPï¼Œæ‰€ä»¥ï¼Œä¸€èˆ¬åå‘ä»£ç†éƒ½ä¼šè®¾ç½®ä»¥ä¸‹headerä¿¡æ¯ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/some/path/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#nginxçš„ä¸»æœºåœ°å€</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_set_header </span><span style="color:#E1E4E8;">Host $http_host;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#ç”¨æˆ·ç«¯çœŸå®çš„IPï¼Œå³å®¢æˆ·ç«¯IP</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_set_header </span><span style="color:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_set_header </span><span style="color:#E1E4E8;">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å¸¸ç”¨å˜é‡çš„å€¼ï¼š</p><p><code>$host</code>ï¼šnginxä¸»æœºIPï¼Œä¾‹å¦‚192.168.56.105</p><p><code>$http_host</code>ï¼šnginxä¸»æœºIPå’Œç«¯å£ï¼Œ192.168.56.105:8001</p><p><code>$proxy_host</code>ï¼šlocalhost:8088ï¼Œproxy_passé‡Œé…ç½®çš„ä¸»æœºåå’Œç«¯å£</p><p><code>$remote_addr</code>:ç”¨æˆ·çš„çœŸå®IPï¼Œå³å®¢æˆ·ç«¯IPã€‚</p><h4 id="_4-éhttpä»£ç†" tabindex="-1">4.éHTTPä»£ç† <a class="header-anchor" href="#_4-éhttpä»£ç†" aria-hidden="true">#</a></h4><p>å¦‚æœè¦å°†è¯·æ±‚ä¼ é€’åˆ°é HTTP ä»£ç†æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤ï¼š</p><ul><li><a href="https://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_pass" target="_blank" rel="noreferrer">fastcgi_pass</a> å°†è¯·æ±‚è½¬å‘åˆ°FastCGIæœåŠ¡å™¨ï¼ˆå¤šç”¨äºPHPï¼‰</li><li><a href="https://nginx.org/en/docs/http/ngx_http_scgi_module.html#scgi_pass" target="_blank" rel="noreferrer">scgi_pass</a> å°†è¯·æ±‚è½¬å‘åˆ°SCGI serveræœåŠ¡å™¨ï¼ˆå¤šç”¨äºPHPï¼‰</li><li><a href="https://nginx.org/en/docs/http/ngx_http_uwsgi_module.html#uwsgi_pass" target="_blank" rel="noreferrer">uwsgi_pass</a> å°†è¯·æ±‚è½¬å‘åˆ°uwsgiæœåŠ¡å™¨ï¼ˆå¤šç”¨äºpythonï¼‰</li><li><a href="https://nginx.org/en/docs/http/ngx_http_memcached_module.html#memcached_pass" target="_blank" rel="noreferrer">memcached_pass</a> å°†è¯·æ±‚è½¬å‘åˆ°memcachedæœåŠ¡å™¨</li></ul><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://nginx.org/en/docs/beginners_guide.html" target="_blank" rel="noreferrer">https://nginx.org/en/docs/beginners_guide.html</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/</a></p><p><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header" target="_blank" rel="noreferrer">http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header</a></p><h1 id="_4-åŠ¨é™åˆ†ç¦»" tabindex="-1">4.<strong>åŠ¨é™åˆ†ç¦»</strong> <a class="header-anchor" href="#_4-åŠ¨é™åˆ†ç¦»" aria-hidden="true">#</a></h1><h4 id="åŠ¨é™åˆ†ç¦»çš„å¥½å¤„" tabindex="-1">åŠ¨é™åˆ†ç¦»çš„å¥½å¤„ <a class="header-anchor" href="#åŠ¨é™åˆ†ç¦»çš„å¥½å¤„" aria-hidden="true">#</a></h4><p>Apache Tocmat ä¸¥æ ¼æ¥è¯´æ˜¯ä¸€æ¬¾java EEæœåŠ¡å™¨ï¼Œä¸»è¦æ˜¯ç”¨æ¥å¤„ç† servletè¯·æ±‚ã€‚å¤„ç†cssã€jsã€å›¾ç‰‡è¿™äº›é™æ€æ–‡ä»¶çš„IOæ€§èƒ½ä¸å¤Ÿå¥½ï¼Œå› æ­¤ï¼Œå°†é™æ€æ–‡ä»¶äº¤ç»™nginxå¤„ç†ï¼Œå¯ä»¥æé«˜ç³»ç»Ÿçš„è®¿é—®é€Ÿåº¦ï¼Œå‡å°‘tomcatçš„è¯·æ±‚æ¬¡æ•°ï¼Œæœ‰æ•ˆçš„ç»™åç«¯æœåŠ¡å™¨é™å‹ã€‚</p><h4 id="åˆ†ç¦»é™æ€æ–‡ä»¶" tabindex="-1">åˆ†ç¦»é™æ€æ–‡ä»¶ <a class="header-anchor" href="#åˆ†ç¦»é™æ€æ–‡ä»¶" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659339381949-41af5d82-eb67-4db3-aaa3-524a61e3a52f.png" alt="img"></p><p>RuoYiæ˜¯ä¸€ä¸ªåŸºäºSpring Bootçš„åå°ç®¡ç†ç³»ç»Ÿï¼Œruoyi-admin.warå¯ä»¥ä»ç½‘ç›˜ä¸­è·å–</p><p>ç½‘ç›˜é“¾æ¥: <a href="https://pan.baidu.com/s/1NmCR-vdAcZLouRRn9V1yTA" target="_blank" rel="noreferrer">https://pan.baidu.com/s/1NmCR-vdAcZLouRRn9V1yTA</a> å¯†ç : 1b60</p><p>ä¹Ÿå¯ä»¥æ ¹æ®å®˜ç½‘æ–‡æ¡£ï¼ˆ<a href="http://doc.ruoyi.vip/ruoyi/%EF%BC%89%EF%BC%8C%E8%87%AA%E5%B7%B1%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85%E3%80%82" target="_blank" rel="noreferrer">http://doc.ruoyi.vip/ruoyi/ï¼‰ï¼Œè‡ªå·±ç¼–è¯‘æ‰“åŒ…ã€‚</a></p><p>æºç ä¸‹è½½ï¼š<a href="https://codeload.github.com/yangzongzhuan/RuoYi/zip/refs/tags/v4.7.4" target="_blank" rel="noreferrer">https://codeload.github.com/yangzongzhuan/RuoYi/zip/refs/tags/v4.7.4</a></p><p>éƒ¨ç½²ruoyi-admin.war</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apps/ruoyi-admin.war</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apache-tomcat-8.5.81/webapps/ROOT.war</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-rf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apache-tomcat-8.5.81/webapps/ROOT</span></span>
<span class="line"><span style="color:#B392F0;">/home/apache-tomcat-8.5.81/bin/startup.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>éƒ¨ç½²å®Œæˆåï¼Œå¯¹é¡¹ç›®ç›®å½•ç¨ä½œè°ƒæ•´</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apache-tomcat-8.5.81/webapps/ROOT</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WEB-INF/classes/static/i18n</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">WEB-INF/classes/templates/i18n</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WEB-INF/classes/static</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/www/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¿®æ”¹application.yml</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#85E89D;">messages</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># å›½é™…åŒ–èµ„æºæ–‡ä»¶è·¯å¾„ </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># å°† static/i18n/messages ä¿®æ”¹ä¸º templates/i18n/messages</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">basename</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">templates/i18n/messages</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>é™æ€æ–‡ä»¶ç›®å½•è¯´æ˜ï¼š</p><p>é™¤äº†jsã€cssã€å›¾ç‰‡æ–‡ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰å­—ä½“æ–‡ä»¶å’Œä¸€ä¸ªieæç¤ºé¡µé¢ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659403384054-77a861b5-99f9-45a6-81e1-f657aac53b40.png" alt="img"></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">server{</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8080/;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">/html/ie.html </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;"> /home/www/static;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">^~</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">/fonts/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;"> /home/www/static;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">\\.(css|js|png|jpg|gif|ico) </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/home/www/static;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="location-ä¿®é¥°ç¬¦" tabindex="-1">location ä¿®é¥°ç¬¦ <a class="header-anchor" href="#location-ä¿®é¥°ç¬¦" aria-hidden="true">#</a></h4><ul><li>locationå¯ä»¥ä½¿ç”¨ä¿®é¥°ç¬¦æˆ–æ­£åˆ™è¡¨è¾¾å¼</li></ul><p>ä¿®é¥°ç¬¦ï¼š</p><p>= ç­‰äºï¼Œä¸¥æ ¼åŒ¹é… ï¼ŒåŒ¹é…ä¼˜å…ˆçº§æœ€é«˜ã€‚</p><p>^~ è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ã€‚ä½¿ç”¨å‰ç¼€åŒ¹é…ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™ä¸å†åŒ¹é…å…¶å®ƒ locationã€‚ä¼˜å…ˆçº§ç¬¬äºŒé«˜ã€‚</p><p>~ åŒºåˆ†å¤§å°å†™</p><p>~* ä¸åŒºåˆ†å¤§å°å†™</p><ul><li>ä¼˜å…ˆçº§</li></ul><p>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼šã€‚</p><ol><li>ç²¾ç¡®åŒ¹é…ï¼ˆ=ï¼‰</li><li>å‰ç¼€åŒ¹é…ï¼ˆ^~ï¼‰</li><li>æ­£åˆ™åŒ¹é…ï¼ˆ~å’Œï½*ï¼‰</li><li>ä¸å†™</li></ol><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">^~</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">/images/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8080;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">\\.jpg </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8080;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¦‚ä¸Šæ‰€ç¤ºï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">/images/1.jpg\`ä»£ç†åˆ° \`http://localhost:8080/images/1.jpg</span></span>
<span class="line"><span style="color:#e1e4e8;">/some/path/1.jpg\` ä»£ç†åˆ°\`http://localhost:8080/some/path/1.jpg</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://nginx.org/en/docs/beginners_guide.html" target="_blank" rel="noreferrer">https://nginx.org/en/docs/beginners_guide.html</a></p><p><a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#location" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/ngx_http_core_module.html#location</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/web-server/serving-static-content/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/web-server/serving-static-content/</a></p><h1 id="_5-ç¼“å†²-buffer-å’Œç¼“å­˜-cache" tabindex="-1"><strong>5.ç¼“å†²(buffer)å’Œç¼“å­˜(cache)</strong> <a class="header-anchor" href="#_5-ç¼“å†²-buffer-å’Œç¼“å­˜-cache" aria-hidden="true">#</a></h1><h3 id="ç¼“å†²-buffer" tabindex="-1">ç¼“å†²ï¼ˆbufferï¼‰ <a class="header-anchor" href="#ç¼“å†²-buffer" aria-hidden="true">#</a></h3><p>ç¼“å†²ä¸€èˆ¬æ”¾åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœä¸é€‚åˆæ”¾å…¥å†…å­˜ï¼ˆæ¯”å¦‚è¶…è¿‡äº†æŒ‡å®šå¤§å°ï¼‰ï¼Œåˆ™ä¼šå°†å“åº”å†™å…¥ç£ç›˜ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚</p><p>å¯ç”¨ç¼“å†²åï¼Œnginxå…ˆå°†åç«¯çš„è¯·æ±‚å“åº”ï¼ˆresponseï¼‰æ”¾å…¥ç¼“å†²åŒºä¸­ï¼Œç­‰åˆ°æ•´ä¸ªå“åº”å®Œæˆåï¼Œå†å‘ç»™å®¢æˆ·ç«¯ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659585056819-df82befd-d847-4a0b-bffc-84cf626c2fed.png" alt="img"></p><p>å®¢æˆ·ç«¯å¾€å¾€æ˜¯ç”¨æˆ·ç½‘ç»œï¼Œæƒ…å†µå¤æ‚ï¼Œå¯èƒ½å‡ºç°ç½‘ç»œä¸ç¨³å®šï¼Œé€Ÿåº¦è¾ƒæ…¢çš„æƒ…å†µã€‚</p><p>è€Œnginxåˆ°åç«¯serverä¸€èˆ¬å¤„äºåŒä¸€ä¸ªæœºæˆ¿æˆ–è€…åŒºåŸŸï¼Œç½‘é€Ÿç¨³å®šä¸”é€Ÿåº¦æå¿«ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659585159748-308fa557-418b-4bda-9f3f-a16efccaa673.png" alt="img"></p><p>å¦‚æœç¦ç”¨äº†ç¼“å†²ï¼Œåˆ™åœ¨å®¢æˆ·ç«¯ä»ä»£ç†æœåŠ¡å™¨æ¥æ”¶å“åº”æ—¶ï¼Œå“åº”å°†åŒæ­¥å‘é€åˆ°å®¢æˆ·ç«¯ã€‚å¯¹äºéœ€è¦å°½å¿«å¼€å§‹æ¥æ”¶å“åº”çš„å¿«é€Ÿäº¤äº’å¼å®¢æˆ·ç«¯ï¼Œæ­¤è¡Œä¸ºå¯èƒ½æ˜¯å¯å–çš„ã€‚</p><p>è¿™å°±ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼šå› ä¸ºå®¢æˆ·ç«¯åˆ°nginxçš„ç½‘é€Ÿè¿‡æ…¢ï¼Œå¯¼è‡´nginxåªèƒ½ä»¥ä¸€ä¸ªè¾ƒæ…¢çš„é€Ÿåº¦å°†å“åº”ä¼ ç»™å®¢æˆ·ç«¯ï¼›è¿›è€Œå¯¼è‡´åç«¯serverä¹Ÿåªèƒ½ä»¥åŒæ ·è¾ƒæ…¢çš„é€Ÿåº¦ä¼ é€’å“åº”ç»™nginxï¼Œé€ æˆä¸€æ¬¡è¯·æ±‚è¿æ¥è€—æ—¶è¿‡é•¿ã€‚</p><p>åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œåç«¯serverå¯èƒ½ä¼šå‡ºç°å¤§é‡çš„è¿æ¥ç§¯å‹ï¼Œæœ€ç»ˆæ‹–å®serverç«¯ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659585458893-c276995d-f299-444b-bd33-cee5933ab878.png" alt="img"></p><p>å¼€å¯ä»£ç†ç¼“å†²åï¼Œnginxå¯ä»¥ç”¨è¾ƒå¿«çš„é€Ÿåº¦å°½å¯èƒ½å°†å“åº”ä½“è¯»å–å¹¶ç¼“å†²åˆ°æœ¬åœ°å†…å­˜æˆ–ç£ç›˜ä¸­ï¼Œç„¶ååŒæ—¶æ ¹æ®å®¢æˆ·ç«¯çš„ç½‘ç»œè´¨é‡ä»¥åˆé€‚çš„ç½‘é€Ÿå°†å“åº”ä¼ é€’ç»™å®¢æˆ·ç«¯ã€‚</p><p>è¿™æ ·æ—¢è§£å†³äº†serverç«¯è¿æ¥è¿‡å¤šçš„é—®é¢˜ï¼Œä¹Ÿä¿è¯äº†èƒ½æŒç»­ç¨³å®šçš„åƒå®¢æˆ·ç«¯ä¼ é€’å“åº”ã€‚</p><p>ä½¿ç”¨<a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering" target="_blank" rel="noreferrer">proxy_buffering</a>å¯ç”¨å’Œç¦ç”¨ç¼“å†²ï¼Œnginxé»˜è®¤ä¸º on å¯ç”¨ç¼“å†²ï¼Œè‹¥è¦å…³é—­ï¼Œè®¾ç½®ä¸º off ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">proxy_buffering </span><span style="color:#E1E4E8;">off;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffers" target="_blank" rel="noreferrer">proxy_buffers</a> æŒ‡ä»¤è®¾ç½®æ¯ä¸ªè¿æ¥è¯»å–å“åº”çš„ç¼“å†²åŒºçš„<code>å¤§å°</code>å’Œ<code>æ•°é‡</code> ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼“å†²åŒºå¤§å°ç­‰äºä¸€ä¸ªå†…å­˜é¡µï¼Œ4K æˆ– 8Kï¼Œå…·ä½“å–å†³äºæ“ä½œç³»ç»Ÿã€‚</p><p>æ¥è‡ªåç«¯æœåŠ¡å™¨å“åº”çš„ç¬¬ä¸€éƒ¨åˆ†å­˜å‚¨åœ¨å•ç‹¬çš„ç¼“å†²åŒºä¸­ï¼Œå…¶å¤§å°é€šè¿‡ <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size" target="_blank" rel="noreferrer">proxy_buffer_size</a> æŒ‡ä»¤è¿›è¡Œè®¾ç½®ï¼Œæ­¤éƒ¨åˆ†é€šå¸¸æ˜¯ç›¸å¯¹è¾ƒå°çš„å“åº”headersï¼Œé€šå¸¸å°†å…¶è®¾ç½®æˆå°äºé»˜è®¤å€¼ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_buffers </span><span style="color:#E1E4E8;">16 </span><span style="color:#79B8FF;">4k</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_buffer_size </span><span style="color:#E1E4E8;">2k;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¦‚æœæ•´ä¸ªå“åº”ä¸é€‚åˆå­˜åˆ°å†…å­˜é‡Œï¼Œåˆ™å°†å…¶ä¸­çš„ä¸€éƒ¨åˆ†ä¿å­˜åˆ°ç£ç›˜ä¸Šçš„â€â€ä¸´æ—¶æ–‡ä»¶ä¸­â€â€ã€‚</p><p>â€<a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_max_temp_file_size" target="_blank" rel="noreferrer">â€proxy_max_temp_file_sizeâ€</a>â€è®¾ç½®ä¸´æ—¶æ–‡ä»¶çš„æœ€å¤§å€¼ã€‚</p><p>â€<a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_temp_file_write_size" target="_blank" rel="noreferrer">â€proxy_temp_file_write_sizeâ€</a>â€è®¾ç½®ä¸€æ¬¡å†™å…¥ä¸´æ—¶æ–‡ä»¶çš„å¤§å°ã€‚</p><h3 id="ç¼“å­˜-cache" tabindex="-1">ç¼“å­˜ï¼ˆcacheï¼‰ <a class="header-anchor" href="#ç¼“å­˜-cache" aria-hidden="true">#</a></h3><p>å¯ç”¨ç¼“å­˜åï¼Œnginxå°†å“åº”ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®é¦–å…ˆä»ç¼“å­˜ä¸­è·å–ï¼Œè¿™æ ·å­ç›¸åŒçš„è¯·æ±‚ä¸ç”¨æ¯æ¬¡éƒ½å‘é€ç»™åç«¯æœåŠ¡å™¨ï¼Œå‡å°‘åˆ°åç«¯è¯·æ±‚çš„æ•°é‡ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659599505974-889b4227-80eb-4deb-8bae-303828cc3bc4.png" alt="img"></p><p>å¯ç”¨ç¼“å­˜ï¼Œéœ€è¦åœ¨httpä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path" target="_blank" rel="noreferrer">proxy_cache_path</a> æŒ‡ä»¤ï¼Œå®šä¹‰ç¼“å­˜çš„æœ¬åœ°æ–‡ä»¶ç›®å½•ï¼Œåç§°å’Œå¤§å°ã€‚</p><p>ç¼“å­˜åŒºå¯ä»¥è¢«å¤šä¸ªserverå…±äº«ï¼Œä½¿ç”¨<a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache" target="_blank" rel="noreferrer">proxy_cache</a> æŒ‡å®šä½¿ç”¨å“ªä¸ªç¼“å­˜åŒºã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">http</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_cache_path </span><span style="color:#E1E4E8;">/data/nginx/cache keys_zone=mycache:10m;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache </span><span style="color:#E1E4E8;">mycache;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">           </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8000;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ç¼“å­˜ç›®å½•çš„æ–‡ä»¶åæ˜¯ <a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_key" target="_blank" rel="noreferrer">proxy_cache_key</a> çš„MD5å€¼ã€‚</p><p>ä¾‹å¦‚ï¼š<code>/data/nginx/cache/**c**/**29**/b7f54b2df7773722d382f4809d650**29c**</code></p><p><a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_key" target="_blank" rel="noreferrer">proxy_cache_key</a> é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">proxy_cache_key </span><span style="color:#E1E4E8;">$scheme$proxy_host$uri$is_args$args;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç¼“å­˜çš„é”®ï¼Œä¾‹å¦‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">proxy_cache_key </span><span style="color:#9ECBFF;">&quot;$</span><span style="color:#E1E4E8;">host</span><span style="color:#9ECBFF;">$</span><span style="color:#E1E4E8;">request_uri</span><span style="color:#9ECBFF;">$</span><span style="color:#E1E4E8;">cookie_user</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç¼“å­˜ä¸åº”è¯¥è®¾ç½®çš„å¤ªæ•æ„Ÿï¼Œå¯ä»¥ä½¿ç”¨<a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_min_uses" target="_blank" rel="noreferrer">proxy_cache_min_uses</a>è®¾ç½®ç›¸åŒçš„keyçš„è¯·æ±‚ï¼Œè®¿é—®æ¬¡æ•°è¶…è¿‡æŒ‡å®šæ•°é‡æ‰ä¼šè¢«ç¼“å­˜ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">proxy_cache_min_uses </span><span style="color:#E1E4E8;">5;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå“åº”æ— é™æœŸåœ°ä¿ç•™åœ¨ç¼“å­˜ä¸­ã€‚ä»…å½“ç¼“å­˜è¶…è¿‡æœ€å¤§é…ç½®å¤§å°æ—¶ï¼ŒæŒ‰ç…§æ—¶é—´åˆ é™¤æœ€æ—§çš„æ•°æ®ã€‚</p><h3 id="ç¤ºä¾‹" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹" aria-hidden="true">#</a></h3><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">proxy_cache_path </span><span style="color:#E1E4E8;">/var/cache/nginx/data keys_zone=mycache:10m;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8001;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">ruoyi.localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#è®¾ç½®buffer</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_buffers </span><span style="color:#E1E4E8;">16 </span><span style="color:#79B8FF;">4k</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_buffer_size </span><span style="color:#E1E4E8;">2k;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;        </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">\\.(js|css|png|jpg|gif|ico) </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#è®¾ç½®cache</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache </span><span style="color:#E1E4E8;">mycache;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">200 </span><span style="color:#79B8FF;">302</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">404      </span><span style="color:#79B8FF;">1m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">any </span><span style="color:#79B8FF;">5m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">/html/ie.html </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache </span><span style="color:#E1E4E8;">mycache;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">200 </span><span style="color:#79B8FF;">302</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">404      </span><span style="color:#79B8FF;">1m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">any </span><span style="color:#79B8FF;">5m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">^~</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">/fonts/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache </span><span style="color:#E1E4E8;">mycache;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">200 </span><span style="color:#79B8FF;">302</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">404      </span><span style="color:#79B8FF;">1m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_cache_valid </span><span style="color:#E1E4E8;">any </span><span style="color:#79B8FF;">5m</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/</a></p><p><a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/content-cache/content-caching/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/content-cache/content-caching/</a></p><p><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path" target="_blank" rel="noreferrer">http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path</a></p><h1 id="_6-è´Ÿè½½å‡è¡¡" tabindex="-1"><strong>6.è´Ÿè½½å‡è¡¡</strong> <a class="header-anchor" href="#_6-è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a></h1><p>è·¨å¤šä¸ªåº”ç”¨ç¨‹åºå®ä¾‹çš„è´Ÿè½½å¹³è¡¡æ˜¯ä¸€ç§å¸¸ç”¨æŠ€æœ¯ï¼Œç”¨äºä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡ã€æœ€å¤§åŒ–ååé‡ã€å‡å°‘å»¶è¿Ÿå’Œç¡®ä¿å®¹é”™é…ç½®ã€‚â€ä½¿ç”¨nginxä½œä¸ºéå¸¸æœ‰æ•ˆçš„HTTPè´Ÿè½½å¹³è¡¡å™¨ï¼Œå°†æµé‡åˆ†é…åˆ°å¤šä¸ªåº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œå¯ä»¥æå‡Webåº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œæé«˜æ‰©å±•æ€§å’Œå¯é æ€§ã€‚</p><h3 id="é…ç½®æœåŠ¡ç»„" tabindex="-1">é…ç½®æœåŠ¡ç»„ <a class="header-anchor" href="#é…ç½®æœåŠ¡ç»„" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659424182326-cbf92b95-7038-436a-bf74-d086ef1db637.png" alt="img"></p><p>ä½¿ç”¨ <code>upstream</code>å®šä¹‰ä¸€ç»„æœåŠ¡ ã€‚</p><p>æ³¨æ„ï¼šupstream ä½äº httpä¸Šä¸‹æ–‡ä¸­ï¼Œä¸server å¹¶åˆ—ï¼Œä¸è¦æ”¾åœ¨serverä¸­ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">upstream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ruoyi-apps </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#ä¸å†™ï¼Œé‡‡ç”¨è½®å¾ªæœºåˆ¶</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> localhost:8080;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> localhost:8088;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8003;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">ruoyi.loadbalance;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://ruoyi-apps;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="è´Ÿè½½å‡è¡¡ç­–ç•¥" tabindex="-1">è´Ÿè½½å‡è¡¡ç­–ç•¥ <a class="header-anchor" href="#è´Ÿè½½å‡è¡¡ç­–ç•¥" aria-hidden="true">#</a></h3><h4 id="_1-è½®å¾ªæœºåˆ¶-round-robin" tabindex="-1">1.è½®å¾ªæœºåˆ¶ï¼ˆround-robinï¼‰ <a class="header-anchor" href="#_1-è½®å¾ªæœºåˆ¶-round-robin" aria-hidden="true">#</a></h4><p>é»˜è®¤æœºåˆ¶ï¼Œä»¥è½®å¾ªæœºåˆ¶æ–¹å¼åˆ†å‘ã€‚</p><h4 id="_2-æœ€å°è¿æ¥-least-connected" tabindex="-1">2.<a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#least_conn" target="_blank" rel="noreferrer">æœ€å°è¿æ¥</a>ï¼ˆleast-connected ï¼‰ <a class="header-anchor" href="#_2-æœ€å°è¿æ¥-least-connected" aria-hidden="true">#</a></h4><p>å°†ä¸‹ä¸€ä¸ªè¯·æ±‚åˆ†é…ç»™æ´»åŠ¨è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨ï¼ˆè¾ƒä¸ºç©ºé—²çš„æœåŠ¡å™¨ï¼‰ã€‚â€</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">upstream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">backend </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">least_conn</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend1.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend2.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¯·æ³¨æ„ï¼Œä½¿ç”¨è½®å¾ªæœºåˆ¶æˆ–æœ€å°‘è¿æ¥çš„è´Ÿè½½å¹³è¡¡ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½å¯èƒ½åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ã€‚ä¸èƒ½ä¿è¯åŒä¸€å®¢æˆ·ç«¯å°†å§‹ç»ˆå®šå‘åˆ°åŒä¸€æœåŠ¡å™¨ã€‚â€</p><h4 id="_3-ip-hash" tabindex="-1">3.<a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#ip_hash" target="_blank" rel="noreferrer">ip-hash</a> <a class="header-anchor" href="#_3-ip-hash" aria-hidden="true">#</a></h4><p>å®¢æˆ·ç«¯çš„ IP åœ°å€å°†ç”¨ä½œå“ˆå¸Œé”®ï¼Œæ¥è‡ªåŒä¸€ä¸ªipçš„è¯·æ±‚ä¼šè¢«è½¬å‘åˆ°ç›¸åŒçš„æœåŠ¡å™¨ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">upstream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">backend </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">ip_hash</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend1.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend2.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ­¤æ–¹æ³•å¯ç¡®ä¿æ¥è‡ªåŒä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚å°†å§‹ç»ˆå®šå‘åˆ°åŒä¸€æœåŠ¡å™¨ï¼Œé™¤éæ­¤æœåŠ¡å™¨ä¸å¯ç”¨ã€‚â€</p><h4 id="â€4-hash" tabindex="-1"><a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#hash" target="_blank" rel="noreferrer">â€4.hash</a> <a class="header-anchor" href="#â€4-hash" aria-hidden="true">#</a></h4><p>é€šç”¨hashï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰hashçš„keyï¼Œkeyå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å˜é‡æˆ–ç»„åˆã€‚</p><p>ä¾‹å¦‚ï¼Œkeyå¯ä»¥æ˜¯é…å¯¹çš„æº IP åœ°å€å’Œç«¯å£ï¼Œä¹Ÿå¯ä»¥æ˜¯ URIï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼šâ€</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">upstream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">backend </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> hash </span><span style="color:#E1E4E8;">$request_uri consistent;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend1.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend2.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¯·æ³¨æ„ï¼šåŸºäº IP çš„å“ˆå¸Œç®—æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å½“æœ‰ä¸€ä¸ªä¸Šæ¸¸æœåŠ¡å™¨å®•æœºæˆ–è€…æ‰©å®¹çš„æ—¶å€™ï¼Œä¼šå¼•å‘å¤§é‡çš„è·¯ç”±å˜æ›´ï¼Œè¿›è€Œå¼•å‘è¿é”ååº”ï¼Œå¯¼è‡´å¤§é‡ç¼“å­˜å¤±æ•ˆç­‰é—®é¢˜ã€‚</p><p><code>consistent</code>å‚æ•°å¯ç”¨ â€<a href="http://www.last.fm/user/RJ/journal/2007/04/10/rz_libketama_-_a_consistent_hashing_algo_for_memcache_clients" target="_blank" rel="noreferrer">â€ketamaâ€</a>â€ ä¸€è‡´å“ˆå¸Œç®—æ³•ï¼Œå¦‚æœåœ¨ä¸Šæ¸¸ç»„ä¸­æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨ï¼Œåªä¼šé‡æ–°æ˜ å°„éƒ¨åˆ†é”®ï¼Œä»è€Œæœ€å¤§é™åº¦åœ°å‡å°‘ç¼“å­˜å¤±æ•ˆã€‚â€</p><p>å‡è®¾æˆ‘ä»¬åŸºäº key æ¥åš hashï¼Œç°åœ¨æœ‰ 4 å°ä¸Šæ¸¸æœåŠ¡å™¨ï¼Œå¦‚æœ hash ç®—æ³•å¯¹ key å–æ¨¡ï¼Œè¯·æ±‚æ ¹æ®ç”¨æˆ·å®šä¹‰çš„å“ˆå¸Œé”®å€¼å‡åŒ€åˆ†å¸ƒåœ¨æ‰€æœ‰ä¸Šæ¸¸æœåŠ¡å™¨ä¹‹é—´ã€‚ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659518154051-3160e796-eeb0-47e9-9dff-204359a5c06b.png" alt="img">å½“æœ‰ä¸€å°æœåŠ¡å™¨å®•æœºçš„æ—¶å€™ï¼Œå°±éœ€è¦é‡æ–°å¯¹ key è¿›è¡Œ hashï¼Œæœ€åä¼šå‘ç°æ‰€æœ‰çš„å¯¹åº”å…³ç³»å…¨éƒ½å¤±æ•ˆäº†ï¼Œä»è€Œä¼šå¼•å‘ç¼“å­˜å¤§èŒƒå›´å¤±æ•ˆã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659518106125-461a8771-50aa-4033-864c-43bc91f516d6.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659518178713-4ea13d8a-6993-41ba-aa7d-29421fb7c650.png" alt="img"></p><h4 id="_5-â€éšæœºâ€â€-random" tabindex="-1">5.<a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#random" target="_blank" rel="noreferrer">â€éšæœºâ€</a>â€ (randomï¼‰ <a class="header-anchor" href="#_5-â€éšæœºâ€â€-random" aria-hidden="true">#</a></h4><p>æ¯ä¸ªè¯·æ±‚éƒ½å°†ä¼ é€’åˆ°éšæœºé€‰æ‹©çš„æœåŠ¡å™¨ã€‚</p><p>twoæ˜¯å¯é€‰å‚æ•°ï¼ŒNGINX åœ¨è€ƒè™‘æœåŠ¡å™¨æƒé‡çš„æƒ…å†µä¸‹éšæœºé€‰æ‹©ä¸¤å°æœåŠ¡å™¨ï¼Œç„¶åä½¿ç”¨æŒ‡å®šçš„æ–¹æ³•é€‰æ‹©å…¶ä¸­ä¸€å°ï¼Œé»˜è®¤ä¸ºé€‰æ‹©è¿æ¥æ•°æœ€å°‘ï¼ˆleast_connâ€ï¼‰çš„æœåŠ¡å™¨ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">upstream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">backend </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> random </span><span style="color:#E1E4E8;">two least_conn;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend1.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend2.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend3.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend4.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_6-æƒé‡-weight" tabindex="-1">6.æƒé‡ï¼ˆweightï¼‰ <a class="header-anchor" href="#_6-æƒé‡-weight" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659425649735-e2fdb0a4-5aaa-4a0e-81b3-44a8f7682c9c.png" alt="img"></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">upstream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">my-server </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> performance.server </span><span style="color:#FFAB70;">weight</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server app1.server;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> app2.server;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>â€å¦‚ä¸Šæ‰€ç¤ºï¼Œæ¯ 5 ä¸ªæ–°è¯·æ±‚å°†æŒ‰å¦‚ä¸‹æ–¹å¼åˆ†å¸ƒåœ¨åº”ç”¨ç¨‹åºå®ä¾‹ä¸­ï¼š3 ä¸ªè¯·æ±‚å°†å®šå‘åˆ°performance.serverï¼Œä¸€ä¸ªè¯·æ±‚å°†è½¬åˆ°app1.serverï¼Œå¦ä¸€ä¸ªè¯·æ±‚å°†è½¬åˆ°app2.serverã€‚â€</p><h4 id="_7-å¥åº·æ£€æŸ¥" tabindex="-1">7.å¥åº·æ£€æŸ¥ <a class="header-anchor" href="#_7-å¥åº·æ£€æŸ¥" aria-hidden="true">#</a></h4><p>åœ¨åå‘ä»£ç†ä¸­ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨åœ¨æŸä¸ªå‘¨æœŸå†…å“åº”å¤±è´¥æ¬¡æ•°è¶…è¿‡è§„å®šå€¼ï¼Œnginxä¼šå°†æ­¤æœåŠ¡å™¨æ ‡è®°ä¸ºå¤±è´¥ï¼Œå¹¶åœ¨ä¹‹åçš„ä¸€ä¸ªå‘¨æœŸä¸å†å°†è¯·æ±‚å‘é€ç»™è¿™å°æœåŠ¡å™¨ã€‚â€</p><p>é€šè¿‡<a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#fail_timeout" target="_blank" rel="noreferrer">fail_timeoutâ€</a>â€ æ¥è®¾ç½®æ£€æŸ¥å‘¨æœŸï¼Œé»˜è®¤ä¸º10ç§’ã€‚</p><p>é€šè¿‡<a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#max_fails" target="_blank" rel="noreferrer">max_failsâ€</a>æ¥è®¾ç½®æ£€æŸ¥å¤±è´¥æ¬¡æ•°ï¼Œé»˜è®¤ä¸º1æ¬¡ã€‚â€</p><p>â€åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œå¦‚æœNGINXæ— æ³•å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æˆ–åœ¨30ç§’å†…è¯·æ±‚å¤±è´¥æ¬¡æ•°è¶…è¿‡3æ¬¡ï¼Œåˆ™ä¼šå°†æœåŠ¡å™¨æ ‡è®°ä¸ºä¸å¯ç”¨30ç§’ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">upstream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">backend </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend1.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> backend2.example.com </span><span style="color:#FFAB70;">max_fails</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> fail_timeout=30s; </span></span>
<span class="line"><span style="color:#E1E4E8;">} </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://nginx.org/en/docs/http/load_balancing.html" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/load_balancing.html</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/</a></p><h1 id="_7-httpsé…ç½®" tabindex="-1"><strong>7.HTTPSé…ç½®</strong> <a class="header-anchor" href="#_7-httpsé…ç½®" aria-hidden="true">#</a></h1><p>HTTPS åè®®æ˜¯<strong>ç”±HTTP åŠ ä¸ŠTLS/SSL åè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®</strong>ï¼Œä¸»è¦é€šè¿‡æ•°å­—è¯ä¹¦ã€åŠ å¯†ç®—æ³•ã€éå¯¹ç§°å¯†é’¥ç­‰æŠ€æœ¯å®Œæˆäº’è”ç½‘æ•°æ®ä¼ è¾“åŠ å¯†ï¼Œå®ç°äº’è”ç½‘ä¼ è¾“å®‰å…¨ä¿æŠ¤ã€‚</p><h3 id="ç”Ÿæˆè¯ä¹¦" tabindex="-1">ç”Ÿæˆè¯ä¹¦ <a class="header-anchor" href="#ç”Ÿæˆè¯ä¹¦" aria-hidden="true">#</a></h3><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">openssl</span><span style="color:#E1E4E8;"> genrsa -des3 -out server.key 2048</span></span>
<span class="line"><span style="color:#F97583;">openssl</span><span style="color:#E1E4E8;"> req -new -key server.key -out server.csr</span></span>
<span class="line"><span style="color:#F97583;">openssl</span><span style="color:#E1E4E8;"> x509 -req -days </span><span style="color:#79B8FF;">365</span><span style="color:#E1E4E8;"> -in server.csr -signkey server.key -out server.crt</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="é…ç½®ssl" tabindex="-1">é…ç½®ssl <a class="header-anchor" href="#é…ç½®ssl" aria-hidden="true">#</a></h3><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">             </span><span style="color:#79B8FF;">443</span><span style="color:#E1E4E8;"> ssl;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">        ruoyi.https;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> ssl_certificate </span><span style="color:#E1E4E8;">    /home/ssl/server.crt;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> ssl_certificate_key </span><span style="color:#E1E4E8;">/home/ssl/server.key;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> ssl_protocols </span><span style="color:#E1E4E8;">      TLSv1 TLSv1.1 TLSv1.2;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> ssl_ciphers </span><span style="color:#E1E4E8;">        HIGH:!aNULL:!MD5;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å¦‚æœè®¾ç½®äº†å¯†ç ï¼Œéœ€è¦åŠ ä¸Š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">server{</span></span>
<span class="line"><span style="color:#E1E4E8;">  â€¦â€¦</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_password_file </span><span style="color:#E1E4E8;">  /home/ssl/cert.pass;</span></span>
<span class="line"><span style="color:#E1E4E8;">  â€¦â€¦</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="httpsä¼˜åŒ–" tabindex="-1">httpsä¼˜åŒ– <a class="header-anchor" href="#httpsä¼˜åŒ–" aria-hidden="true">#</a></h3><p>SSL æ“ä½œä¼šæ¶ˆè€—é¢å¤–çš„ CPU èµ„æºã€‚CPU å ç”¨æœ€å¤šçš„æ“ä½œæ˜¯ SSL æ¡æ‰‹ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘æ¯ä¸ªå®¢æˆ·ç«¯çš„è¿™äº›æ“ä½œæ•°ï¼š</p><ul><li>ä½¿ä¿æŒæ´»åŠ¨è¿æ¥èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ªè¿æ¥å‘é€å¤šä¸ªè¯·æ±‚</li><li>é‡ç”¨ SSL ä¼šè¯å‚æ•°ä»¥é¿å…å¹¶è¡Œè¿æ¥å’Œåç»­è¿æ¥çš„ SSL æ¡æ‰‹</li></ul><p>ä¼šè¯å­˜å‚¨åœ¨å·¥ä½œè¿›ç¨‹ä¹‹é—´å…±äº«å¹¶ç”± <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_cache" target="_blank" rel="noreferrer">ssl_session_cache</a> æŒ‡ä»¤é…ç½®çš„ SSL ä¼šè¯ç¼“å­˜ä¸­ã€‚ä¸€å…†å­—èŠ‚çš„ç¼“å­˜åŒ…å«å¤§çº¦ 4000 ä¸ªä¼šè¯ã€‚é»˜è®¤ç¼“å­˜è¶…æ—¶ä¸º 5 åˆ†é’Ÿã€‚å¯ä»¥ä½¿ç”¨ <a href="https://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_timeout" target="_blank" rel="noreferrer">ssl_session_timeout</a> æŒ‡ä»¤å¢åŠ æ­¤è¶…æ—¶ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹å…·æœ‰ 10 MB å…±äº«ä¼šè¯ç¼“å­˜çš„å¤šæ ¸ç³»ç»Ÿä¼˜åŒ–çš„ç¤ºä¾‹é…ç½®ï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">ssl_session_cache </span><span style="color:#E1E4E8;">  shared:SSL:10m;</span></span>
<span class="line"><span style="color:#F97583;">ssl_session_timeout </span><span style="color:#E1E4E8;">10m;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="http://nginx.org/en/docs/http/configuring_https_servers.html" target="_blank" rel="noreferrer">http://nginx.org/en/docs/http/configuring_https_servers.html</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/security-controls/terminating-ssl-http/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/security-controls/terminating-ssl-http/</a></p><h1 id="_8-tcpåå‘ä»£ç†" tabindex="-1"><strong>8.TCPåå‘ä»£ç†</strong> <a class="header-anchor" href="#_8-tcpåå‘ä»£ç†" aria-hidden="true">#</a></h1><h3 id="_1-stream" tabindex="-1">1.stream <a class="header-anchor" href="#_1-stream" aria-hidden="true">#</a></h3><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#HTTPä»£ç†</span></span>
<span class="line"><span style="color:#F97583;">http</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8002;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8080/;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#TCPä»£ç†</span></span>
<span class="line"><span style="color:#F97583;">stream</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">13306;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">localhost:3306;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_2-tcpè´Ÿè½½å‡è¡¡" tabindex="-1">2.tcpè´Ÿè½½å‡è¡¡ <a class="header-anchor" href="#_2-tcpè´Ÿè½½å‡è¡¡" aria-hidden="true">#</a></h3><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">stream</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">upstream</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">backend-mysql </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> localhost:3306;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> localhost:3307;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> keepalive </span><span style="color:#E1E4E8;">8;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">13306;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">backend-mysql;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ä½¿ç”¨<code>**keepalive**</code>å®šä¹‰è¿æ¥æ± é‡Œç©ºé—²è¿æ¥çš„æ•°é‡ã€‚</p><p><code>**keepalive_timeout**</code> é»˜è®¤60sã€‚å¦‚æœè¿æ¥æ± é‡Œçš„è¿æ¥ç©ºé—²æ—¶é—´è¶…è¿‡è¿™ä¸ªå€¼ï¼Œåˆ™è¿æ¥å…³é—­ã€‚</p><p>åœ¨æœ€ç®€å•çš„ HTTP å®ç°ä¸­ï¼Œå®¢æˆ·ç«¯æ‰“å¼€æ–°è¿æ¥ï¼Œå†™å…¥è¯·æ±‚ï¼Œè¯»å–å“åº”ï¼Œç„¶åå…³é—­è¿æ¥ä»¥é‡Šæ”¾å…³è”çš„èµ„æºã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659513123084-afe08b7c-223b-4b8c-8f47-9e1ee09a2303.png" alt="img"></p><p>åœ¨å®¢æˆ·ç«¯è¯»å–å“åº”åï¼Œä¿æŒè¿æ¥å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œå› æ­¤å¯ä»¥å°†å…¶é‡æ–°ç”¨äºåç»­è¯·æ±‚ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1659513122399-c3e4f8c4-d154-4bc3-b073-6303c2ff67bd.png" alt="img"></p><p>ä½¿ç”¨ <a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive" target="_blank" rel="noreferrer">keepalive</a> æŒ‡ä»¤å¯ç”¨ä» NGINX Plus åˆ°ä¸Šæ¸¸æœåŠ¡å™¨çš„ä¿æŒæ´»åŠ¨è¿æ¥ï¼Œå®šä¹‰åœ¨æ¯ä¸ªå·¥ä½œè¿›ç¨‹çš„ç¼“å­˜ä¸­ä¿ç•™çš„ä¸ä¸Šæ¸¸æœåŠ¡å™¨çš„ç©ºé—²ä¿æŒæ´»åŠ¨è¿æ¥çš„æœ€å¤§æ•°é‡ã€‚å½“è¶…è¿‡æ­¤æ•°å­—æ—¶ï¼Œå°†å…³é—­æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„è¿æ¥ã€‚å¦‚æœæ²¡æœ‰ keepalivesï¼Œæ‚¨å°†å¢åŠ æ›´å¤šçš„å¼€é”€ï¼Œå¹¶ä¸”è¿æ¥å’Œä¸´æ—¶ç«¯å£éƒ½æ•ˆç‡ä½ä¸‹ã€‚</p><p>ç°ä»£ Web æµè§ˆå™¨é€šå¸¸ä¼šæ‰“å¼€ 6 åˆ° 8 ä¸ªä¿æŒè¿æ¥ã€‚</p><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/tcp-udp-load-balancer/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/load-balancer/tcp-udp-load-balancer/</a></p><p><a href="https://www.nginx.com/blog/http-keepalives-and-web-performance/" target="_blank" rel="noreferrer">https://www.nginx.com/blog/http-keepalives-and-web-performance/</a></p><p><a href="https://www.nginx.com/blog/overcoming-ephemeral-port-exhaustion-nginx-plus/" target="_blank" rel="noreferrer">https://www.nginx.com/blog/overcoming-ephemeral-port-exhaustion-nginx-plus/</a></p><h1 id="_9-é‡å†™-returnå’Œrewrite-é‡å†™" tabindex="-1"><strong>9.é‡å†™(returnå’Œ</strong>rewrite(é‡å†™)<strong>)</strong> <a class="header-anchor" href="#_9-é‡å†™-returnå’Œrewrite-é‡å†™" aria-hidden="true">#</a></h1><p>nginxæœ‰ä¸¤ä¸ªé‡å†™æŒ‡ä»¤ï¼š<code>return</code>å’Œ<code>rewrite</code></p><h2 id="return" tabindex="-1">return <a class="header-anchor" href="#return" aria-hidden="true">#</a></h2><p>æœåŠ¡ç«¯åœæ­¢å¤„ç†å¹¶å°†çŠ¶æ€ç status codeè¿”å›ç»™å®¢æˆ·ç«¯</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">return *code* *URL*</span></span>
<span class="line"><span style="color:#e1e4e8;">return *code* *text*</span></span>
<span class="line"><span style="color:#e1e4e8;">return *code*</span></span>
<span class="line"><span style="color:#e1e4e8;">return *URL*</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="å¼ºåˆ¶æ‰€æœ‰è¯·æ±‚ä½¿ç”¨https" tabindex="-1">å¼ºåˆ¶æ‰€æœ‰è¯·æ±‚ä½¿ç”¨Https <a class="header-anchor" href="#å¼ºåˆ¶æ‰€æœ‰è¯·æ±‚ä½¿ç”¨https" aria-hidden="true">#</a></h3><p>é”™è¯¯å†™æ³•</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8003;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">ruoyi.loadbalance;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">301</span><span style="color:#E1E4E8;"> https://localhost:8004;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ­£ç¡®å†™æ³•</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8003;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">ruoyi.loadbalance;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">301</span><span style="color:#E1E4E8;"> https://192.168.56.105:8004;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="è½¬å‘å’Œé‡å®šå‘" tabindex="-1">è½¬å‘å’Œé‡å®šå‘ <a class="header-anchor" href="#è½¬å‘å’Œé‡å®šå‘" aria-hidden="true">#</a></h2><p>è½¬å‘æ˜¯æœåŠ¡ç«¯è¡Œä¸ºï¼Œé‡å®šå‘æ˜¯å®¢æˆ·ç«¯è¡Œä¸ºã€‚</p><h4 id="è½¬å‘" tabindex="-1">è½¬å‘ <a class="header-anchor" href="#è½¬å‘" aria-hidden="true">#</a></h4><p>å‘å‘ä»£ç†proxy_passå±äºè½¬å‘ï¼Œæµè§ˆå™¨çš„è®¿é—®æ è¾“å…¥çš„åœ°å€ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1660027681278-8d232df3-69f1-4bb7-ae31-70dab5777cb7.png" alt="img"></p><h4 id="é‡å®šå‘" tabindex="-1">é‡å®šå‘ <a class="header-anchor" href="#é‡å®šå‘" aria-hidden="true">#</a></h4><p>returnï¼Œrewriteå±äºé‡å®šå‘ï¼Œåœ¨å®¢æˆ·ç«¯è¿›è¡Œã€‚æµè§ˆå™¨çš„è®¿é—®æ è¾“å…¥çš„åœ°å€ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1660014580821-4eae68ec-ecf6-45ef-a5a7-4e33a77efec9.png" alt="img"></p><p>åŸŸåè¿ç§»ï¼Œä¸è®©ç”¨æˆ·æ”¶è—çš„é“¾æ¥æˆ–è€…æœç´¢å¼•æ“çš„é“¾æ¥å¤±æ•ˆ</p><p>å°†è¯·æ±‚ä» <a href="http://www.old-name.com" target="_blank" rel="noreferrer">www.old-name.com</a> <strong><a href="http://old-name.com" target="_blank" rel="noreferrer">old-name.com</a></strong> æ°¸ä¹…é‡å®šå‘åˆ° <strong><a href="http://www.new-name.com" target="_blank" rel="noreferrer">www.new-name.com</a>ï¼ŒåŒ…å«httpå’Œhttpsè¯·æ±‚</strong></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">80;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">443 ssl;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">www.old-name.com old-name.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">301</span><span style="color:#E1E4E8;"> $scheme://www.new-name.com$request_uri;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ç”±äºæ•è·äº†åŸŸååé¢çš„ URL éƒ¨åˆ†ï¼Œå› æ­¤ï¼Œå¦‚æœæ–°æ—§ç½‘ç«™ä¹‹é—´å­˜åœ¨ä¸€å¯¹ä¸€çš„é¡µé¢å¯¹åº”å…³ç³»ï¼ˆä¾‹å¦‚ï¼Œ<strong><a href="http://www.new-name.com/about" target="_blank" rel="noreferrer">www.new-name.com/about</a></strong> å…·æœ‰ä¸ <strong><a href="http://www.old-name.com/about" target="_blank" rel="noreferrer">www.old-name.com/about</a></strong> ç›¸åŒçš„åŸºæœ¬å†…å®¹ï¼‰ï¼Œåˆ™æ­¤é‡å†™æ˜¯åˆé€‚çš„ã€‚å¦‚æœé™¤äº†æ›´æ”¹åŸŸåä¹‹å¤–è¿˜é‡æ–°ç»„ç»‡äº†ç½‘ç«™ï¼Œåˆ™é€šè¿‡çœç•¥ä»¥ä¸‹å†…å®¹ï¼Œå°†æ‰€æœ‰è¯·æ±‚é‡å®šå‘åˆ°ä¸»é¡µå¯èƒ½ä¼šæ›´å®‰å…¨</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">80;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">443 ssl;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">www.old-name.com old-name.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">301</span><span style="color:#E1E4E8;"> $scheme://www.new-name.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ·»åŠ www</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># add &#39;www&#39;</span></span>
<span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">80;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">443 ssl;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">domain.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">301</span><span style="color:#E1E4E8;"> $scheme://www.domain.com$request_uri;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="çŠ¶æ€ç " tabindex="-1">çŠ¶æ€ç  <a class="header-anchor" href="#çŠ¶æ€ç " aria-hidden="true">#</a></h4><ul><li><p>2xx æˆåŠŸ</p></li><li><p>3xx è¡¨ç¤ºé‡å®šå‘</p></li><li><ul><li>301 æ°¸ä¹…é‡å®šå‘</li><li>302 ä¸´æ—¶é‡å®šå‘</li></ul></li><li><p>4xx è¯·æ±‚åœ°å€å‡ºé”™</p></li><li><ul><li>403 æ‹’ç»è¯·æ±‚</li><li>404 è¯·æ±‚æ‰¾ä¸åˆ°</li></ul></li><li><p>5xx æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</p></li></ul><h2 id="rewrite" tabindex="-1">rewrite <a class="header-anchor" href="#rewrite" aria-hidden="true">#</a></h2><p>â€å¦‚æœæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ä¸è¯·æ±‚ URI åŒ¹é…ï¼Œåˆ™ URI å°†æŒ‰ç…§å­—ç¬¦ä¸²ä¸­çš„æŒ‡å®šè¿›è¡Œæ›´æ”¹ã€‚æŒ‡ä»¤æŒ‰å…¶åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># ...</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^(/download/.*)/media/(\\w+)\\.?.*$</span><span style="color:#E1E4E8;"> $1/mp3/$2.mp3</span><span style="color:#79B8FF;"> last</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^(/download/.*)/audio/(\\w+)\\.?.*$</span><span style="color:#E1E4E8;"> $1/mp3/$2.ra </span><span style="color:#79B8FF;"> last</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">403</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä¸Šé¢æ˜¯ä½¿ç”¨è¯¥æŒ‡ä»¤çš„ç¤ºä¾‹ NGINX é‡å†™è§„åˆ™ã€‚å®ƒåŒ¹é…ä»¥å­—ç¬¦ä¸² <strong>/download</strong> å¼€å¤´çš„ URLï¼Œç„¶ååœ¨è·¯å¾„åé¢çš„æŸä¸ªä½ç½®åŒ…å« <strong>/media</strong>/ æˆ– <strong>/audio/</strong> ç›®å½•ã€‚å®ƒå°†è¿™äº›å…ƒç´ æ›¿æ¢ä¸º <strong>/mp3/ï¼Œ<strong>å¹¶æ·»åŠ ç›¸åº”çš„æ–‡ä»¶æ‰©å±•å</strong>ï¼Œ.mp3</strong> æˆ– <strong>.ra</strong>ã€‚å’Œ å˜é‡æ•è·æœªæ›´æ”¹çš„è·¯å¾„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œ<strong>/download/cdn-west/media/file1</strong> å˜æˆäº† <strong>/download/cdn-west/mp3/file1.mp3</strong>ã€‚å¦‚æœæ–‡ä»¶åä¸Šæœ‰æ‰©å±•åï¼ˆå¦‚ <strong>.flv</strong>ï¼‰ï¼Œåˆ™è¡¨è¾¾å¼ä¼šå°†å…¶å‰¥ç¦»ï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸º**.mp3**ã€‚</p><p>å¦‚æœå­—ç¬¦ä¸²åŒ…å«æ–°çš„è¯·æ±‚å‚æ•°ï¼Œåˆ™ä»¥å‰çš„è¯·æ±‚å‚æ•°å°†è¿½åŠ åˆ°è¿™äº›å‚æ•°ä¹‹åã€‚å¦‚æœä¸éœ€è¦è¿™æ ·åšï¼Œåˆ™åœ¨æ›¿æ¢å­—ç¬¦ä¸²çš„æœ«å°¾æ”¾ç½®ä¸€ä¸ªé—®å·å¯ä»¥é¿å…é™„åŠ å®ƒä»¬ï¼Œä¾‹å¦‚ï¼š<em>replacement</em></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^/users/(.*)$</span><span style="color:#E1E4E8;"> /show?user=$1?</span><span style="color:#79B8FF;"> last</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="lastä¸break" tabindex="-1">lastä¸break <a class="header-anchor" href="#lastä¸break" aria-hidden="true">#</a></h2><p><code>last</code>ï¼šå¦‚æœå½“å‰è§„åˆ™ä¸åŒ¹é…ï¼Œåœæ­¢å¤„ç†åç»­rewriteè§„åˆ™ï¼Œä½¿ç”¨é‡å†™åçš„è·¯å¾„ï¼Œé‡æ–°æœç´¢locationåŠå…¶å—å†…æŒ‡ä»¤</p><p><code>break</code>:å¦‚æœå½“å‰è§„åˆ™ä¸åŒ¹é…ï¼Œåœæ­¢å¤„ç†åç»­rewriteè§„åˆ™ï¼Œæ‰§è¡Œ{}å—å†…å…¶ä»–æŒ‡ä»¤</p><h3 id="ä¸ä½¿ç”¨lastå’Œbreak" tabindex="-1">ä¸ä½¿ç”¨lastå’Œbreak <a class="header-anchor" href="#ä¸ä½¿ç”¨lastå’Œbreak" aria-hidden="true">#</a></h3><p>åœ¨root /home/AdminLTE-3.2.0/pagesä¸‹åˆ›å»ºä¸€ä¸ª1.txtï¼Œé‡Œé¢å†…å®¹æ˜¯<code>this is a file</code></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8000;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">nginx-dev;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> rewrite_log </span><span style="color:#E1E4E8;">on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^/old/(.*) /new/$</span><span style="color:#E1E4E8;">1;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^/new/(.*) /pages/$</span><span style="color:#E1E4E8;">1;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#æ ¹ç›®å½•</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/home/AdminLTE-3.2.0;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#é¦–é¡µ</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> index </span><span style="color:#E1E4E8;">index.html index2.html index3.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">/pages/1.txt </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;this is rewrite test!&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>é»˜è®¤æŒ‰é¡ºåºæ‰§è¡Œã€‚</p><p>è®¿é—® <a href="http://192.168.56.105:8000/old/1.txt" target="_blank" rel="noreferrer">http://192.168.56.105:8000/old/1.txt</a></p><p>ç»“æœï¼š<code>this is rewrite test!</code></p><p>æ—¥å¿—ï¼š</p><div class="language-latex line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">latex</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">[notice] 26837#26837: *1181 &quot;^/old/(.*)&quot; matches &quot;/old/1.txt&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[notice] 26837#26837: *1181 rewritten data: &quot;/new/1.txt&quot;, args: &quot;&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[notice] 26837#26837: *1181 &quot;^/new/(.*)&quot; matches &quot;/new/1.txt&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[notice] 26837#26837: *1181 rewritten data: &quot;/pages/1.txt&quot;, args: &quot;&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="ä½¿ç”¨break" tabindex="-1">ä½¿ç”¨break <a class="header-anchor" href="#ä½¿ç”¨break" aria-hidden="true">#</a></h3><p>è®¿é—® <a href="http://192.168.56.105:8000/old/1.txt" target="_blank" rel="noreferrer">http://192.168.56.105:8000/old/1.txt</a></p><p>1.åŒ¹é…åˆ°äº†<code>rewrite ^/old/(.*) /new/$1</code></p><p>2.<code>**break**</code>æŒ‡ä»¤ä¸æ‰§è¡Œåç»­çš„rewriteè§„åˆ™,ä»¥æ–°çš„<code>/new/1.txt</code>è·¯å¾„å»æ‰§è¡Œå—å†…çš„å…¶ä»–æŒ‡ä»¤</p><p>\\3. å»<code>root</code>ç›®å½•ä¸‹å¯»æ‰¾æ–‡ä»¶, ç”±äºä¸å†æ‘<code>/home/AdminLTE-3.2.0/new/1.txt</code>è¿™ä¸ªæ–‡ä»¶ï¼Œè¿”å›404</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8000;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">nginx-dev;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> rewrite_log </span><span style="color:#E1E4E8;">on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^/old/(.*) /new/$</span><span style="color:#E1E4E8;">1 </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^/new/(.*) /pages/$</span><span style="color:#E1E4E8;">1;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#æ ¹ç›®å½•</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/home/AdminLTE-3.2.0;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#é¦–é¡µ</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> index </span><span style="color:#E1E4E8;">index.html index2.html index3.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">/pages/1.txt </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;this is rewrite test!&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>è®¿é—® <a href="http://192.168.56.105:8000/old/1.txt" target="_blank" rel="noreferrer">http://192.168.56.105:8000/old/1.txt</a></p><p>ç»“æœï¼š</p><p><img src="https://raw.githubusercontent.com/DunXi/images/main/img/1660113329221-e8f2be96-2c99-4d9c-a3a7-ac6ea48f5992.png" alt="img"></p><p>è®¿é—®æ—¥å¿—ï¼š</p><div class="language-latex line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">latex</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">[notice] 26772#26772: *1179 &quot;^/old/(.*)&quot; matches &quot;/old/1.txt&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[notice] 26772#26772: *1179 rewritten data: &quot;/new/1.txt&quot;, args: &quot;&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[error] 26772#26772: *1179 open() &quot;/home/AdminLTE-3.2.0/new/1.txt&quot; failed (2: No such file or directory), client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="ä½¿ç”¨last" tabindex="-1">ä½¿ç”¨last <a class="header-anchor" href="#ä½¿ç”¨last" aria-hidden="true">#</a></h3><p>è®¿é—® <a href="http://192.168.56.105:8000/old/1.txt" target="_blank" rel="noreferrer">http://192.168.56.105:8000/old/1.txt</a></p><p>1.åŒ¹é…åˆ°äº†<code>rewrite ^/old/(.*) /new/$1</code></p><p>2.<code>**last**</code>æŒ‡ä»¤ä¸æ‰§è¡Œåç»­çš„rewriteè§„åˆ™,ä»¥æ–°çš„<code>/new/1.txt</code>è·¯å¾„å»åŒ¹é…location</p><p>3.å…ˆåŒ¹é…åˆ°<code>location /</code>, æœ‰åŒ¹é…åˆ°locationé‡Œçš„<code>rewrite ^/new/(.*) /pages/$1</code>è§„åˆ™ï¼Œé‡å®šå‘åˆ°</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#e1e4e8;">/pages/1.txt</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>4.åŒ¹é…åˆ°äº†<code>location /pages/1.txt</code> ï¼Œäºæ˜¯è¿”å›äº†<code>this is rewrite test!</code></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8000;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">nginx-dev;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> rewrite_log </span><span style="color:#E1E4E8;">on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^/old/(.*) /new/$</span><span style="color:#E1E4E8;">1</span><span style="color:#79B8FF;"> last</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^/new/(.*) /pages/$</span><span style="color:#E1E4E8;">1;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#æ ¹ç›®å½•</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/home/AdminLTE-3.2.0;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#é¦–é¡µ</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> index </span><span style="color:#E1E4E8;">index.html index2.html index3.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">/pages/1.txt </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;this is rewrite test!&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>è®¿é—® <a href="http://192.168.56.105:8000/old/1.txt" target="_blank" rel="noreferrer">http://192.168.56.105:8000/old/1.txt</a></p><p>ç»“æœï¼š<code>this is rewrite test!</code></p><p>æ—¥å¿—ï¼š</p><div class="language-latex line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">latex</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">[notice] 26969#26969: *1185 &quot;^/old/(.*)&quot; matches &quot;/old/1.txt&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[notice] 26969#26969: *1185 rewritten data: &quot;/new/1.txt&quot;, args: &quot;&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[notice] 26969#26969: *1185 &quot;^/old/(.*)&quot; does not match &quot;/new/1.txt&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[notice] 26969#26969: *1185 &quot;^/new/(.*)&quot; matches &quot;/new/1.txt&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">[notice] 26969#26969: *1185 rewritten data: &quot;/pages/1.txt&quot;, args: &quot;&quot;, client: 192.168.56.1, server: nginx-dev, request: &quot;GET /old/1.txt HTTP/1.1&quot;, host: &quot;192.168.56.105:8000&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://www.nginx.com/blog/creating-nginx-rewrite-rules/" target="_blank" rel="noreferrer">https://www.nginx.com/blog/creating-nginx-rewrite-rules/</a></p><p><a href="https://nginx.org/en/docs/http/ngx_http_rewrite_module.html#return" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/ngx_http_rewrite_module.html</a></p><p><a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" target="_blank" rel="noreferrer">https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</a></p><h1 id="_10-å…¶ä»–å¸¸è§æŒ‡ä»¤" tabindex="-1"><strong>10.å…¶ä»–å¸¸è§æŒ‡ä»¤</strong> <a class="header-anchor" href="#_10-å…¶ä»–å¸¸è§æŒ‡ä»¤" aria-hidden="true">#</a></h1><h3 id="gzipå‹ç¼©" tabindex="-1">gzipå‹ç¼© <a class="header-anchor" href="#gzipå‹ç¼©" aria-hidden="true">#</a></h3><p>å‹ç¼©å“åº”é€šå¸¸ä¼šæ˜¾è‘—å‡å°ä¼ è¾“æ•°æ®çš„å¤§å°ã€‚ä½†æ˜¯ï¼Œç”±äºå‹ç¼©å‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œå› æ­¤å®ƒè¿˜ä¼šå¢åŠ ç›¸å½“å¤§çš„å¤„ç†å¼€é”€ï¼Œä»è€Œå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚NGINXåœ¨å°†å“åº”å‘é€åˆ°å®¢æˆ·ç«¯ä¹‹å‰æ‰§è¡Œå‹ç¼©ï¼Œä½†å¦‚æœåç«¯æœåŠ¡å™¨å·²ç»å¯¹å†…å®¹è¿›è¡Œäº†å‹ç¼©ï¼Œåˆ™nginxä¸ä¼šå†å‹ç¼©ã€‚</p><p>è‹¥è¦å¯ç”¨å‹ç¼©ï¼Œè¯·åœ¨å‚æ•°ä¸­åŒ…å« <a href="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip" target="_blank" rel="noreferrer">gzip</a> æŒ‡ä»¤ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">gzip </span><span style="color:#E1E4E8;">on; </span></span>
<span class="line"><span style="color:#F97583;">gzip_types </span><span style="color:#E1E4E8;">text/plain application/xml; </span></span>
<span class="line"><span style="color:#F97583;">gzip_min_length </span><span style="color:#E1E4E8;">1000; </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNGINXä»…ä½¿ç”¨å‹ç¼©MIMEç±»å‹æ˜¯<code>text/html</code>çš„å“åº”ã€‚è‹¥è¦ä½¿ç”¨å…¶ä»– MIME ç±»å‹å‹ç¼©å“åº”ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_types" target="_blank" rel="noreferrer">gzip_types</a> æŒ‡ä»¤å¹¶åˆ—å‡ºå…¶ä»–ç±»å‹ã€‚</p><p>è‹¥è¦æŒ‡å®šå‹ç¼©å“åº”çš„æœ€å°é•¿åº¦ï¼Œè¯·ä½¿ç”¨ <a href="https://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_min_length" target="_blank" rel="noreferrer">gzip_min_length</a> æŒ‡ä»¤ã€‚é»˜è®¤å€¼ä¸º 20 ä¸ªå­—èŠ‚ï¼ˆæ­¤å¤„è°ƒæ•´ä¸º 1000)ã€‚</p><h3 id="sendfile" tabindex="-1">sendfile <a class="header-anchor" href="#sendfile" aria-hidden="true">#</a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNGINXå¤„ç†æ–‡ä»¶ä¼ è¾“æœ¬èº«ï¼Œå¹¶åœ¨å‘é€ä¹‹å‰å°†æ–‡ä»¶å¤åˆ¶åˆ°ç¼“å†²åŒºä¸­ã€‚å¯ç”¨ <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#sendfile" target="_blank" rel="noreferrer">sendfile</a> æŒ‡ä»¤å¯æ¶ˆé™¤å°†æ•°æ®å¤åˆ¶åˆ°ç¼“å†²åŒºçš„æ­¥éª¤ï¼Œç›´æ¥å°†ä¸€ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p>å¯ç”¨sendfileï¼Œç±»ä¼¼Javaä¸­çš„é›¶æ‹·è´ï¼ˆzero copyï¼‰</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/download </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> sendfile </span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;"> on</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> tcp_nopush </span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;"> on</span><span style="color:#E1E4E8;">; </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#... </span></span>
<span class="line"><span style="color:#E1E4E8;">} </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å°† <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#tcp_nopush" target="_blank" rel="noreferrer">tcp_nopush</a> æŒ‡ä»¤ä¸ <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#sendfile" target="_blank" rel="noreferrer">sendfile</a> æŒ‡ä»¤ä¸€èµ·ä½¿ç”¨ã€‚è¿™ä½¿NGINXèƒ½å¤Ÿåœ¨è·å¾—æ•°æ®å—åç«‹å³åœ¨ä¸€ä¸ªæ•°æ®åŒ…ä¸­å‘é€HTTPå“åº”æ ‡å¤´ã€‚</p><h3 id="try-files" tabindex="-1">try_files <a class="header-anchor" href="#try-files" aria-hidden="true">#</a></h3><p><a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#try_files" target="_blank" rel="noreferrer">try_files</a>æŒ‡ä»¤å¯ç”¨äºæ£€æŸ¥æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨;å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™é‡å®šå‘åˆ°æŒ‡å®šä½ç½®ã€‚</p><p>å¦‚ä¸‹ï¼Œå¦‚æœåŸå§‹URIå¯¹åº”çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼ŒNGINXå°†å†…éƒ¨é‡å®šå‘åˆ°<code>/www/data/images/default.gif</code></p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/www/data;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/images/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> try_files </span><span style="color:#E1E4E8;">$uri /images/default.gif;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æœ€åä¸€ä¸ªå‚æ•°ä¹Ÿå¯ä»¥æ˜¯çŠ¶æ€ä»£ç ï¼ˆçŠ¶æ€ç ä¹‹å‰éœ€è¦åŠ ä¸Šç­‰å·ï¼‰ã€‚</p><p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæŒ‡ä»¤çš„æ‰€æœ‰å‚æ•°éƒ½æ— æ³•è§£æä¸ºç°æœ‰æ–‡ä»¶æˆ–ç›®å½•ï¼Œåˆ™ä¼šè¿”å›404é”™è¯¯ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> try_files </span><span style="color:#E1E4E8;">$uri $uri/ $uri.html </span><span style="color:#79B8FF;">=404</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åœ¨ä¸‹ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œå¦‚æœåŸå§‹ URI å’Œé™„åŠ å°¾éšæ–œæ çš„ URI éƒ½æ²¡æœ‰è§£æåˆ°ç°æœ‰æ–‡ä»¶æˆ–ç›®å½•ä¸­ï¼Œåˆ™è¯·æ±‚å°†é‡å®šå‘åˆ°å‘½åä½ç½®ï¼Œè¯¥ä½ç½®ä¼šå°†å…¶ä¼ é€’åˆ°ä»£ç†æœåŠ¡å™¨ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> try_files </span><span style="color:#E1E4E8;">$uri $uri/ @backend;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@backend </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://backend.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="error-page" tabindex="-1">error_page <a class="header-anchor" href="#error-page" aria-hidden="true">#</a></h3><p>ä¸ºé”™è¯¯æŒ‡å®šæ˜¾ç¤ºçš„é¡µé¢ã€‚å€¼å¯ä»¥åŒ…å«å˜é‡ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">error_page </span><span style="color:#E1E4E8;">404             /404.html; </span></span>
<span class="line"><span style="color:#F97583;">error_page </span><span style="color:#E1E4E8;">500 </span><span style="color:#79B8FF;">502</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">503</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">504</span><span style="color:#E1E4E8;"> /50x.html;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://docs.nginx.com/nginx/admin-guide/web-server/compression/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/web-server/compression/</a></p><p><a href="https://docs.nginx.com/nginx/admin-guide/web-server/serving-static-content/" target="_blank" rel="noreferrer">https://docs.nginx.com/nginx/admin-guide/web-server/serving-static-content/</a></p><h1 id="_11-æ¨èå†™æ³•åŠæ³¨æ„äº‹é¡¹" tabindex="-1"><strong>11.æ¨èå†™æ³•åŠæ³¨æ„äº‹é¡¹</strong> <a class="header-anchor" href="#_11-æ¨èå†™æ³•åŠæ³¨æ„äº‹é¡¹" aria-hidden="true">#</a></h1><h2 id="ä¸€ã€æ¨èå†™æ³•" tabindex="-1">ä¸€ã€æ¨èå†™æ³• <a class="header-anchor" href="#ä¸€ã€æ¨èå†™æ³•" aria-hidden="true">#</a></h2><h3 id="_1-é‡å¤çš„é…ç½®å¯ç»§æ‰¿è‡ªçˆ¶çº§" tabindex="-1">1.é‡å¤çš„é…ç½®å¯ç»§æ‰¿è‡ªçˆ¶çº§ <a class="header-anchor" href="#_1-é‡å¤çš„é…ç½®å¯ç»§æ‰¿è‡ªçˆ¶çº§" aria-hidden="true">#</a></h3><p>ä¾‹å¦‚ï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">www.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/var/www/nginx-default/;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># [...]</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/foo </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/var/www/nginx-default/;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># [...]</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/bar </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/some/other/place;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># [...]</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ¨èå†™æ³•</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">www.example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/var/www/nginx-default/;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># rootç»§æ‰¿çˆ¶çº§é…ç½®</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># [...]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/foo </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># rootç»§æ‰¿çˆ¶çº§é…ç½®</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># [...]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/bar </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># è¦†ç›–</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/some/other/place;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># [...]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>è¿™æ ·åœ¨æ·»åŠ æ–°çš„locationæ—¶ï¼Œå¯ä»¥é¿å…é‡å¤é…ç½®ã€‚</p><h3 id="_2-ä¸è¦å°†æ‰€æœ‰è¯·æ±‚éƒ½ä»£ç†åˆ°åç«¯æœåŠ¡å™¨" tabindex="-1">2.ä¸è¦å°†æ‰€æœ‰è¯·æ±‚éƒ½ä»£ç†åˆ°åç«¯æœåŠ¡å™¨ <a class="header-anchor" href="#_2-ä¸è¦å°†æ‰€æœ‰è¯·æ±‚éƒ½ä»£ç†åˆ°åç«¯æœåŠ¡å™¨" aria-hidden="true">#</a></h3><p>ä¸æ¨èï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8088;        </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è€ƒè™‘åˆ°å¾ˆå¤šè¯·æ±‚æ˜¯è®¿é—®é™æ€å†…å®¹ï¼ˆå¦‚å›¾ç‰‡ï¼Œcssï¼Œjavascriptç­‰æ–‡ä»¶ï¼‰,å¯ä»¥ä½¿ç”¨ç¼“å­˜æˆ–è€…é…ç½®é™æ€ç›®å½•æ¥å‡å°‘å‘é€åˆ°åç«¯çš„è¯·æ±‚æ•°é‡ï¼Œè¿™æ ·å¯ä»¥å‡å°åç«¯æœåŠ¡å™¨çš„å¼€é”€ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">8002;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">ruoyi.tomcat;</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/home/www/static;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> try_files </span><span style="color:#E1E4E8;">$uri $uri/ @proxy;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@proxy </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_set_header </span><span style="color:#E1E4E8;">Host $http_host;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_set_header </span><span style="color:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_set_header </span><span style="color:#E1E4E8;">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> proxy_pass </span><span style="color:#E1E4E8;">http://localhost:8080;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_3-è‹¥éå¿…è¦-ä¸è¦ç¼“å­˜åŠ¨æ€è¯·æ±‚-åªç¼“å­˜é™æ€æ–‡ä»¶" tabindex="-1">3.è‹¥éå¿…è¦ï¼Œä¸è¦ç¼“å­˜åŠ¨æ€è¯·æ±‚ï¼Œåªç¼“å­˜é™æ€æ–‡ä»¶ <a class="header-anchor" href="#_3-è‹¥éå¿…è¦-ä¸è¦ç¼“å­˜åŠ¨æ€è¯·æ±‚-åªç¼“å­˜é™æ€æ–‡ä»¶" aria-hidden="true">#</a></h3><p>nginxå…³äºç¼“å­˜çš„æŒ‡ä»¤éå¸¸å¤š</p><p>â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache" target="_blank" rel="noreferrer">proxy_cache</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_background_update" target="_blank" rel="noreferrer">proxy_cache_background_update</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_bypass" target="_blank" rel="noreferrer">proxy_cache_bypass</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_convert_head" target="_blank" rel="noreferrer">proxy_cache_convert_head</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_key" target="_blank" rel="noreferrer">proxy_cache_key</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_lock" target="_blank" rel="noreferrer">proxy_cache_lock</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_lock_age" target="_blank" rel="noreferrer">proxy_cache_lock_age</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_lock_timeout" target="_blank" rel="noreferrer">proxy_cache_lock_timeout</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_max_range_offset" target="_blank" rel="noreferrer">proxy_cache_max_range_offset</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_methods" target="_blank" rel="noreferrer">proxy_cache_methods</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_min_uses" target="_blank" rel="noreferrer">proxy_cache_min_uses</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path" target="_blank" rel="noreferrer">proxy_cache_path</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_purge" target="_blank" rel="noreferrer">proxy_cache_purge</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_revalidate" target="_blank" rel="noreferrer">proxy_cache_revalidate</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_use_stale" target="_blank" rel="noreferrer">proxy_cache_use_stale</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_valid" target="_blank" rel="noreferrer">proxy_cache_valid</a> â€‹ <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_no_cache" target="_blank" rel="noreferrer">proxy_no_cache</a></p><p>ç”±äºnginxæœåŠ¡ç«¯ç¼“å­˜éå¸¸å¤æ‚ï¼Œåœ¨ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ¸…æ¥šçš„çŸ¥é“åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹ï¼Œå“ªäº›æ–‡ä»¶ä¼šè¢«ç¼“å­˜ã€‚</p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæœ€å¥½èƒ½å¤Ÿæ¸…æ™°çš„æŒ‡å®šå“ªäº›æ–‡ä»¶ä½¿ç”¨ç¼“å­˜ã€‚</p><h3 id="_4-æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä½¿ç”¨try-filesä»£æ›¿if-f" tabindex="-1">4.æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä½¿ç”¨try_filesä»£æ›¿if -f <a class="header-anchor" href="#_4-æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä½¿ç”¨try-filesä»£æ›¿if-f" aria-hidden="true">#</a></h3><p>ä¸æ¨èç”¨æ³•ï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/var/www/example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!-f </span><span style="color:#E1E4E8;">$request_filename) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ¨èç”¨æ³•ï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/var/www/example.com;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/ </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;"> try_files </span><span style="color:#E1E4E8;">$uri $uri/ /index.html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-åœ¨é‡å†™è·¯å¾„ä¸­åŒ…å«http-æˆ–https" tabindex="-1">5.åœ¨é‡å†™è·¯å¾„ä¸­åŒ…å«<a href="http://xn--https-wm6j" target="_blank" rel="noreferrer">http://æˆ–https</a>ğŸ˜•/ <a class="header-anchor" href="#_5-åœ¨é‡å†™è·¯å¾„ä¸­åŒ…å«http-æˆ–https" aria-hidden="true">#</a></h3><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#æ¨èå†™æ³•</span></span>
<span class="line"><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> ^ http://example.com </span><span style="color:#F97583;">permanent</span><span style="color:#E1E4E8;">; </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#ä¸æ¨èçš„å†™æ³•</span></span>
<span class="line"><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> ^ example.com </span><span style="color:#F97583;">permanent</span><span style="color:#E1E4E8;">; </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_6-ä¿æŒé‡å†™è§„åˆ™ç®€å•å¹²å‡€" tabindex="-1">6.ä¿æŒé‡å†™è§„åˆ™ç®€å•å¹²å‡€ <a class="header-anchor" href="#_6-ä¿æŒé‡å†™è§„åˆ™ç®€å•å¹²å‡€" aria-hidden="true">#</a></h3><p>ä¾‹å¦‚ä¸‹é¢çš„è¿™ä¸ªä¾‹å­å¯ä»¥å˜å¾—æ›´ç®€å•æ˜“æ‡‚ã€‚</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#å¤æ‚çš„å†™æ³•</span></span>
<span class="line"><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^/(.*)$</span><span style="color:#E1E4E8;"> http://example.com/$1 </span><span style="color:#F97583;">permanent</span><span style="color:#E1E4E8;">; </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#ç®€å•æœ‰æ•ˆçš„å†™æ³•</span></span>
<span class="line"><span style="color:#F97583;">rewrite</span><span style="color:#E1E4E8;"> </span><span style="color:#DBEDFF;">^ http://example.com$</span><span style="color:#E1E4E8;">request_uri? </span><span style="color:#F97583;">permanent</span><span style="color:#E1E4E8;">; </span></span>
<span class="line"><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">301</span><span style="color:#E1E4E8;"> http://example.com$request_uri; </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="äºŒã€æ³¨æ„äº‹é¡¹" tabindex="-1">äºŒã€æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#äºŒã€æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a></h2><h3 id="_1-æ­£ç¡®çš„é…ç½®æœªç”Ÿæ•ˆ-è¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜" tabindex="-1">1.æ­£ç¡®çš„é…ç½®æœªç”Ÿæ•ˆï¼Œè¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ <a class="header-anchor" href="#_1-æ­£ç¡®çš„é…ç½®æœªç”Ÿæ•ˆ-è¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜" aria-hidden="true">#</a></h3><p>å½“ä½ ç¡®å®šä¿®æ”¹çš„é…ç½®çš„æ­£ç¡®çš„ï¼Œä½†æ˜¯æœªç”Ÿæ•ˆï¼Œè¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–è€…ç¦ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚</p><h3 id="_2-åœ¨httpsä¸­ä¸å¯ç”¨-sslv3" tabindex="-1">2.åœ¨HTTPSä¸­ä¸å¯ç”¨ SSLv3 <a class="header-anchor" href="#_2-åœ¨httpsä¸­ä¸å¯ç”¨-sslv3" aria-hidden="true">#</a></h3><p>ç”±äº SSLv3 ä¸­å­˜åœ¨ POODLE æ¼æ´ï¼Œå»ºè®®ä¸è¦åœ¨å¯ç”¨äº† SSL çš„ç«™ç‚¹ä¸­ä½¿ç”¨ SSLv3ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¡Œéå¸¸è½»æ¾åœ°ç¦ç”¨ SSLv3ï¼Œå¹¶ä»…æä¾› TLS åè®®ï¼š</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">ssl_protocols </span><span style="color:#E1E4E8;">TLSv1 TLSv1.1 TLSv1.2;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-ä¸è¦å°†-root-ç›®å½•é…ç½®æˆ-æˆ–-rootã€‚" tabindex="-1">3.ä¸è¦å°† root ç›®å½•é…ç½®æˆ <code>/</code>æˆ– <code>/root</code>ã€‚ <a class="header-anchor" href="#_3-ä¸è¦å°†-root-ç›®å½•é…ç½®æˆ-æˆ–-rootã€‚" aria-hidden="true">#</a></h3><p>é”™è¯¯ç”¨æ³•</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark" tabindex="0"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#é”™è¯¯ç”¨æ³•</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/project/path </span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#é”™è¯¯ç”¨æ³•</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;"> root </span><span style="color:#E1E4E8;">/root;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_4-è°¨æ…ä½¿ç”¨chmod-777" tabindex="-1">4.è°¨æ…ä½¿ç”¨chmod 777 <a class="header-anchor" href="#_4-è°¨æ…ä½¿ç”¨chmod-777" aria-hidden="true">#</a></h3><p>è¿™å¯èƒ½æ˜¯è§£å†³é—®é¢˜æœ€ç®€å•çš„æ–¹å¼ï¼ŒåŒæ—¶ä¹Ÿè¯´æ˜ï¼Œä½ æ²¡æœ‰çœŸçš„å¼„æ¸…æ¥šå“ªé‡Œå‡ºäº†é—®é¢˜ã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>namei -om /path/to/check</code>æ˜¾ç¤ºè·¯å¾„ä¸Šçš„æ‰€æœ‰æƒé™ï¼Œå¹¶æ‰¾åˆ°é—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚</p><h3 id="_5-ä¸è¦å°†éƒ¨ç½²çš„é¡¹ç›®æ‹·è´åˆ°é»˜è®¤ç›®å½•ä¸‹" tabindex="-1">5.ä¸è¦å°†éƒ¨ç½²çš„é¡¹ç›®æ‹·è´åˆ°é»˜è®¤ç›®å½•ä¸‹ <a class="header-anchor" href="#_5-ä¸è¦å°†éƒ¨ç½²çš„é¡¹ç›®æ‹·è´åˆ°é»˜è®¤ç›®å½•ä¸‹" aria-hidden="true">#</a></h3><p>å‡çº§æˆ–æ›´æ–°nginxçš„æ—¶å€™ï¼Œé»˜è®¤ç›®å½•å¯èƒ½è¢«è¦†ç›–ã€‚</p><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p><a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/" target="_blank" rel="noreferrer">https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/</a></p><p><a href="https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/" target="_blank" rel="noreferrer">https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/</a></p>`,433),r=[p];function o(t,c,i,E,b,d){return a(),n("div",null,r)}const h=s(l,[["render",o]]);export{u as __pageData,h as default};
